/*! For license information please see main.36bf076c.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!a[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=h(n,g);try{c(t,g,y)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case u:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===k||e.$$typeof===b||e.$$typeof===g)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var M,R=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function $(e,t){Y(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ce(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ie(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Le(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Te(e,t,n)}finally{Ne=!1,(null!==_e||null!==Se)&&(Le(),Ie())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ae=!1;if(l)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(le){Ae=!1}function De(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Re=null,Fe=!1,Ue=null,Ve={onError:function(e){Me=!0,Re=e}};function Be(e,t,n,r,i,a,o,s,u){Me=!1,Re=null,De.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ze=i.unstable_requestPaint,Ye=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,St,Et,Ct=!1,It=[],Tt=null,Lt=null,Nt=null,Pt=new Map,Ot=new Map,At=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Rt(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Ct=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Lt&&Ft(Lt)&&(Lt=null),null!==Nt&&Ft(Nt)&&(Nt=null),Pt.forEach(Ut),Ot.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<It.length){Bt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==Lt&&Bt(Lt,e),null!==Nt&&Bt(Nt,e),Pt.forEach(t),Ot.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Rt(n),null===n.blockedOn&&At.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Kt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Kt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){if(Wt){var i=Jt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Mt(Tt,e,t,n,r,i),!0;case"dragenter":return Lt=Mt(Lt,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Jt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=$t,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=R({},cn,{view:0,detail:0}),hn=an(fn),dn=R({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(R({},dn,{dataTransfer:0})),mn=an(R({},fn,{relatedTarget:0})),gn=an(R({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=R({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(yn),bn=an(R({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return Sn}var Cn=R({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Cn),Tn=an(R({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=an(R({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(R({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=R({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),An=[9,13,27,32],jn=l&&"CompositionEvent"in window,Dn=null;l&&"documentMode"in document&&(Dn=document.documentMode);var Mn=l&&"TextEvent"in window&&!Dn,Rn=l&&(!jn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){Fr(e,0)}function Jn(e){if(K(bi(e)))return e}function Zn(e,t){if("change"===e)return t}var Yn=!1;if(l){var $n;if(l){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}$n=Xn}else $n=!1;Yn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Jn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Kn)}function ar(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Sr={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Er("animationend"),Ir=Er("animationiteration"),Tr=Er("animationstart"),Lr=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),u(t,[e])}for(var Ar=0;Ar<Pr.length;Ar++){var jr=Pr[Ar];Or(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(Tr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Lr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Re;Me=!1,Re=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Rr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Rr(i,s,c),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Zt(t)){case 1:var i=Ht;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=In;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Ln;break;case Cr:case Ir:case Tr:u=gn;break;case Lr:u=Nn;break;case"scroll":u=hn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,yi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Kr(d))p++;for(d=0,v=h;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)h=Kr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Kr(l),h=Kr(h)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Wn(s))if(Yn)m=or;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?bi(r):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(jn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Rn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(y=en()):($t="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(g=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:g}),y?k.data=y:null!==(y=Bn(n))&&(k.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!jn&&Vn(e,t)?(e=en(),Xt=$t=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Oe(n,a))&&o.unshift(Hr(n,u,s)):i||null!=(u=Oe(n,a))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Zr,"")}function $r(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Xr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,gi="__reactHandles$"+fi;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Si(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ci(e,t){_i++,xi[_i]=e.current,e.current=t}var Ii={},Ti=Si(Ii),Li=Si(!1),Ni=Ii;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){Ei(Li),Ei(Ti)}function ji(e,t,n){if(Ti.current!==Ii)throw Error(a(168));Ci(Ti,t),Ci(Li,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return R({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ni=Ti.current,Ci(Ti,e),Ci(Li,Li.current),!0}function Ri(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Di(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Li),Ei(Ti),Ci(Ti,e)):Ei(Li),Ci(Li,n)}var Fi=null,Ui=!1,Vi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Xe,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Wi=0,Hi=null,Gi=0,Ki=[],Qi=0,Ji=null,Zi=1,Yi="";function $i(e,t){qi[Wi++]=Gi,qi[Wi++]=Hi,Hi=e,Gi=t}function Xi(e,t,n){Ki[Qi++]=Zi,Ki[Qi++]=Yi,Ki[Qi++]=Ji,Ji=e;var r=Zi;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zi=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Zi=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&($i(e,1),Xi(e,1,0))}function ta(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Gi=qi[--Wi],qi[Wi]=null;for(;e===Ji;)Ji=Ki[--Qi],Ki[Qi]=null,Yi=Ki[--Qi],Ki[Qi]=null,Zi=Ki[--Qi],Ki[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Zi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Si(null),ya=null,ka=null,ba=null;function wa(){ba=ka=ya=null}function xa(e){var t=ga.current;Ei(ga),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ya=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ya)throw Error(a(308));ka=e,ya.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ia(e){null===Ca?Ca=[e]:Ca.push(e)}function Ta(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,La(e,r)}function La(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Aa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ja(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Lu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,La(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,La(e,n)}function Da(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ra(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=R({},f,h);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ru|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Aa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,i))&&(rc(t,e,i,r),Da(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Aa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,i))&&(rc(t,e,i,r),Da(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Aa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=ja(e,i,r))&&(rc(t,e,r,n),Da(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Oi(t)?Ni:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Oi(t)?Ni:Ti.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Ra(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ja(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:f(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return f(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=d(i,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===s.length)return n(i,f),ia&&$i(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&$i(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&$i(i,v),c}function m(i,s,u,c){var l=D(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var k=d(i,v,y.value,c);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===f?l=k:f.sibling=k,f=k,v=g}if(y.done)return n(i,v),ia&&$i(i,m),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return ia&&$i(i,m),l}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&$i(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Dc(o.type,o.key,o.props,null,r.mode,u)).ref=Ga(r,a,o),u.return=r,r=u)}return s(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case O:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(D(o))return m(r,a,o,u);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Za=Ja(!0),Ya=Ja(!1),$a={},Xa=Si($a),eo=Si($a),to=Si($a);function no(e){if(e===$a)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Xa,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Xa),Ci(Xa,t)}function io(){Ei(Xa),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Xa.current),n=ue(t,e.type);t!==n&&(Ci(eo,e),Ci(Xa,n))}function oo(e){eo.current===e&&(Ei(Xa),Ei(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function Io(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function To(e,t){return"function"===typeof t?t(e):t}function Lo(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,Ru|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ru|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Oo(e,t){var n=vo,r=Io(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Wo(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Uo(9,jo.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function jo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Ro(e)}function Do(e,t,n){return n((function(){Mo(t)&&Ro(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ro(e){var t=La(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Io().memoizedState}function Bo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ko.bind(null,t,e),n)}function Jo(){}function Zo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Ru|=n,e.baseState=!0),t)}function Xo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return Io().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ta(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ia(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ta(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Fo,useDebugValue:Jo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Xo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Do.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,jo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Nu.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Zi&~(1<<32-ot(Zi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Zo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Yo,useReducer:Lo,useRef:Vo,useState:function(){return Lo(To)},useDebugValue:Jo,useDeferredValue:function(e){return $o(Io(),mo.memoizedState,e)},useTransition:function(){return[Lo(To)[0],Io().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Zo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Yo,useReducer:No,useRef:Vo,useState:function(){return No(To)},useDebugValue:Jo,useDeferredValue:function(e){var t=Io();return null===mo?t.memoizedState=e:$o(t,mo.memoizedState,e)},useTransition:function(){return[No(To)[0],Io().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Aa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Gu=r),hs(0,t)},n}function vs(e,t,n){(n=Aa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Aa(-1,1)).tag=2,ja(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Za(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function _s(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ac(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=jc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Is(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(ju,Au),Au|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(ju,Au),Au|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(ju,Au),Au|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(ju,Au),Au|=r;return ws(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,r,i){var a=Oi(n)?Ni:Ti.current;return a=Pi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ts(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ws(e,t),qa(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Oi(n)?Ni:Ti.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wa(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Ra(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Li.current||Na?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Na||za(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Pi(t,u=Oi(n)?Ni:Ti.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Wa(t,o,r,u),Na=!1,h=t.memoizedState,o.state=h,Ra(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Li.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ls(e,t,n,r,a,i)}function Ls(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ri(t,n,!1),Hs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Za(t,e.child,null,a),t.child=Za(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Ri(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Os,As,js,Ds,Ms={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Rc(u,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(n),t.memoizedState=Ms,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Rc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Za(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,La(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Qi++]=Zi,Ki[Qi++]=Yi,Ki[Qi++]=Ji,Zi=e.id,Yi=e.overflow,Ji=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=jc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=jc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Rs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=jc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),Za(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ru|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Oi(t.type)&&Ai(),Ks(t),null;case 3:return r=t.stateNode,io(),Ei(Li),Ei(Ti),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),As(e,t),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)js(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no(Xa.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Z(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":G(r),X(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Z(e,r),i=J(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=R({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":G(e),X(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Xa.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Du&&(Du=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),As(e,t),null===e&&zr(t.stateNode.containerInfo),Ks(t),null;case 10:return xa(t.type._context),Ks(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Gs(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>qu&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ks(t),null}else 2*Ye()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Au)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Js(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Li),Ei(Ti),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},As=function(){},js=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Xa.current);var a,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Zs=!1,Ys=!1,$s="function"===typeof WeakSet?WeakSet:Set,Xs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Ys&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,du(e,t,n),Ys=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Lc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(a(160));pu(o,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),yu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Ec(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(mu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(mu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:mu(t,e),yu(e);break;case 13:mu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zu=Ye())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(l=Ys)||f,mu(t,e),Ys=l):mu(t,e),yu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xs=e,f=e.child;null!==f;){for(h=Xs=f;null!==Xs;){switch(p=(d=Xs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){xu(h);continue}}null!==p?(p.return=d,Xs=p):xu(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Xs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var i=Xs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Zs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=Zs;var c=Ys;if(Zs=o,(Ys=u)&&!c)for(Xs=i;null!==Xs;)u=(o=Xs).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Xs=u):_u(i);for(;null!==a;)Xs=a,bu(a,t,n),a=a.sibling;Xs=i,Zs=s,Ys=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xs=a):wu(e)}}function wu(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&au(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function xu(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function _u(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var a=t.return;try{au(t)}catch(u){Ec(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Su,Eu=Math.ceil,Cu=b.ReactCurrentDispatcher,Iu=b.ReactCurrentOwner,Tu=b.ReactCurrentBatchConfig,Lu=0,Nu=null,Pu=null,Ou=0,Au=0,ju=Si(0),Du=0,Mu=null,Ru=0,Fu=0,Uu=0,Vu=null,Bu=null,zu=0,qu=1/0,Wu=null,Hu=!1,Gu=null,Ku=null,Qu=!1,Ju=null,Zu=0,Yu=0,$u=null,Xu=-1,ec=0;function tc(){return 0!==(6&Lu)?Ye():-1!==Xu?Xu:Xu=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Lu)&&0!==Ou?Ou&-Ou:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function rc(e,t,n,r){if(50<Yu)throw Yu=0,$u=null,Error(a(185));gt(e,n,r),0!==(2&Lu)&&e===Nu||(e===Nu&&(0===(2&Lu)&&(Fu|=n),4===Du&&uc(e,Ou)),ic(e,r),1===n&&0===Lu&&0===(1&t.mode)&&(qu=Ye()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Nu?Ou:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Lu)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Xu=-1,ec=0,0!==(6&Lu))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Nu?Ou:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Lu;Lu|=2;var o=vc();for(Nu===e&&Ou===t||(Wu=null,qu=Ye()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}wa(),Cu.current=o,Lu=i,null!==Pu?t=0:(Nu=null,Ou=0,t=Du)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Mu,dc(e,0),uc(e,r),ic(e,Ye()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Mu,dc(e,0),uc(e,r),ic(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Bu,Wu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=zu+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bu,Wu),t);break}xc(e,Bu,Wu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bu,Wu),r);break}xc(e,Bu,Wu);break;default:throw Error(a(329))}}}return ic(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bu,Bu=n,null!==t&&sc(t)),e}function sc(e){null===Bu?Bu=e:Bu.push.apply(Bu,e)}function uc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Lu))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Mu,dc(e,0),uc(e,t),ic(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bu,Wu),ic(e,Ye()),null}function lc(e,t){var n=Lu;Lu|=1;try{return e(t)}finally{0===(Lu=n)&&(qu=Ye()+500,Ui&&zi())}}function fc(e){null!==Ju&&0===Ju.tag&&0===(6&Lu)&&_c();var t=Lu;Lu|=1;var n=Tu.transition,r=kt;try{if(Tu.transition=null,kt=1,e)return e()}finally{kt=r,Tu.transition=n,0===(6&(Lu=t))&&zi()}}function hc(){Au=ju.current,Ei(ju)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:io(),Ei(Li),Ei(Ti),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nu=e,Pu=e=jc(e.current,null),Ou=Au=t,Du=0,Mu=null,Uu=Fu=Ru=0,Bu=Vu=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function pc(e,t){for(;;){var n=Pu;try{if(wa(),fo.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,ko=!1,bo=0,Iu.current=null,null===n||null===n.return){Du=1,Mu=t,Pu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ou,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Du&&(Du=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var y=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ku||!Ku.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function vc(){var e=Cu.current;return Cu.current=os,null===e?os:e}function mc(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Nu||0===(268435455&Ru)&&0===(268435455&Fu)||uc(Nu,Ou)}function gc(e,t){var n=Lu;Lu|=2;var r=vc();for(Nu===e&&Ou===t||(Wu=null,dc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(wa(),Lu=n,Cu.current=r,null!==Pu)throw Error(a(261));return Nu=null,Ou=0,Du}function yc(){for(;null!==Pu;)bc(Pu)}function kc(){for(;null!==Pu&&!Je();)bc(Pu)}function bc(e){var t=Su(e.alternate,e,Au);e.memoizedProps=e.pendingProps,null===t?wc(e):Pu=t,Iu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Au)))return void(Pu=n)}else{if(null!==(n=Js(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Du=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Du&&(Du=5)}function xc(e,t,n){var r=kt,i=Tu.transition;try{Tu.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Ju);if(0!==(6&Lu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Pu=Nu=null,Ou=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=kt;kt=1;var u=Lu;Lu|=4,Iu.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}v=nu,nu=!1}(e,n),gu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Ze(),Lu=u,kt=s,Tu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Ju=e,Zu=i),o=e.pendingLanes,0===o&&(Ku=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Gu,Gu=null,e;0!==(1&Zu)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===$u?Yu++:(Yu=0,$u=e):Yu=0,zi()}(e,t,n,r)}finally{Tu.transition=i,kt=r}return null}function _c(){if(null!==Ju){var e=bt(Zu),t=Tu.transition,n=kt;try{if(Tu.transition=null,kt=16>e?16:e,null===Ju)var r=!1;else{if(e=Ju,Ju=null,Zu=0,0!==(6&Lu))throw Error(a(331));var i=Lu;for(Lu|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Xs=l;null!==Xs;){var f=Xs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xs=h;else for(;null!==Xs;){var d=(f=Xs).sibling,p=f.return;if(ou(f),f===l){Xs=null;break}if(null!==d){d.return=p,Xs=d;break}Xs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Xs=y;break e}Xs=o.return}}var k=e.current;for(Xs=k;null!==Xs;){var b=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Xs=b;else e:for(s=k;null!==Xs;){if(0!==(2048&(u=Xs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(x){Ec(u,u.return,x)}if(u===s){Xs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Xs=w;break e}Xs=u.return}}if(Lu=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Tu.transition=t}}return!1}function Sc(e,t,n){e=ja(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=ja(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Ou&n)===n&&(4===Du||3===Du&&(130023424&Ou)===Ou&&500>Ye()-zu?dc(e,0):Uu|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=La(e,t))&&(gt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Lc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return Ke(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Pc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ac(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case S:s=8,i|=8;break;case E:return(e=Oc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case L:return(e=Oc(13,n,t,i)).elementType=L,e.lanes=o,e;case N:return(e=Oc(19,n,t,i)).elementType=N,e.lanes=o,e;case A:return Rc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case I:s=9;break e;case T:s=11;break e;case P:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Rc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Di(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=Bc(n,r,!0,e,0,a,0,s,u)).context=zc(null),n=e.current,(a=Aa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,ja(n,a,i),e.current.lanes=i,gt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Aa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ja(i,t,o))&&(rc(e,i,o,a),Da(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Li.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ci(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Xi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Pi(t,Ti.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Ls(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Is(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=_s(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Ra(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Za(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Li.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Aa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_a(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_s(e,t,r,i=ma(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ws(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Ha(t,r,i,n),Ls(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=Bc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Hc(o)}Zc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Zc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Wc(null,e,null,null)})),t[pi]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Rt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Ye()),0===(6&Lu)&&(qu=Ye()+500,zi()))}break;case 13:fc((function(){var t=La(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},xt=function(e){if(13===e.tag){var t=La(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=La(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));K(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=lc,Le=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ce,Ie,lc]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},504:function(e,t,n){e.exports=n(269)},269:function(e,t,n){"use strict";var r,i=(r=n(791))&&"object"==typeof r&&"default"in r?r.default:r,a=n(164);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){e.prototype=Object.create(t.prototype),function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}}(e.prototype.constructor=e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=function(e,t,n,r,i,a,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}};function l(e,t,n){if("selectionStart"in e&&"selectionEnd"in e)e.selectionStart=t,e.selectionEnd=n;else{var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}}var f={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};function h(e,t,n){var r="",i="",a=null,o=[];if(void 0===t&&(t="_"),null==n&&(n=f),!e||"string"!=typeof e)return{maskChar:t,formatChars:n,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var s=!1;return e.split("").forEach((function(e){s=!s&&"\\"===e||(s||!n[e]?(o.push(r.length),r.length===o.length-1&&(i+=e)):a=r.length+1,r+=e,!1)})),{maskChar:t,formatChars:n,prefix:i,mask:r,lastEditablePosition:a,permanents:o}}function d(e,t){return-1!==e.permanents.indexOf(t)}function p(e,t,n){var r=e.mask,i=e.formatChars;if(!n)return!1;if(d(e,t))return r[t]===n;var a=i[r[t]];return new RegExp(a).test(n)}function v(e,t){return t.split("").every((function(t,n){return d(e,n)||!p(e,n,t)}))}function m(e,t){var n=e.maskChar,r=e.prefix;if(!n){for(;t.length>r.length&&d(e,t.length-1);)t=t.slice(0,t.length-1);return t.length}for(var i=r.length,a=t.length;a>=r.length;a--){var o=t[a];if(!d(e,a)&&p(e,a,o)){i=a+1;break}}return i}function g(e,t){return m(e,t)===e.mask.length}function y(e,t){var n=e.maskChar,r=e.mask,i=e.prefix;if(!n){for((t=k(e,"",t,0)).length<i.length&&(t=i);t.length<r.length&&d(e,t.length);)t+=r[t.length];return t}if(t)return k(e,y(e,""),t,0);for(var a=0;a<r.length;a++)d(e,a)?t+=r[a]:t+=n;return t}function k(e,t,n,r){var i=e.mask,a=e.maskChar,o=e.prefix,s=n.split(""),u=g(e,t);return!a&&r>t.length&&(t+=i.slice(t.length,r)),s.every((function(n){for(;l=n,d(e,c=r)&&l!==i[c];){if(r>=t.length&&(t+=i[r]),s=n,a&&d(e,r)&&s===a)return!0;if(++r>=i.length)return!1}var s,c,l;return!p(e,r,n)&&n!==a||(r<t.length?t=a||u||r<o.length?t.slice(0,r)+n+t.slice(r+1):(t=t.slice(0,r)+n+t.slice(r),y(e,t)):a||(t+=n),++r<i.length)})),t}function b(e,t){for(var n=e.mask,r=t;r<n.length;++r)if(!d(e,r))return r;return null}function w(e){return e||0===e?e+"":""}function x(e,t,n,r,i){var a=e.mask,o=e.prefix,s=e.lastEditablePosition,u=t,c="",l=0,f=0,h=Math.min(i.start,n.start);return n.end>i.start?f=(l=function(e,t,n,r){var i=e.mask,a=e.maskChar,o=n.split(""),s=r;return o.every((function(t){for(;o=t,d(e,n=r)&&o!==i[n];)if(++r>=i.length)return!1;var n,o;return(p(e,r,t)||t===a)&&r++,r<i.length})),r-s}(e,0,c=u.slice(i.start,n.end),h))?i.length:0:u.length<r.length&&(f=r.length-u.length),u=r,f&&(1!==f||i.length||(h=i.start===n.start?b(e,n.start):function(e,t){for(var n=t;0<=n;--n)if(!d(e,n))return n;return null}(e,n.start)),u=function(e,t,n,r){var i=n+r,a=e.maskChar,o=e.mask,s=e.prefix,u=t.split("");if(a)return u.map((function(t,r){return r<n||i<=r?t:d(e,r)?o[r]:a})).join("");for(var c=i;c<u.length;c++)d(e,c)&&(u[c]="");return n=Math.max(s.length,n),u.splice(n,i-n),t=u.join(""),y(e,t)}(e,u,h,f)),u=k(e,u,c,h),(h+=l)>=a.length?h=a.length:h<o.length&&!l?h=o.length:h>=o.length&&h<s&&l&&(h=b(e,h)),c||(c=null),{value:u=y(e,u),enteredString:c,selection:{start:h,end:h}}}function _(e){return"function"==typeof e}function S(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function E(e){return(S()?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame:function(){return setTimeout(e,1e3/60)})(e)}function C(e){(S()||clearTimeout)(e)}var I=function(e){function t(t){var n=e.call(this,t)||this;n.focused=!1,n.mounted=!1,n.previousSelection=null,n.selectionDeferId=null,n.saveSelectionLoopDeferId=null,n.saveSelectionLoop=function(){n.previousSelection=n.getSelection(),n.saveSelectionLoopDeferId=E(n.saveSelectionLoop)},n.runSaveSelectionLoop=function(){null===n.saveSelectionLoopDeferId&&n.saveSelectionLoop()},n.stopSaveSelectionLoop=function(){null!==n.saveSelectionLoopDeferId&&(C(n.saveSelectionLoopDeferId),n.saveSelectionLoopDeferId=null,n.previousSelection=null)},n.getInputDOMNode=function(){if(!n.mounted)return null;var e=a.findDOMNode(u(u(n))),t="undefined"!=typeof window&&e instanceof window.Element;if(e&&!t)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw new Error("react-input-mask: inputComponent doesn't contain input node");return e},n.getInputValue=function(){var e=n.getInputDOMNode();return e?e.value:null},n.setInputValue=function(e){var t=n.getInputDOMNode();t&&(n.value=e,t.value=e)},n.setCursorToEnd=function(){var e=m(n.maskOptions,n.value),t=b(n.maskOptions,e);null!==t&&n.setCursorPosition(t)},n.setSelection=function(e,t,r){void 0===r&&(r={});var i=n.getInputDOMNode(),a=n.isFocused();i&&a&&(r.deferred||l(i,e,t),null!==n.selectionDeferId&&C(n.selectionDeferId),n.selectionDeferId=E((function(){n.selectionDeferId=null,l(i,e,t)})),n.previousSelection={start:e,end:t,length:Math.abs(t-e)})},n.getSelection=function(){return function(e){var t=0,n=0;if("selectionStart"in e&&"selectionEnd"in e)t=e.selectionStart,n=e.selectionEnd;else{var r=document.selection.createRange();r.parentElement()===e&&(t=-r.moveStart("character",-e.value.length),n=-r.moveEnd("character",-e.value.length))}return{start:t,end:n,length:n-t}}(n.getInputDOMNode())},n.getCursorPosition=function(){return n.getSelection().start},n.setCursorPosition=function(e){n.setSelection(e,e)},n.isFocused=function(){return n.focused},n.getBeforeMaskedValueChangeConfig=function(){var e=n.maskOptions,t=e.mask,r=e.maskChar,i=e.permanents,a=e.formatChars;return{mask:t,maskChar:r,permanents:i,alwaysShowMask:!!n.props.alwaysShowMask,formatChars:a}},n.isInputAutofilled=function(e,t,r,i){var a=n.getInputDOMNode();try{if(a.matches(":-webkit-autofill"))return!0}catch(c){}return!n.focused||i.end<r.length&&t.end===e.length},n.onChange=function(e){var t=u(u(n)).beforePasteState,r=u(u(n)).previousSelection,i=n.props.beforeMaskedValueChange,a=n.getInputValue(),o=n.value,s=n.getSelection();n.isInputAutofilled(a,s,o,r)&&(o=y(n.maskOptions,""),r={start:0,end:0,length:0}),t&&(r=t.selection,o=t.value,s={start:r.start+a.length,end:r.start+a.length,length:0},a=o.slice(0,r.start)+a+o.slice(r.end),n.beforePasteState=null);var c=x(n.maskOptions,a,s,o,r),l=c.enteredString,f=c.selection,h=c.value;if(_(i)){var d=i({value:h,selection:f},{value:o,selection:r},l,n.getBeforeMaskedValueChangeConfig());h=d.value,f=d.selection}n.setInputValue(h),_(n.props.onChange)&&n.props.onChange(e),n.isWindowsPhoneBrowser?n.setSelection(f.start,f.end,{deferred:!0}):n.setSelection(f.start,f.end)},n.onFocus=function(e){var t=n.props.beforeMaskedValueChange,r=n.maskOptions,i=r.mask,a=r.prefix;if(n.focused=!0,n.mounted=!0,i){if(n.value)m(n.maskOptions,n.value)<n.maskOptions.mask.length&&n.setCursorToEnd();else{var o=y(n.maskOptions,a),s=y(n.maskOptions,o),u=m(n.maskOptions,s),c=b(n.maskOptions,u),l={start:c,end:c};if(_(t)){var f=t({value:s,selection:l},{value:n.value,selection:null},null,n.getBeforeMaskedValueChangeConfig());s=f.value,l=f.selection}var h=s!==n.getInputValue();h&&n.setInputValue(s),h&&_(n.props.onChange)&&n.props.onChange(e),n.setSelection(l.start,l.end)}n.runSaveSelectionLoop()}_(n.props.onFocus)&&n.props.onFocus(e)},n.onBlur=function(e){var t=n.props.beforeMaskedValueChange,r=n.maskOptions.mask;if(n.stopSaveSelectionLoop(),n.focused=!1,r&&!n.props.alwaysShowMask&&v(n.maskOptions,n.value)){var i="";_(t)&&(i=t({value:i,selection:null},{value:n.value,selection:n.previousSelection},null,n.getBeforeMaskedValueChangeConfig()).value);var a=i!==n.getInputValue();a&&n.setInputValue(i),a&&_(n.props.onChange)&&n.props.onChange(e)}_(n.props.onBlur)&&n.props.onBlur(e)},n.onMouseDown=function(e){if(!n.focused&&document.addEventListener){n.mouseDownX=e.clientX,n.mouseDownY=e.clientY,n.mouseDownTime=(new Date).getTime();document.addEventListener("mouseup",(function e(t){if(document.removeEventListener("mouseup",e),n.focused){var r=Math.abs(t.clientX-n.mouseDownX),i=Math.abs(t.clientY-n.mouseDownY),a=Math.max(r,i),o=(new Date).getTime()-n.mouseDownTime;(a<=10&&o<=200||a<=5&&o<=300)&&n.setCursorToEnd()}}))}_(n.props.onMouseDown)&&n.props.onMouseDown(e)},n.onPaste=function(e){_(n.props.onPaste)&&n.props.onPaste(e),e.defaultPrevented||(n.beforePasteState={value:n.getInputValue(),selection:n.getSelection()},n.setInputValue(""))},n.handleRef=function(e){null==n.props.children&&_(n.props.inputRef)&&n.props.inputRef(e)};var r=t.mask,i=t.maskChar,o=t.formatChars,s=t.alwaysShowMask,c=t.beforeMaskedValueChange,f=t.defaultValue,d=t.value;n.maskOptions=h(r,i,o),null==f&&(f=""),null==d&&(d=f);var p=w(d);if(n.maskOptions.mask&&(s||p)&&(p=y(n.maskOptions,p),_(c))){var g=t.value;null==t.value&&(g=f),p=c({value:p,selection:null},{value:g=w(g),selection:null},null,n.getBeforeMaskedValueChangeConfig()).value}return n.value=p,n}s(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=function(){var e=new RegExp("windows","i"),t=new RegExp("phone","i"),n=navigator.userAgent;return e.test(n)&&t.test(n)}(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},n.componentDidUpdate=function(){var e=this.previousSelection,t=this.props,n=t.beforeMaskedValueChange,r=t.alwaysShowMask,i=t.mask,a=t.maskChar,o=t.formatChars,s=this.maskOptions,u=r||this.isFocused(),c=null!=this.props.value,l=c?w(this.props.value):this.value,f=e?e.start:null;if(this.maskOptions=h(i,a,o),this.maskOptions.mask){!s.mask&&this.isFocused()&&this.runSaveSelectionLoop();var d=this.maskOptions.mask&&this.maskOptions.mask!==s.mask;if(s.mask||c||(l=this.getInputValue()),(d||this.maskOptions.mask&&(l||u))&&(l=y(this.maskOptions,l)),d){var p=m(this.maskOptions,l);(null===f||p<f)&&(f=g(this.maskOptions,l)?p:b(this.maskOptions,p))}!this.maskOptions.mask||!v(this.maskOptions,l)||u||c&&this.props.value||(l="");var k={start:f,end:f};if(_(n)){var x=n({value:l,selection:k},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());l=x.value,k=x.selection}this.value=l;var S=this.getInputValue()!==this.value;S?(this.setInputValue(this.value),this.forceUpdate()):d&&this.forceUpdate();var E=!1;null!=k.start&&null!=k.end&&(E=!e||e.start!==k.start||e.end!==k.end),(E||S)&&this.setSelection(k.start,k.end)}else s.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},n.componentWillUnmount=function(){this.mounted=!1,null!==this.selectionDeferId&&C(this.selectionDeferId),this.stopSaveSelectionLoop()},n.render=function(){var e,t=this.props,n=(t.mask,t.alwaysShowMask,t.maskChar,t.formatChars,t.inputRef,t.beforeMaskedValueChange,t.children),r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(t,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(n){_(n)||c(!1);var a=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],s=o({},r);a.forEach((function(e){return delete s[e]})),e=n(s),a.filter((function(t){return null!=e.props[t]&&e.props[t]!==r[t]})).length&&c(!1)}else e=i.createElement("input",o({ref:this.handleRef},r));var u={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(r.disabled||r.readOnly||(u.onChange=this.onChange,u.onPaste=this.onPaste,u.onMouseDown=this.onMouseDown),null!=r.value&&(u.value=this.value)),e=i.cloneElement(e,u)},t}(i.Component);e.exports=I},372:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case u:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},441:function(e,t,n){"use strict";n(372)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=k.prototype=new y;b.constructor=k,v(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+T(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),L(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+T(s=e[c],c);u+=L(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=L(s=s.value,t,i,l=a+T(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return L(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},A={transition:null},j={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:A,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,A(x);else{var t=r(l);null!==t&&j(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,y(C),C=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!L());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&j(w,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,E=null,C=-1,I=5,T=-1;function L(){return!(t.unstable_now()-T<I)}function N(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?_():(S=!1,E=null)}}else S=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=N,_=function(){O.postMessage(null)}}else _=function(){g(N,0)};function A(e){E=e,S||(S=!0,_())}function j(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,A(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(y(C),C=-1):m=!0,j(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,A(x))),e},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,s=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=s(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return u((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".c94e6dc2.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="polar-pelmeni-frontend:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkpolar_pelmeni_frontend=self.webpackChunkpolar_pelmeni_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Bo},SDK_VERSION:function(){return Js},_DEFAULT_ENTRY_NAME:function(){return Ms},_addComponent:function(){return Vs},_addOrOverwriteComponent:function(){return Bs},_apps:function(){return Fs},_clearComponents:function(){return Hs},_components:function(){return Us},_getProvider:function(){return qs},_registerComponent:function(){return zs},_removeServiceInstance:function(){return Ws},deleteApp:function(){return Xs},getApp:function(){return Ys},getApps:function(){return $s},initializeApp:function(){return Zs},onLog:function(){return nu},registerVersion:function(){return tu},setLogLevel:function(){return ru}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||u(e,t)||c()}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return s(e)}(e)||f(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=w();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,n)}}function S(e,t,n){return S=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},S.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return S(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},E(e)}function C(e){return o(e)||f(e)||u(e)||c()}function I(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var L,N="popstate";function P(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function O(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function A(e,t){return{usr:e.state,key:e.key,idx:t}}function j(e,t,n,r){return void 0===n&&(n=null),T({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function D(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function M(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function R(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=t.Pop;var e=p(),n=null==e?null:e-d;d=e,h&&h({action:f,location:g.location,delta:n})}function m(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:D(e);return P(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(T({},l.state,{idx:d}),""));var g={get action(){return f},get location(){return e(s,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(N,v),h=e,function(){s.removeEventListener(N,v),h=null}},createHref:function(e){return n(s,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=j(g.location,e,n);r&&r(i,e);var a=A(i,d=p()+1),o=g.createHref(i);try{l.pushState(a,"",o)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(o)}c&&h&&h({action:f,location:g.location,delta:1})},replace:function(e,n){f=t.Replace;var i=j(g.location,e,n);r&&r(i,e);var a=A(i,d=p()),o=g.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:g.location,delta:0})},go:function(e){return l.go(e)}};return g}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(L||(L={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n){void 0===n&&(n="/");var r=$(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;var i=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=J(i[o],Y(r));return a}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(P(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ne([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(P(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),U(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:Q(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=I(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n=C(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=V(i.join("/")),u=[];return u.push.apply(u,h(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&u.push.apply(u,h(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var B=/^:\w+$/,z=3,q=2,W=1,H=10,G=-2,K=function(e){return"*"===e};function Q(e,t){var n=e.split("/"),r=n.length;return n.some(K)&&(r+=G),t&&(r+=q),n.filter((function(e){return!K(e)})).reduce((function(e,t){return e+(B.test(t)?z:""===t?W:H)}),r)}function J(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Z({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:ne([i,l.pathname]),pathnameBase:re(ne([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ne([i,l.pathnameBase]))}return a}function Z(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);O("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return O(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function Y(e){try{return decodeURI(e)}catch(t){return O(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function $(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function X(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ee(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function te(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=M(e):(P(!(i=T({},e)).pathname||!i.pathname.includes("?"),X("?","pathname","search",i)),P(!i.pathname||!i.pathname.includes("#"),X("#","pathname","hash",i)),P(!i.search||!i.search.includes("#"),X("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?M(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ie(a),hash:ae(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ne=function(e){return e.join("/").replace(/\/\/+/g,"/")},re=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ae=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},oe=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(E(Error));function se(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ue=["post","put","patch","delete"],ce=(new Set(ue),["get"].concat(ue));new Set(ce),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var fe=r.createContext(null);var he=r.createContext(null);var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext(null);var me=r.createContext({outlet:null,matches:[],isDataRoute:!1});var ge=r.createContext(null);function ye(){return null!=r.useContext(ve)}function ke(){return ye()||P(!1),r.useContext(ve).location}function be(e){r.useContext(pe).static||r.useLayoutEffect(e)}function we(){return r.useContext(me).isDataRoute?function(){var e=Oe(Ce.UseNavigateStable).router,t=je(Ie.UseNavigateStable),n=r.useRef(!1);be((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,le({fromRouteId:t},i)))}),[e,t]);return i}():function(){ye()||P(!1);var e=r.useContext(fe),t=r.useContext(pe),n=t.basename,i=t.navigator,a=r.useContext(me).matches,o=ke().pathname,s=JSON.stringify(ee(a).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);be((function(){u.current=!0}));var c=r.useCallback((function(t,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof t){var a=te(t,JSON.parse(s),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:ne([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,s,o,e]);return c}()}function xe(){var e=r.useContext(me).matches,t=e[e.length-1];return t?t.params:{}}function _e(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(me).matches,a=ke().pathname,o=JSON.stringify(ee(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return te(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function Se(e,n,i){ye()||P(!1);var a,o=r.useContext(pe).navigator,s=r.useContext(me).matches,u=s[s.length-1],c=u?u.params:{},l=(u&&u.pathname,u?u.pathnameBase:"/"),f=(u&&u.route,ke());if(n){var h,d="string"===typeof n?M(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||P(!1),a=d}else a=f;var p=a.pathname||"/",v=F(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=Pe(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ne([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ne([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,i);return n&&m?r.createElement(ve.Provider,{value:{location:le({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},m):m}function Ee(){var e=function(){var e,t=r.useContext(ge),n=Ae(Ie.UseRouteError),i=je(Ie.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=se(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Ce,Ie,Te=r.createElement(Ee,null),Le=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return g(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(me.Provider,{value:this.props.routeContext},r.createElement(ge.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Ne(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(fe);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(me.Provider,{value:t},i)}function Pe(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,s=null==(i=n)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||P(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(e,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Te);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=u?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ne,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Le,{location:n.location,revalidation:n.revalidation,component:c,error:u,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function Oe(e){var t=r.useContext(fe);return t||P(!1),t}function Ae(e){var t=r.useContext(he);return t||P(!1),t}function je(e){var t=function(e){var t=r.useContext(me);return t||P(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||P(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Ce||(Ce={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Ie||(Ie={}));var De;function Me(e){P(!1)}function Re(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,f=e.static,h=void 0!==f&&f;ye()&&P(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof s&&(s=M(s));var v=s,m=v.pathname,g=void 0===m?"/":m,y=v.search,k=void 0===y?"":y,b=v.hash,w=void 0===b?"":b,x=v.state,_=void 0===x?null:x,S=v.key,E=void 0===S?"default":S,C=r.useMemo((function(){var e=$(g,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:_,key:E},navigationType:c}}),[d,g,k,w,_,E,c]);return null==C?null:r.createElement(pe.Provider,{value:p},r.createElement(ve.Provider,{children:o,value:C}))}function Fe(e){var t=e.children,n=e.location;return Se(Ve(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(De||(De={}));var Ue=new Promise((function(){}));r.Component;function Ve(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(h(t),[i]);if(e.type!==r.Fragment){e.type!==Me&&P(!1),e.props.index&&e.props.children&&P(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,a)),n.push(o)}else n.push.apply(n,Ve(e.props.children,a))}})),n}var Be=n(248),ze=n(327),qe=n(164);var We=function(e){e()},He=function(){return We},Ge=(0,r.createContext)(null);function Ke(){return(0,r.useContext)(Ge)}var Qe=function(){throw new Error("uSES not initialized!")},Je=function(e,t){return e===t};function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=e===Ge?Ke:function(){return(0,r.useContext)(e)};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;var i=t(),a=i.store,o=i.subscription,s=i.getServerState,u=Qe(o.addNestedSub,a.getState,s||a.getState,e,n);return(0,r.useDebugValue)(u),u}}var Ye=Ze();n(110),n(441);var $e={notify:function(){},get:function(){return[]}};function Xe(e,t){var n,r=$e;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=He(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=$e)},getListeners:function(){return r}};return o}var et=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?r.useLayoutEffect:r.useEffect;var tt=function(e){var t=e.store,n=e.context,i=e.children,a=e.serverState,o=(0,r.useMemo)((function(){var e=Xe(t);return{store:t,subscription:e,getServerState:a?function(){return a}:void 0}}),[t,a]),s=(0,r.useMemo)((function(){return t.getState()}),[t]);et((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,s]);var u=n||Ge;return r.createElement(u.Provider,{value:o},i)};function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=e===Ge?Ke:function(){return(0,r.useContext)(e)};return function(){return t().store}}var rt=nt();function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=e===Ge?rt:nt(e);return function(){return t().dispatch}}var at,ot=it();!function(e){Qe=e}(ze.useSyncExternalStoreWithSelector),function(e){e}(Be.useSyncExternalStore),at=qe.unstable_batchedUpdates,We=at;var st=n(184),ut=function(e){var t=e.children;return(0,st.jsx)("div",{className:"container",children:t})},ct=function(e){var t=e.children;return(0,st.jsx)("div",{className:"grid_layout",children:t})},lt=n(694),ft=n.n(lt);function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ht.apply(this,arguments)}function dt(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var pt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var vt="startTransition";function mt(e){var t,n=e.basename,a=e.children,o=e.window,s=r.useRef();null==s.current&&(s.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),R((function(e,t){var n=e.location;return j("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:D(t)}),null,t)));var u=s.current,c=l(r.useState({action:u.action,location:u.location}),2),f=c[0],h=c[1],d=r.useCallback((function(e){vt in i?i[vt]((function(){return h(e)})):h(e)}),[h]);return r.useLayoutEffect((function(){return u.listen(d)}),[u,d]),r.createElement(Re,{basename:n,children:a,location:f.location,navigationType:f.action,navigator:u})}var gt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,yt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kt=r.forwardRef((function(e,t){var n,i=e.onClick,a=e.relative,o=e.reloadDocument,s=e.replace,u=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=dt(e,pt),d=r.useContext(pe).basename,p=!1;if("string"===typeof l&&yt.test(l)&&(n=l,gt))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),g=$(m.pathname,d);m.origin===v.origin&&null!=g?l=g+m.search+m.hash:p=!0}catch(b){}var y=function(e,t){var n=(void 0===t?{}:t).relative;ye()||P(!1);var i=r.useContext(pe),a=i.basename,o=i.navigator,s=_e(e,{relative:n}),u=s.hash,c=s.pathname,l=s.search,f=c;return"/"!==a&&(f="/"===c?a:ne([a,c])),o.createHref({pathname:f,search:l,hash:u})}(l,{relative:a}),k=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,s=n.preventScrollReset,u=n.relative,c=we(),l=ke(),f=_e(e,{relative:u});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:D(l)===D(f);c(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,f,a,o,i,e,s,u])}(l,{replace:s,state:u,target:c,preventScrollReset:f,relative:a});return r.createElement("a",ht({},h,{href:n||y,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:t,target:c}))}));var bt,wt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(bt||(bt={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(wt||(wt={}));var xt=n.p+"static/media/arrow-left.5e864e3fbecea962ed39880526d5b9c8.svg",_t=function(e){var t=e.children,n=e.index,r=e.pathlink,i=e.handleSidebar,a=["info","favourite","addresses","history","bonuses","signout"];return(0,st.jsxs)("li",{className:"profile_sidebar--nav__item sidebar-mobile__item--mobile",children:[(0,st.jsx)(kt,{to:"/profile/".concat(a[n]),onClick:i,className:ft()("profile_sidebar--nav__link sidebar-mobile__link",{sign_out:"\u0412\u0438\u0445\u0456\u0434"===t},{active:r===a[n]}),children:t}),(0,st.jsx)("img",{className:"sidebar-mobile__item--arrow",src:xt,alt:"left"})]})},St=function(e){var t=e.pathlink;return(0,st.jsxs)("aside",{className:"grid_layout--side profile_sidebar",children:[(0,st.jsx)("h3",{className:"profile_sidebar--header",children:"\u041e\u0441\u043e\u0431\u0438\u0441\u0442\u0438\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442"}),(0,st.jsx)("ul",{className:"profile_sidebar--nav",children:["\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f","\u0423\u043b\u044e\u0431\u043b\u0435\u043d\u0456 \u0431\u043b\u044e\u0434\u0430","\u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0456 \u0430\u0434\u0440\u0435\u0441\u0438","\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c","\u0411\u043e\u043d\u0443\u0441\u0438","\u0412\u0438\u0445\u0456\u0434"].map((function(e,n){return(0,st.jsx)(_t,{pathlink:t,index:n,children:e},n)}))})]})};function Et(){Et=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(L){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),s=new C(i||[]);return r(o,"_invoke",{value:x(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=c;var f={};function h(){}function d(){}function v(){}var m={};u(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,a)&&(m=y);var k=v.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Ct(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function It(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ct(a,r,i,o,s,"next",e)}function s(e){Ct(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Tt(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pt=n.p+"static/media/Vector.46709a669661462dfb9a0e45d6d89617.svg",Ot=function(e){var t=e.children,n=e.handleSidebar;return(0,st.jsxs)("div",{className:"profile_link--mobile",children:[(0,st.jsx)("h3",{className:"profile_sidebar--header profile_link--mobile--title",children:t}),(0,st.jsx)(kt,{to:"/profile/",className:"profile_link--mobile--button",onClick:n,children:(0,st.jsx)("img",{src:Pt,alt:"cross"})})]})};function At(e,t){return function(){return e.apply(t,arguments)}}var jt,Dt=Object.prototype.toString,Mt=Object.getPrototypeOf,Rt=(jt=Object.create(null),function(e){var t=Dt.call(e);return jt[t]||(jt[t]=t.slice(8,-1).toLowerCase())}),Ft=function(e){return e=e.toLowerCase(),function(t){return Rt(t)===e}},Ut=function(e){return function(t){return typeof t===e}},Vt=Array.isArray,Bt=Ut("undefined");var zt=Ft("ArrayBuffer");var qt=Ut("string"),Wt=Ut("function"),Ht=Ut("number"),Gt=function(e){return null!==e&&"object"===typeof e},Kt=function(e){if("object"!==Rt(e))return!1;var t=Mt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Qt=Ft("Date"),Jt=Ft("File"),Zt=Ft("Blob"),Yt=Ft("FileList"),$t=Ft("URLSearchParams");function Xt(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Vt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,s=a?Object.getOwnPropertyNames(e):Object.keys(e),u=s.length;for(n=0;n<u;n++)o=s[n],t.call(null,e[o],o,e)}}function en(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var tn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,nn=function(e){return!Bt(e)&&e!==tn};var rn,an=(rn="undefined"!==typeof Uint8Array&&Mt(Uint8Array),function(e){return rn&&e instanceof rn}),on=Ft("HTMLFormElement"),sn=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),un=Ft("RegExp"),cn=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};Xt(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},ln="abcdefghijklmnopqrstuvwxyz",fn="0123456789",hn={DIGIT:fn,ALPHA:ln,ALPHA_DIGIT:ln+ln.toUpperCase()+fn};var dn=Ft("AsyncFunction"),pn={isArray:Vt,isArrayBuffer:zt,isBuffer:function(e){return null!==e&&!Bt(e)&&null!==e.constructor&&!Bt(e.constructor)&&Wt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||Wt(e.append)&&("formdata"===(t=Rt(e))||"object"===t&&Wt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&zt(e.buffer)},isString:qt,isNumber:Ht,isBoolean:function(e){return!0===e||!1===e},isObject:Gt,isPlainObject:Kt,isUndefined:Bt,isDate:Qt,isFile:Jt,isBlob:Zt,isRegExp:un,isFunction:Wt,isStream:function(e){return Gt(e)&&Wt(e.pipe)},isURLSearchParams:$t,isTypedArray:an,isFileList:Yt,forEach:Xt,merge:function e(){for(var t=(nn(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&en(n,i)||i;Kt(n[a])&&Kt(r)?n[a]=e(n[a],r):Kt(r)?n[a]=e({},r):Vt(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&Xt(arguments[i],r);return n},extend:function(e,t,n){return Xt(t,(function(t,r){n&&Wt(t)?e[r]=At(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&Mt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Rt,kindOfTest:Ft,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(Vt(e))return e;var t=e.length;if(!Ht(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:on,hasOwnProperty:sn,hasOwnProp:sn,reduceDescriptors:cn,freezeMethods:function(e){cn(e,(function(t,n){if(Wt(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];Wt(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return Vt(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:en,global:tn,isContextDefined:nn,ALPHABET:hn,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Wt(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(Gt(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=Vt(n)?[]:{};return Xt(n,(function(t,n){var a=e(t,r+1);!Bt(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:dn,isThenable:function(e){return e&&(Gt(e)||Wt(e))&&Wt(e.then)&&Wt(e.catch)}};function vn(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}pn.inherits(vn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pn.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var mn=vn.prototype,gn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){gn[e]={value:e}})),Object.defineProperties(vn,gn),Object.defineProperty(mn,"isAxiosError",{value:!0}),vn.from=function(e,t,n,r,i,a){var o=Object.create(mn);return pn.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),vn.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var yn=vn;function kn(e){return pn.isPlainObject(e)||pn.isArray(e)}function bn(e){return pn.endsWith(e,"[]")?e.slice(0,-2):e}function wn(e,t,n){return e?e.concat(t).map((function(e,t){return e=bn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var xn=pn.toFlatObject(pn,{},null,(function(e){return/^is[A-Z]/.test(e)}));var _n=function(e,t,n){if(!pn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=pn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!pn.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&pn.isSpecCompliantForm(t);if(!pn.isFunction(i))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(pn.isDate(e))return e.toISOString();if(!s&&pn.isBlob(e))throw new yn("Blob is not supported. Use a Buffer instead.");return pn.isArrayBuffer(e)||pn.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){var s=e;if(e&&!i&&"object"===typeof e)if(pn.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(pn.isArray(e)&&function(e){return pn.isArray(e)&&!e.some(kn)}(e)||(pn.isFileList(e)||pn.endsWith(n,"[]"))&&(s=pn.toArray(e)))return n=bn(n),s.forEach((function(e,r){!pn.isUndefined(e)&&null!==e&&t.append(!0===o?wn([n],r,a):null===o?n:n+"[]",u(e))})),!1;return!!kn(e)||(t.append(wn(i,n,a),u(e)),!1)}var l=[],f=Object.assign(xn,{defaultVisitor:c,convertValue:u,isVisitable:kn});if(!pn.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!pn.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),pn.forEach(n,(function(n,a){!0===(!(pn.isUndefined(n)||null===n)&&i.call(t,n,pn.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function Sn(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function En(e,t){this._pairs=[],e&&_n(e,this,t)}var Cn=En.prototype;Cn.append=function(e,t){this._pairs.push([e,t])},Cn.toString=function(e){var t=e?function(t){return e.call(this,t,Sn)}:Sn;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var In=En;function Tn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ln(e,t,n){if(!t)return e;var r,i=n&&n.encode||Tn,a=n&&n.serialize;if(r=a?a(t,n):pn.isURLSearchParams(t)?t.toString():new In(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Nn=function(){function e(){d(this,e),this.handlers=[]}return g(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){pn.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),Pn=Nn,On={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},An={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:In,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var jn=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),s=i>=e.length;return a=!a&&pn.isArray(r)?r.length:a,s?(pn.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&pn.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&pn.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(pn.isFormData(e)&&pn.isFunction(e.entries)){var n={};return pn.forEachEntry(e,(function(e,r){t(function(e){return pn.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},Dn={"Content-Type":void 0};var Mn={transitional:On,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=pn.isObject(e);if(a&&pn.isHTMLForm(e)&&(e=new FormData(e)),pn.isFormData(e))return i&&i?JSON.stringify(jn(e)):e;if(pn.isArrayBuffer(e)||pn.isBuffer(e)||pn.isStream(e)||pn.isFile(e)||pn.isBlob(e))return e;if(pn.isArrayBufferView(e))return e.buffer;if(pn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return _n(e,new An.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return An.isNode&&pn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=pn.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return _n(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(pn.isString(e))try{return(t||JSON.parse)(e),pn.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Mn.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&pn.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw yn.from(a,yn.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:An.classes.FormData,Blob:An.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};pn.forEach(["delete","get","head"],(function(e){Mn.headers[e]={}})),pn.forEach(["post","put","patch"],(function(e){Mn.headers[e]=pn.merge(Dn)}));var Rn=Mn,Fn=pn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Un=Symbol("internals");function Vn(e){return e&&String(e).trim().toLowerCase()}function Bn(e){return!1===e||null==e?e:pn.isArray(e)?e.map(Bn):String(e)}function zn(e,t,n,r,i){return pn.isFunction(r)?r.call(this,t,n):(i&&(t=n),pn.isString(t)?pn.isString(r)?-1!==t.indexOf(r):pn.isRegExp(r)?r.test(t):void 0:void 0)}var qn=function(e,t){function n(e){d(this,n),e&&this.set(e)}return g(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=Vn(t);if(!i)throw new Error("header name must be a non-empty string");var a=pn.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Bn(e))}var a=function(e,t){return pn.forEach(e,(function(e,n){return i(e,n,t)}))};return pn.isPlainObject(e)||e instanceof this.constructor?a(e,t):pn.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&Fn[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=Vn(e)){var n=pn.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(pn.isFunction(t))return t.call(this,r,n);if(pn.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Vn(e)){var n=pn.findKey(this,e);return!(!n||void 0===this[n]||t&&!zn(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=Vn(e)){var i=pn.findKey(n,e);!i||t&&!zn(0,n[i],i,t)||(delete n[i],r=!0)}}return pn.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!zn(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return pn.forEach(this,(function(r,i){var a=pn.findKey(n,i);if(a)return t[a]=Bn(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Bn(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return pn.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&pn.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=l(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[Un]=this[Un]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=Vn(e);t[r]||(!function(e,t){var n=pn.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return pn.isArray(e)?e.forEach(r):r(e),this}}]),n}();qn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),pn.freezeMethods(qn.prototype),pn.freezeMethods(qn);var Wn=qn;function Hn(e,t){var n=this||Rn,r=t||n,i=Wn.from(r.headers),a=r.data;return pn.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Gn(e){return!(!e||!e.__CANCEL__)}function Kn(e,t,n){yn.call(this,null==e?"canceled":e,yn.ERR_CANCELED,t,n),this.name="CanceledError"}pn.inherits(Kn,yn,{__CANCEL__:!0});var Qn=Kn;var Jn=An.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),pn.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),pn.isString(r)&&o.push("path="+r),pn.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Zn(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Yn=An.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=pn.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var $n=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),c=i[o];n||(n=u),r[a]=s,i[a]=u;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(u-n<t)){var h=c&&u-c;return h?Math.round(1e3*f/h):void 0}}};function Xn(e,t){var n=0,r=$n(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,u=r(s);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&a<=o?(o-a)/u:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var er="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=Wn.from(e.headers).normalize(),o=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}pn.isFormData(i)&&(An.isStandardBrowserEnv||An.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));var u=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=Zn(e.baseURL,e.url);function h(){if(u){var r=Wn.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new yn("Request failed with status code "+n.status,[yn.ERR_BAD_REQUEST,yn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}}if(u.open(e.method.toUpperCase(),Ln(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(h)},u.onabort=function(){u&&(n(new yn("Request aborted",yn.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new yn("Network Error",yn.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||On;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new yn(t,r.clarifyTimeoutError?yn.ETIMEDOUT:yn.ECONNABORTED,e,u)),u=null},An.isStandardBrowserEnv){var d=(e.withCredentials||Yn(f))&&e.xsrfCookieName&&Jn.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in u&&pn.forEach(a.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),pn.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&"json"!==o&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",Xn(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",Xn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){u&&(n(!t||t.type?new Qn(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===An.protocols.indexOf(p)?n(new yn("Unsupported protocol "+p+":",yn.ERR_BAD_REQUEST,e)):u.send(i||null)}))},tr={http:null,xhr:er};pn.forEach(tr,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var nr=function(e){for(var t,n,r=(e=pn.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=pn.isString(t)?tr[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new yn("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(pn.hasOwnProp(tr,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!pn.isFunction(n))throw new TypeError("adapter is not a function");return n};function rr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qn(null,e)}function ir(e){return rr(e),e.headers=Wn.from(e.headers),e.data=Hn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),nr(e.adapter||Rn.adapter)(e).then((function(t){return rr(e),t.data=Hn.call(e,e.transformResponse,t),t.headers=Wn.from(t.headers),t}),(function(t){return Gn(t)||(rr(e),t&&t.response&&(t.response.data=Hn.call(e,e.transformResponse,t.response),t.response.headers=Wn.from(t.response.headers))),Promise.reject(t)}))}var ar=function(e){return e instanceof Wn?e.toJSON():e};function or(e,t){t=t||{};var n={};function r(e,t,n){return pn.isPlainObject(e)&&pn.isPlainObject(t)?pn.merge.call({caseless:n},e,t):pn.isPlainObject(t)?pn.merge({},t):pn.isArray(t)?t.slice():t}function i(e,t,n){return pn.isUndefined(t)?pn.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!pn.isUndefined(t))return r(void 0,t)}function o(e,t){return pn.isUndefined(t)?pn.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:function(e,t){return i(ar(e),ar(t),!0)}};return pn.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=u[r]||i,o=a(e[r],t[r],r);pn.isUndefined(o)&&a!==s||(n[r]=o)})),n}var sr="1.4.0",ur={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){ur[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var cr={};ur.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new yn(r(i," has been removed"+(t?" in "+t:"")),yn.ERR_DEPRECATED);return t&&!cr[i]&&(cr[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var lr={assertOptions:function(e,t,n){if("object"!==typeof e)throw new yn("options must be an object",yn.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var s=e[a],u=void 0===s||o(s,a,e);if(!0!==u)throw new yn("option "+a+" must be "+u,yn.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new yn("Unknown option "+a,yn.ERR_BAD_OPTION)}},validators:ur},fr=lr.validators,hr=function(){function e(t){d(this,e),this.defaults=t,this.interceptors={request:new Pn,response:new Pn}}return g(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=or(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&lr.assertOptions(i,{silentJSONParsing:fr.transitional(fr.boolean),forcedJSONParsing:fr.transitional(fr.boolean),clarifyTimeoutError:fr.transitional(fr.boolean)},!1),null!=a&&(pn.isFunction(a)?t.paramsSerializer={serialize:a}:lr.assertOptions(a,{encode:fr.function,serialize:fr.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&pn.merge(o.common,o[t.method]))&&pn.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=Wn.concat(n,o);var s=[],u=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,h=0;if(!u){var d=[ir.bind(this),void 0];for(d.unshift.apply(d,s),d.push.apply(d,l),f=d.length,c=Promise.resolve(t);h<f;)c=c.then(d[h++],d[h++]);return c}f=s.length;var p=t;for(h=0;h<f;){var v=s[h++],m=s[h++];try{p=v(p)}catch(g){m.call(this,g);break}}try{c=ir.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,f=l.length;h<f;)c=c.then(l[h++],l[h++]);return c}},{key:"getUri",value:function(e){return Ln(Zn((e=or(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();pn.forEach(["delete","get","head","options"],(function(e){hr.prototype[e]=function(t,n){return this.request(or(n||{},{method:e,url:t,data:(n||{}).data}))}})),pn.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(or(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}hr.prototype[e]=t(),hr.prototype[e+"Form"]=t(!0)}));var dr=hr,pr=function(){function e(t){if(d(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new Qn(e,t,i),n(r.reason))}))}return g(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),vr=pr;var mr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mr).forEach((function(e){var t=l(e,2),n=t[0],r=t[1];mr[r]=n}));var gr=mr;var yr=function e(t){var n=new dr(t),r=At(dr.prototype.request,n);return pn.extend(r,dr.prototype,n,{allOwnKeys:!0}),pn.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(or(t,n))},r}(Rn);yr.Axios=dr,yr.CanceledError=Qn,yr.CancelToken=vr,yr.isCancel=Gn,yr.VERSION=sr,yr.toFormData=_n,yr.AxiosError=yn,yr.Cancel=yr.CanceledError,yr.all=function(e){return Promise.all(e)},yr.spread=function(e){return function(t){return e.apply(null,t)}},yr.isAxiosError=function(e){return pn.isObject(e)&&!0===e.isAxiosError},yr.mergeConfig=or,yr.AxiosHeaders=Wn,yr.formToJSON=function(e){return jn(pn.isHTMLForm(e)?new FormData(e):e)},yr.HttpStatusCode=gr,yr.default=yr;var kr=yr,br=function(e){var t=e.handleSidebar,n=e.isSidebarClosed,i=l((0,r.useState)({name:"",email:"",birth_date:"",city:""}),2),a=i[0],o=i[1],s=Ye((function(e){return e.user}));console.log(localStorage);var u=function(e){o(Nt(Nt({},a),{},Tt({},e.target.name,e.target.value)))},c=function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,kr.put("https://polarpelmeni-api.work-set.eu/api/upload/",a);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();if(console.log(n),!n)return(0,st.jsxs)("section",{className:"grid_layout--main profile_info",children:[(0,st.jsxs)("div",{className:"profile_info--head",children:[(0,st.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/552/552721.png",alt:"profile",className:"mobile-menu__avatar",width:70}),(0,st.jsxs)("div",{className:"profile_info--head__contacts contacts",children:[(0,st.jsxs)("div",{className:"contacts_name",children:[s.name," "]}),(0,st.jsx)("div",{className:"contacts_phone",children:s.phone})]}),(0,st.jsx)("div",{className:"profile_info--head__button button",children:(0,st.jsx)("a",{href:"#",className:"button_link",children:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438 \u043d\u043e\u043c\u0435\u0440"})}),(0,st.jsx)("div",{className:"profile_info--head__button button",children:(0,st.jsx)("a",{href:"#",className:"button_link",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u043e\u0442\u043e"})})]}),(0,st.jsx)(Ot,{handleSidebar:t,children:"\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f"}),(0,st.jsxs)("div",{className:"profile_info--head__mobile",children:[(0,st.jsx)("img",{src:"https://via.placeholder.com/70x70",alt:"profile",className:"profile_info--head__photo"}),(0,st.jsxs)("div",{className:"contacts",children:[(0,st.jsx)("div",{className:"contacts_name",children:s.name}),(0,st.jsxs)("div",{className:"contacts_phone",children:[s.phone," ",(0,st.jsx)("a",{href:"#",className:"button_link",disabled:!0,children:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438"})]}),(0,st.jsx)("div",{className:"",children:(0,st.jsx)("a",{href:"#",className:"button_link",disabled:!0,children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u043e\u0442\u043e"})})]})]}),(0,st.jsx)("div",{className:"profile_info--bonuses__mobile"}),(0,st.jsx)("div",{className:"profile_info--form",children:(0,st.jsxs)("form",{onSubmit:c,children:[(0,st.jsxs)("div",{className:"form",children:[(0,st.jsxs)("div",{className:"form_item",children:[(0,st.jsx)("p",{children:"\u0406\u043c'\u044f"}),(0,st.jsx)("label",{className:"form_item--label",children:(0,st.jsx)("input",{type:"text",placeholder:"\u0406\u043c'\u044f",name:"name",value:a.name,onChange:u})})]}),(0,st.jsxs)("div",{className:"form_item",children:[(0,st.jsx)("p",{children:"\u041f\u043e\u0448\u0442\u0430"}),(0,st.jsx)("label",{className:"form_item--label",children:(0,st.jsx)("input",{type:"text",placeholder:"xxx@gmail.com",name:"email",value:a.email,onChange:u})})]}),(0,st.jsxs)("div",{className:"form_item",children:[(0,st.jsx)("p",{children:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}),(0,st.jsx)("label",{className:"form_item--label",children:(0,st.jsx)("input",{type:"text",placeholder:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f",name:"birth_date",value:a.birth_date,onChange:u})})]}),(0,st.jsxs)("div",{className:"form_item",children:[(0,st.jsx)("p",{children:"\u041c\u0456\u0441\u0442\u043e"}),(0,st.jsx)("label",{className:"form_item--label",children:(0,st.jsxs)("select",{name:"city",value:a.city,onChange:u,children:[(0,st.jsx)("option",{value:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u0456\u0441\u0442\u043e",disabled:!0,children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u0456\u0441\u0442\u043e"}),(0,st.jsx)("option",{value:"\u041e\u0434\u0435\u0441\u0430",children:"\u041e\u0434\u0435\u0441\u0430"}),(0,st.jsx)("option",{value:"\u0423\u0436\u0433\u043e\u0440\u043e\u0434",children:"\u0423\u0436\u0433\u043e\u0440\u043e\u0434"})]})})]})]}),(0,st.jsx)("div",{className:"form-button",children:(0,st.jsx)("button",{className:"btn-main ",type:"submit",style:{justifyContent:"center"},children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"})})]})})]})},wr=function(e){var t=e.children,n=e.closeModal,r=e.small;return(0,st.jsx)("div",{className:"popup ".concat(r&&"popup-small"),children:(0,st.jsxs)("div",{className:"popup__content ".concat(r&&"popup__content-small"),children:[(0,st.jsx)("button",{className:"popup__close",onClick:n,children:(0,st.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M6.0006 4.82166L10.1256 0.696655L11.3039 1.87499L7.17893 5.99999L11.3039 10.125L10.1256 11.3033L6.0006 7.17832L1.8756 11.3033L0.697266 10.125L4.82227 5.99999L0.697266 1.87499L1.8756 0.696655L6.0006 4.82166Z",fill:"#12130F"})})}),t]})})};n.p;n.p;n.p;var xr=function(e){var t=e.closeConfirmModal;return(0,st.jsx)(wr,{closeModal:t,children:(0,st.jsxs)("div",{className:"modal-content",children:[(0,st.jsx)("h2",{className:"modal-content--title",children:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f?"}),(0,st.jsx)("p",{className:"confirm-text",children:"\u041c\u0438 \u043e\u0447\u0438\u0441\u0442\u0438\u043c\u043e \u043a\u043e\u0448\u0438\u043a \u0456 \u0437\u0430\u043c\u0456\u043d\u0438\u043c\u043e \u043f\u043e\u0442\u043e\u0447\u043d\u0456 \u043f\u043e\u0437\u0438\u0446\u0456\u0457 \u043d\u0430 \u043f\u043e\u0437\u0438\u0446\u0456\u0457 \u0437 \u0446\u044c\u043e\u0433\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,st.jsx)("button",{className:"modal-button confirm",type:"submit",children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]})})},_r=function(e){var t=e.isMainModalOpen,n=e.closeMainModal,r=e.closeConfirmModal,i=e.isConfirmModalOpen,a=e.openConfirmModal;return(0,st.jsxs)(st.Fragment,{children:[t&&(0,st.jsx)(wr,{closeModal:n,children:(0,st.jsxs)("div",{className:"modal-content",children:[(0,st.jsx)("h2",{className:"modal-content--title",children:"\u0414\u0435\u0442\u0430\u043b\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,st.jsxs)("div",{className:"modal-content__info",children:[(0,st.jsxs)("div",{className:"title-line",children:[(0,st.jsx)("h4",{children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u21166648"}),(0,st.jsx)("p",{className:"status",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u0435"})]}),(0,st.jsxs)("div",{className:"content-lines",children:[(0,st.jsxs)("div",{className:"content-line",children:[(0,st.jsx)("h5",{children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,st.jsx)("p",{className:"info",children:"18.03.2023, 18:39"})]}),(0,st.jsxs)("div",{className:"content-line",children:[(0,st.jsx)("h5",{children:"\u0410\u0434\u0440\u0435\u0441\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"}),(0,st.jsx)("p",{className:"info",children:"\u0432\u0443\u043b. \u041c\u0430\u0447\u0442\u043e\u0432\u0430, 10"})]}),(0,st.jsxs)("div",{className:"content-line",children:[(0,st.jsx)("h5",{children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d"}),(0,st.jsx)("p",{className:"info",children:"2"})]}),(0,st.jsxs)("div",{className:"content-line",children:[(0,st.jsx)("h5",{children:"\u0421\u043f\u043e\u0441\u0456\u0431 \u043e\u043f\u043b\u0430\u0442\u0438"}),(0,st.jsx)("p",{className:"info",children:"\u041e\u043d\u043b\u0430\u0439\u043d"})]}),(0,st.jsxs)("div",{className:"content-line__comment",children:[(0,st.jsx)("h5",{children:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0434\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f:"}),(0,st.jsx)("div",{className:"comment",children:(0,st.jsx)("p",{children:"\u041d\u0430\u0442\u0438\u0441\u043d\u0443\u0442\u0438 \u043d\u0430 \u0434\u043e\u043c\u043e\u0444\u043e\u043d\u0456 75\u0415"})})]})]})]}),(0,st.jsx)("div",{className:"modal-content__price",children:(0,st.jsxs)("div",{className:"content-lines",children:[(0,st.jsxs)("div",{className:"content-line",children:[(0,st.jsx)("h5",{children:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f:"}),(0,st.jsx)("h5",{className:"info",children:"870 \u20b4"})]}),(0,st.jsxs)("div",{className:"content-line",children:[(0,st.jsx)("h5",{children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430:"}),(0,st.jsx)("h5",{className:"info",children:"70 \u20b4"})]}),(0,st.jsxs)("div",{className:"title-line bottom",children:[(0,st.jsx)("h4",{children:"\u0412\u0441\u044c\u043e\u0433\u043e \u0434\u043e \u0441\u043f\u043b\u0430\u0442\u0438:"}),(0,st.jsx)("h4",{children:"917 \u20b4"})]})]})}),(0,st.jsx)("button",{className:"modal-button",type:"submit",onClick:a,children:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]})}),i&&(0,st.jsx)(xr,{closeConfirmModal:r})]})},Sr=function(e){var t=e.handleSidebar,n=l((0,r.useState)(!1),2),i=n[0],a=n[1],o=l((0,r.useState)(!1),2),s=o[0],u=o[1];return(0,st.jsx)(st.Fragment,{children:(0,st.jsxs)("section",{className:"grid_layout--main orders",children:[(0,st.jsx)(Ot,{handleSidebar:t,children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c"}),(0,st.jsx)("div",{className:"order",children:(0,st.jsxs)("div",{className:"order-container",children:[(0,st.jsxs)("div",{className:"order-info",children:[(0,st.jsxs)("div",{className:"order-info__number",children:[(0,st.jsx)("h4",{children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u21162323"}),(0,st.jsx)("p",{className:"status",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u0435"})]}),(0,st.jsx)("div",{className:"order-info__datetime",children:"05.01.2023, 12:30"})]}),(0,st.jsxs)("div",{className:"order-details",children:[(0,st.jsx)("h4",{children:"496 \u20b4"}),(0,st.jsx)("button",{onClick:function(){a(!0)},className:"order-details__modal-link",children:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0456\u0448\u0435"})]})]})}),(0,st.jsx)(_r,{isConfirmModalOpen:s,openConfirmModal:function(){u(!0)},closeConfirmModal:function(){u(!1)},closeMainModal:function(){a(!1)},isMainModalOpen:i})]})})},Er=function(e){var t=e.handleSidebar,n=Ye((function(e){return e.user}));return(0,st.jsx)(st.Fragment,{children:(0,st.jsxs)("section",{className:"sidebar-mobile animate",children:[(0,st.jsxs)("div",{className:"profile_info--head__mobile sidebar-mobile__header",children:[(0,st.jsxs)("div",{className:"mobile-inner",children:[(0,st.jsx)("img",{src:"https://via.placeholder.com/70x70",alt:"profile",className:"profile_info--head__photo"}),(0,st.jsxs)("div",{className:"contacts",children:[(0,st.jsx)("div",{className:"contacts_name",children:n.name}),(0,st.jsx)("div",{className:"contacts_phone mobile",children:n.phone}),(0,st.jsx)("div",{className:"contacts_bonuses",children:(0,st.jsx)("p",{children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e 23 \u0431\u043e\u043d\u0443\u0441\u0438"})})]})]}),(0,st.jsx)("div",{className:"mobile-inner",children:(0,st.jsx)(kt,{to:"/",className:"profile_link--mobile--button mobile-inner__cross",onClick:t,children:(0,st.jsx)("img",{src:Pt,alt:"cross"})})})]}),(0,st.jsx)("ul",{className:"sidebar-mobile__list",children:["\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f","\u0423\u043b\u044e\u0431\u043b\u0435\u043d\u0456 \u0431\u043b\u044e\u0434\u0430","\u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0456 \u0430\u0434\u0440\u0435\u0441\u0438","\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c","\u0411\u043e\u043d\u0443\u0441\u0438","\u0412\u0438\u0445\u0456\u0434"].map((function(e,n){return(0,st.jsx)(_t,{index:n,handleSidebar:t,children:e},n)}))}),(0,st.jsx)("div",{className:"sidebar-mobile__footer",children:(0,st.jsxs)("ul",{className:"sidebar-mobile__footer--list",children:[(0,st.jsx)(kt,{to:"/",children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"}),(0,st.jsx)(kt,{to:"/",children:"\u041c\u0435\u043d\u044e"}),(0,st.jsx)(kt,{to:"/about-us",children:"\u041f\u0440\u043e \u043d\u0430\u0441"}),(0,st.jsx)(kt,{to:"/contact",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})]})})]})})},Cr=function(e){var t=e.handleSidebar;return(0,st.jsx)("div",{children:(0,st.jsx)(Ot,{handleSidebar:t,children:"Coming soon"})})};function Ir(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Tr(e){return!!e&&!!e[gi]}function Lr(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===yi}(e)||Array.isArray(e)||!!e[mi]||!!(null===(t=e.constructor)||void 0===t?void 0:t[mi])||Mr(e)||Rr(e))}function Nr(e,t,n){void 0===n&&(n=!1),0===Pr(e)?(n?Object.keys:ki)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Pr(e){var t=e[gi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Mr(e)?2:Rr(e)?3:0}function Or(e,t){return 2===Pr(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ar(e,t){return 2===Pr(e)?e.get(t):e[t]}function jr(e,t,n){var r=Pr(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Dr(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Mr(e){return hi&&e instanceof Map}function Rr(e){return di&&e instanceof Set}function Fr(e){return e.o||e.t}function Ur(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=bi(e);delete t[gi];for(var n=ki(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Vr(e,t){return void 0===t&&(t=!1),zr(e)||Tr(e)||!Lr(e)||(Pr(e)>1&&(e.set=e.add=e.clear=e.delete=Br),Object.freeze(e),t&&Nr(e,(function(e,t){return Vr(t,!0)}),!0)),e}function Br(){Ir(2)}function zr(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function qr(e){var t=wi[e];return t||Ir(18,e),t}function Wr(e,t){wi[e]||(wi[e]=t)}function Hr(){return li}function Gr(e,t){t&&(qr("Patches"),e.u=[],e.s=[],e.v=t)}function Kr(e){Qr(e),e.p.forEach(Zr),e.p=null}function Qr(e){e===li&&(li=e.l)}function Jr(e){return li={p:[],l:li,h:e,m:!0,_:0}}function Zr(e){var t=e[gi];0===t.i||1===t.i?t.j():t.g=!0}function Yr(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||qr("ES5").S(t,e,r),r?(n[gi].P&&(Kr(t),Ir(4)),Lr(e)&&(e=$r(t,e),t.l||ei(t,e)),t.u&&qr("Patches").M(n[gi].t,e,t.u,t.s)):e=$r(t,n,[]),Kr(t),t.u&&t.v(t.u,t.s),e!==vi?e:void 0}function $r(e,t,n){if(zr(t))return t;var r=t[gi];if(!r)return Nr(t,(function(i,a){return Xr(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return ei(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Ur(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),Nr(a,(function(t,a){return Xr(e,r,i,t,a,n,o)})),ei(e,i,!1),n&&e.u&&qr("Patches").N(r,n,e.u,e.s)}return r.o}function Xr(e,t,n,r,i,a,o){if(Tr(i)){var s=$r(e,i,a&&t&&3!==t.i&&!Or(t.R,r)?a.concat(r):void 0);if(jr(n,r,s),!Tr(s))return;e.m=!1}else o&&n.add(i);if(Lr(i)&&!zr(i)){if(!e.h.D&&e._<1)return;$r(e,i),t&&t.A.l||ei(e,i)}}function ei(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&Vr(t,n)}function ti(e,t){var n=e[gi];return(n?Fr(n):e)[t]}function ni(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ri(e){e.P||(e.P=!0,e.l&&ri(e.l))}function ii(e){e.o||(e.o=Ur(e.t))}function ai(e,t,n){var r=Mr(t)?qr("MapSet").F(t,n):Rr(t)?qr("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Hr(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=xi;n&&(i=[r],a=_i);var o=Proxy.revocable(i,a),s=o.revoke,u=o.proxy;return r.k=u,r.j=s,u}(t,n):qr("ES5").J(t,n);return(n?n.A:Hr()).p.push(r),r}function oi(e){return Tr(e)||Ir(22,e),function e(t){if(!Lr(t))return t;var n,r=t[gi],i=Pr(t);if(r){if(!r.P&&(r.i<4||!qr("ES5").K(r)))return r.t;r.I=!0,n=si(t,i),r.I=!1}else n=si(t,i);return Nr(n,(function(t,i){r&&Ar(r.t,t)===i||jr(n,t,e(i))})),3===i?new Set(n):n}(e)}function si(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ur(e)}function ui(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[gi];return xi.get(t,e)},set:function(t){var n=this[gi];xi.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][gi];if(!i.P)switch(i.i){case 5:r(i)&&ri(i);break;case 4:n(i)&&ri(i)}}}function n(e){for(var t=e.t,n=e.k,r=ki(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==gi){var o=t[a];if(void 0===o&&!Or(t,a))return!0;var s=n[a],u=s&&s[gi];if(u?u.t!==o:!Dr(s,o))return!0}}var c=!!t[gi];return r.length!==ki(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Wr("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=bi(n);delete a[gi];for(var o=ki(a),s=0;s<o.length;s++){var u=o[s];a[u]=e(u,t||!!a[u].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:Hr(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,gi,{value:a,writable:!0}),i},S:function(e,n,i){i?Tr(n)&&n[gi].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[gi];if(n){var i=n.t,a=n.k,o=n.R,s=n.i;if(4===s)Nr(a,(function(t){t!==gi&&(void 0!==i[t]||Or(i,t)?o[t]||e(a[t]):(o[t]=!0,ri(n)))})),Nr(i,(function(e){void 0!==a[e]||Or(a,e)||(o[e]=!1,ri(n))}));else if(5===s){if(r(n)&&(ri(n),o.length=!0),a.length<i.length)for(var u=a.length;u<i.length;u++)o[u]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var ci,li,fi="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),hi="undefined"!=typeof Map,di="undefined"!=typeof Set,pi="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,vi=fi?Symbol.for("immer-nothing"):((ci={})["immer-nothing"]=!0,ci),mi=fi?Symbol.for("immer-draftable"):"__$immer_draftable",gi=fi?Symbol.for("immer-state"):"__$immer_state",yi=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ki="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,bi=Object.getOwnPropertyDescriptors||function(e){var t={};return ki(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},wi={},xi={get:function(e,t){if(t===gi)return e;var n=Fr(e);if(!Or(n,t))return function(e,t,n){var r,i=ni(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Lr(r)?r:r===ti(e.t,t)?(ii(e),e.o[t]=ai(e.A.h,r,e)):r},has:function(e,t){return t in Fr(e)},ownKeys:function(e){return Reflect.ownKeys(Fr(e))},set:function(e,t,n){var r=ni(Fr(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ti(Fr(e),t),a=null==i?void 0:i[gi];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Dr(n,i)&&(void 0!==n||Or(e.t,t)))return!0;ii(e),ri(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==ti(e.t,t)||t in e.t?(e.R[t]=!1,ii(e),ri(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Fr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Ir(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ir(12)}},_i={};Nr(xi,(function(e,t){_i[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),_i.deleteProperty=function(e,t){return _i.set.call(this,e,t,void 0)},_i.set=function(e,t,n){return xi.set.call(this,e[0],t,n,e[0])};var Si=function(){function e(e){var t=this;this.O=pi,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&Ir(6),void 0!==r&&"function"!=typeof r&&Ir(7),Lr(e)){var s=Jr(t),u=ai(t,e,void 0),c=!0;try{o=n(u),c=!1}finally{c?Kr(s):Qr(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Gr(s,r),Yr(e,s)}),(function(e){throw Kr(s),e})):(Gr(s,r),Yr(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===vi&&(o=void 0),t.D&&Vr(o,!0),r){var l=[],f=[];qr("Patches").M(e,o,l,f),r(l,f)}return o}Ir(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Lr(e)||Ir(8),Tr(e)&&(e=oi(e));var t=Jr(this),n=ai(this,e,void 0);return n[gi].C=!0,Qr(t),n},t.finishDraft=function(e,t){var n=(e&&e[gi]).A;return Gr(n,t),Yr(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!pi&&Ir(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=qr("Patches").$;return Tr(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ei=new Si,Ci=Ei.produce,Ii=(Ei.produceWithPatches.bind(Ei),Ei.setAutoFreeze.bind(Ei),Ei.setUseProxies.bind(Ei),Ei.applyPatches.bind(Ei),Ei.createDraft.bind(Ei),Ei.finishDraft.bind(Ei),Ci);function Ti(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Li="function"===typeof Symbol&&Symbol.observable||"@@observable",Ni=function(){return Math.random().toString(36).substring(7).split("").join(".")},Pi={INIT:"@@redux/INIT"+Ni(),REPLACE:"@@redux/REPLACE"+Ni(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ni()}};function Oi(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ai(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Ti(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Ti(1));return n(Ai)(e,t)}if("function"!==typeof e)throw new Error(Ti(2));var i=e,a=t,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error(Ti(3));return a}function f(e){if("function"!==typeof e)throw new Error(Ti(4));if(u)throw new Error(Ti(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(Ti(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function h(e){if(!Oi(e))throw new Error(Ti(7));if("undefined"===typeof e.type)throw new Error(Ti(8));if(u)throw new Error(Ti(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Pi.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Ti(10));i=e,h({type:Pi.REPLACE})}})[Li]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Ti(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Li]=function(){return this},e},r}function ji(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Pi.INIT}))throw new Error(Ti(12));if("undefined"===typeof n(void 0,{type:Pi.PROBE_UNKNOWN_ACTION()}))throw new Error(Ti(13))}))}(n)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(Ti(14))}i[u]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Di(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Mi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Ti(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Di.apply(void 0,a)(n.dispatch),Nt(Nt({},n),{},{dispatch:r})}}}function Ri(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Fi=Ri();Fi.withExtraArgument=Ri;var Ui=Fi,Vi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bi=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},zi=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},qi=Object.defineProperty,Wi=Object.defineProperties,Hi=Object.getOwnPropertyDescriptors,Gi=Object.getOwnPropertySymbols,Ki=Object.prototype.hasOwnProperty,Qi=Object.prototype.propertyIsEnumerable,Ji=function(e,t,n){return t in e?qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Zi=function(e,t){for(var n in t||(t={}))Ki.call(t,n)&&Ji(e,n,t[n]);if(Gi)for(var r=0,i=Gi(t);r<i.length;r++){n=i[r];Qi.call(t,n)&&Ji(e,n,t[n])}return e},Yi=function(e,t){return Wi(e,Hi(t))},$i=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{s(n.next(e))}catch(t){i(t)}},o=function(e){try{s(n.throw(e))}catch(t){i(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};s((n=n.apply(e,t)).next())}))},Xi="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Di:Di.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function ea(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var ta=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Vi(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,zi([void 0],e[0].concat(this)))):new(t.bind.apply(t,zi([void 0],e.concat(this))))},t}(Array),na=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Vi(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,zi([void 0],e[0].concat(this)))):new(t.bind.apply(t,zi([void 0],e.concat(this))))},t}(Array);function ra(e){return Lr(e)?Ii(e,(function(){})):e}function ia(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new ta);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Ui.withExtraArgument(n.extraArgument)):r.push(Ui));0;return r}(e)}}function aa(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Zi(Zi({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function oa(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function sa(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:ra(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},s={},u={};function c(){var t="function"===typeof e.extraReducers?oa(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,u=t[2],c=void 0===u?void 0:u,l=Zi(Zi({},i),s);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?oa(t):[t,n,r],o=a[0],s=a[1],u=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return ra(e())};else{var c=ra(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=zi([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[u]),n.reduce((function(e,n){if(n){var r;if(Tr(e))return void 0===(r=n(e,t))?e:r;if(Lr(e))return Ii(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,s[c]=n,u[e]=r?aa(c,r):aa(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:u,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var ua=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ca=["name","message","stack","code"],la=function(e,t){this.payload=e,this.meta=t},fa=function(e,t){this.payload=e,this.meta=t},ha=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=ca;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=aa(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:Yi(Zi({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=aa(e+"/pending",(function(e,t,n){return{payload:void 0,meta:Yi(Zi({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=aa(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||ha)(e||"Rejected"),meta:Yi(Zi({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,u,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):ua(),h=new o;function d(e){l=e,h.abort()}var p=function(){return $i(this,null,(function(){var o,p,v,m,g,y;return Bi(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),m=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:u,extra:c}),null===(b=m)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,m];case 1:m=k.sent(),k.label=2;case 2:if(!1===m||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,g=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),s(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:u,extra:c}))),[4,Promise.race([g,Promise.resolve(t(e,{dispatch:s,getState:u,extra:c,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new la(e,t)},fulfillWithValue:function(e,t){return new fa(e,t)}})).then((function(t){if(t instanceof la)throw t;return t instanceof fa?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=k.sent(),[3,5];case 4:return y=k.sent(),v=y instanceof la?a(null,f,e,y.payload,y.meta):a(y,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||s(v),[2,v]}var b}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(da)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function da(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var pa="listenerMiddleware";aa(pa+"/add"),aa(pa+"/removeAll"),aa(pa+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var va,ma=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:ma(10);ui();var ga=sa({name:"shoppingCart",initialState:{products:[],promocode:!1},reducers:{addProduct:function(e,t){var n=e.products.find((function(e){return e.id===t.payload.id}));if(n)n.count+=1,n.totalPrice=n.price*n.count;else{var r={preview:t.payload.preview,name:t.payload.name,price:t.payload.price,count:t.payload.count,weight:t.payload.weight,cart_index:e.products.length,id:t.payload.id,ingredients:e.products.ingredients};r.totalPrice=r.price*r.count,e.products.push(r)}localStorage.setItem("shoppingCart",JSON.stringify(e.products))},removeProduct:function(e,t){e.products=e.products.filter((function(e){return e.id!==t.payload.id})),localStorage.setItem("shoppingCart",JSON.stringify(e.products))},updateCount:function(e,t){e.products.find((function(e){return e.cart_index===t.payload.cart_index}));e.products[t.payload.cart_index].count=t.payload.count,e.products[t.payload.cart_index].totalPrice=e.products[t.payload.cart_index].price*t.payload.count,localStorage.setItem("shoppingCart",JSON.stringify(e.products))},getFromLocalStorage:function(e){var t=localStorage.getItem("shoppingCart");null!==JSON.parse(t)&&(e.products=JSON.parse(t))},cartPromocode:function(e){e.promocode=!0}}}),ya=ga.actions,ka=ya.addProduct,ba=ya.removeProduct,wa=ya.updateCount,xa=ya.getFromLocalStorage,_a=(ya.cartPromocode,ga.reducer),Sa=sa({name:"user",initialState:{isAuthenticated:!1,city:null,name:null,phone:null,email:null,token:null,promocode40:!0,favoritProducts:[]},reducers:{userLogin:function(e,t){e.isAuthenticated=!0,e.name=t.payload.name,e.phone=t.payload.phone,e.email=t.payload.email,e.token=t.payload.token,e.promocode40=t.payload.promocode40,localStorage.setItem("userData",JSON.stringify(e))},userLogout:function(e){e.isAuthenticated=!1,e.name=null,e.phone=null,e.email=null,e.token=null,e.promocode40=!1,localStorage.removeItem("userData")},updateCity:function(e,t){e.city=t.payload.city,localStorage.setItem("userData",JSON.stringify(e))},addToFavorit:function(e,t){var n={preview:t.payload.preview,name:t.payload.name,price:t.payload.price,count:1,weight:t.payload.weight,id:t.payload.id,ingredients:t.payload.ingredients};e.favoritProducts.push(n),e.isAuthenticated&&localStorage.setItem("favoritProducts",JSON.stringify(e.favoritProducts))},removeFromFavorit:function(e,t){var n=t.payload.id;e.favoritProducts=e.favoritProducts.filter((function(e){return e.id!==n})),e.isAuthenticated&&localStorage.setItem("favoritProducts",JSON.stringify(e.favoritProducts))},userPromocode:function(e){e.promocode40=!1,localStorage.setItem("userData",JSON.stringify(e))},loadFromLocalStorage:function(e){var t=localStorage.getItem("favoritProducts"),n=JSON.parse(t);null!==n&&(e.favoritProducts=n)}}}),Ea=Sa.actions,Ca=Ea.userLogin,Ia=Ea.userLogout,Ta=Ea.updateCity,La=Ea.addToFavorit,Na=Ea.removeFromFavorit,Pa=Ea.loadFromLocalStorage,Oa=(Ea.userPromocode,Sa.reducer),Aa=sa({name:"popupActions",initialState:{currentAction:""},reducers:{setActions:function(e,t){e.currentAction=t.payload.action}}}),ja=Aa.actions.setActions,Da=Aa.reducer,Ma=function(e){var t=we(),n=ot(),i=l((0,r.useState)(1),2),a=i[0],o=i[1],s=l((0,r.useState)(!1),2),u=s[0],c=s[1],f=l((0,r.useState)(!1),2),h=f[0],d=f[1],p=Ye((function(e){return e.user.favoritProducts}));Ye((function(e){return e.shoppingCart.products}));return(0,r.useEffect)((function(){p&&(p.some((function(t){return t.id===e.id}))?c(!0):c(!1))}),[p,e.id]),(0,st.jsxs)("div",{className:"product",children:[(0,st.jsx)("div",{className:"product__cta",children:(0,st.jsx)("div",{className:"product__like ".concat(!0===u&&"product__like-active"),onClick:function(){p.some((function(t){return t.id===e.id}))?n(Na({id:e.id})):(n(ja({action:"addToFavorit"})),setTimeout((function(){n(ja({action:""}))}),2e3),n(La({name:e.name,price:e.price,count:a,preview:e.preview,weight:e.weight,id:e.id,ingredients:e.ingredients})))},children:(0,st.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"transparent",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M8.5097 3.13486L7.99967 3.68282L7.48964 3.13486C6.08123 1.62171 3.79773 1.62171 2.38932 3.13486C0.980904 4.648 0.980904 7.10129 2.38932 8.61444L6.97961 13.5461C7.54297 14.1513 8.45637 14.1513 9.01974 13.5461L13.61 8.61444C15.0184 7.10129 15.0184 4.648 13.61 3.13486C12.2016 1.62171 9.91812 1.62171 8.5097 3.13486Z",stroke:"white",strokeWidth:"1.5",strokeLinejoin:"round"})})})}),(0,st.jsxs)("div",{className:"product__preview",children:[(0,st.jsx)("img",{src:e.preview,alt:e.name,onClick:function(){return t("/product/".concat(e.id))}}),!0===h?(0,st.jsxs)("button",{className:"product__inCart",children:[(0,st.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M6.66715 10.1138L12.7954 3.9856L13.7382 4.9284L6.66715 11.9994L2.4245 7.75685L3.36731 6.81405L6.66715 10.1138Z",fill:"#92939A"})}),(0,st.jsx)("p",{children:" \u0414\u043e\u0434\u0430\u043d\u043e \u0434\u043e \u043a\u043e\u0448\u0438\u043a\u0443"})]}):(0,st.jsx)("button",{className:"product__addToCard",onClick:function(){n(ka({name:e.name,price:e.price,count:a,preview:e.preview,weight:e.weight,id:e.id,ingredients:e.ingredients})),n(ja({action:"addToCard"})),d(!0),setTimeout((function(){d(!1),n(ja({action:""}))}),2e3)},children:"\u0412 \u043a\u043e\u0448\u0438\u043a"})]}),(0,st.jsxs)("div",{className:"product__info",children:[(0,st.jsxs)("p",{className:"product__weight",children:[e.weight," \u0433"]}),(0,st.jsx)("h4",{className:"product__name",children:e.name}),(0,st.jsx)("p",{className:"product__composition",children:e.ingredients})]}),(0,st.jsxs)("div",{className:"product__order",children:[(0,st.jsx)("div",{className:"product__price",children:(0,st.jsxs)("div",{className:"product__total-price",children:[e.price*a," \u20b4"]})}),(0,st.jsxs)("div",{className:"counter",children:[(0,st.jsx)("div",{className:"counter__btn",onClick:function(){a>1&&o(a-1)},children:"-"}),(0,st.jsx)("div",{className:"counter__value",children:a}),(0,st.jsx)("div",{className:"counter__btn",onClick:function(){return o(a+1)},children:"+"})]})]})]})},Ra=function(e){var t=e.handleSidebar,n=l((0,r.useState)([]),2),i=n[0],a=n[1],o=localStorage.getItem("favoritProducts");return(0,r.useEffect)((function(){a(JSON.parse(o))}),[o]),(0,st.jsxs)("section",{className:"grid_layout--main favorites",children:[(0,st.jsx)(Ot,{handleSidebar:t,children:"\u0423\u043b\u044e\u0431\u043b\u0435\u043d\u0456 \u0431\u043b\u044e\u0434\u0430"}),i&&i.map((function(e){return(0,st.jsx)(Ma,{preview:e.preview,name:e.name,price:e.price,weight:e.weight,id:e.id,ingredients:e.ingredients},e.id)}))]})},Fa=function(e){var t=e.handleSidebar;return(0,st.jsx)(st.Fragment,{children:(0,st.jsxs)("section",{className:"grid_layout--main orders",children:[(0,st.jsx)(Ot,{handleSidebar:t,children:"\u0411\u043e\u043d\u0443\u0441\u0438"}),(0,st.jsx)("div",{className:"order",children:(0,st.jsx)("div",{className:"order-container",children:(0,st.jsx)("div",{className:"order-info",children:(0,st.jsxs)("div",{className:"order-info__number",children:[(0,st.jsx)("h4",{children:"\u041f\u0435\u0440\u0448\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f - 40% \u0437\u043d\u0438\u0436\u043a\u0430"}),(0,st.jsx)("p",{className:"status",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0430"})]})})})})]})})},Ua=function(e){var t=e.pathlink,n=e.handleSidebar,r=e.isSidebarClosed;return(0,st.jsx)(st.Fragment,{children:function(){switch(t){case"info":return(0,st.jsx)(br,{handleSidebar:n,isSidebarClosed:r});case"addresses":return(0,st.jsx)("h1",{children:" Coming soon"});case"history":return(0,st.jsx)(Sr,{handleSidebar:n});case"":return(0,st.jsx)(Er,{handleSidebar:n});case"favourite":return(0,st.jsx)(Ra,{handleSidebar:n});case"bonuses":return(0,st.jsx)(Fa,{handleSidebar:n});default:return(0,st.jsx)(Cr,{handleSidebar:n})}}()})},Va=function(){var e=l((0,r.useState)(!1),2),t=e[0],n=e[1],i=ke().pathname.replace("/profile/","");return console.log(t),(0,st.jsx)(st.Fragment,{children:(0,st.jsx)(ut,{children:(0,st.jsxs)(ct,{children:[(0,st.jsx)(St,{pathlink:i}),(0,st.jsx)(Ua,{pathlink:i,handleSidebar:function(){n((function(e){return!e}))},isSidebarClosed:t})]})})})};function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ba.apply(this,arguments)}var za=new Map,qa=new WeakMap,Wa=0,Ha=void 0;function Ga(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?function(e){return e?(qa.has(e)||(Wa+=1,qa.set(e,Wa.toString())),qa.get(e)):"0"}(e.root):e[t])})).toString()}function Ka(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ha;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var a=function(e){var t=Ga(e),n=za.get(t);if(!n){var r,i=new Map,a=new IntersectionObserver((function(t){t.forEach((function(t){var n,a=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=a),null==(n=i.get(t.target))||n.forEach((function(e){e(a,t)}))}))}),e);r=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:a,elements:i},za.set(t,n)}return n}(n),o=a.id,s=a.observer,u=a.elements,c=u.get(e)||[];return u.has(e)||u.set(e,c),c.push(t),s.observe(e),function(){c.splice(c.indexOf(t),1),0===c.length&&(u.delete(e),s.unobserve(e)),0===u.size&&(s.disconnect(),za.delete(o))}}var Qa=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function Ja(e){return"function"!==typeof e.children}var Za=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).node=null,r._unobserveCb=null,r.handleNode=function(e){r.node&&(r.unobserve(),e||r.props.triggerOnce||r.props.skip||r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=e||null,r.observeNode()},r.handleChange=function(e,t){e&&r.props.triggerOnce&&r.unobserve(),Ja(r.props)||r.setState({inView:e,entry:t}),r.props.onChange&&r.props.onChange(e,t)},r.state={inView:!!e.initialInView,entry:void 0},r}return g(n,[{key:"componentDidUpdate",value:function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())}},{key:"componentWillUnmount",value:function(){this.unobserve(),this.node=null}},{key:"observeNode",value:function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,i=e.trackVisibility,a=e.delay,o=e.fallbackInView;this._unobserveCb=Ka(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r,trackVisibility:i,delay:a},o)}}},{key:"unobserve",value:function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}},{key:"render",value:function(){if(!Ja(this.props)){var e=this.state,t=e.inView,n=e.entry;return this.props.children({inView:t,entry:n,ref:this.handleNode})}var i=this.props,a=i.children,o=i.as,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(i,Qa);return r.createElement(o||"div",Ba({ref:this.handleNode},s),a)}}]),n}(r.Component);var Ya=function(e){return(0,st.jsxs)("button",{className:"btn btn-main ".concat(!0===e.fullWide&&"btn-main-fw"," "),onClick:e.onClick,disabled:e.disabled,children:[e.name,e.arrow&&(0,st.jsx)("svg",{width:"17",height:"20",viewBox:"0 0 17 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M9.16645 11.7814L12.7425 8.20535L13.6851 9.14802L8.49979 14.3334L3.31445 9.14802L4.25712 8.20535L7.83312 11.7814V3.66669H9.16645V11.7814Z",fill:"#12130F"})})]})},$a=function(e){var t=e.title,n=e.desc,r=e.image_mob,i=e.image_desktop,a=e.index;return(0,st.jsx)("div",{className:"banner","data-index":a,children:(0,st.jsxs)("div",{className:"banner__content",children:[(0,st.jsxs)("div",{className:"banner__info",children:[(0,st.jsx)("div",{className:"banner__logo",children:(0,st.jsxs)("svg",{width:"47",height:"47",viewBox:"0 0 47 47",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,st.jsx)("path",{d:"M45.5628 5.14991C45.025 3.9572 44.0271 2.99915 42.7844 2.48232C42.1377 2.21378 41.426 2.06299 40.6777 2.06299C39.9294 2.06299 39.2173 2.21378 38.571 2.48232C37.395 2.97105 36.4428 3.85846 35.8881 4.96359C34.5981 4.02661 33.1898 3.23298 31.6867 2.60832C29.2083 1.57756 26.4815 1 23.614 1C20.7461 1 18.0189 1.57756 15.5417 2.60667C13.9738 3.25859 12.5103 4.09725 11.1751 5.08794C10.6308 3.92415 9.64888 2.98964 8.42857 2.48232C7.78227 2.21378 7.07014 2.06299 6.32186 2.06299C5.57358 2.06299 4.86188 2.21378 4.21515 2.48232C2.97246 2.99915 1.97461 3.9572 1.43675 5.14991C1.15706 5.77085 1 6.45417 1 7.17302C1 7.89146 1.15663 8.57478 1.43675 9.19571C1.97461 10.3888 2.97246 11.3469 4.21515 11.8633C4.5327 11.9955 4.86704 12.098 5.21299 12.1694C5.10456 12.3872 4.99699 12.6053 4.89673 12.8271C3.82315 15.2072 3.2216 17.8256 3.2216 20.5792V46C3.77281 45.6546 4.32702 45.3138 4.89673 44.9957C10.4075 41.9273 16.7991 40.1604 23.6153 40.1604C26.4815 40.1604 29.2096 39.5824 31.6867 38.5529C36.4479 36.574 40.2715 32.9029 42.3326 28.3316C43.4066 25.9519 44.0069 23.3339 44.0069 20.5808C44.0069 17.8273 43.4049 15.2089 42.3326 12.8288C42.2246 12.5888 42.1084 12.3529 41.9905 12.1178C42.2633 12.0505 42.5301 11.9691 42.7844 11.8633C44.0271 11.3469 45.025 10.3888 45.5628 9.19571C45.8429 8.57478 46 7.89146 46 7.17302C46 6.45417 45.8425 5.77085 45.5628 5.14991Z",fill:"white"}),(0,st.jsx)("path",{d:"M45.5628 5.14991C45.025 3.9572 44.0271 2.99915 42.7844 2.48232C42.1377 2.21378 41.426 2.06299 40.6777 2.06299C39.9294 2.06299 39.2173 2.21378 38.571 2.48232C37.395 2.97105 36.4428 3.85846 35.8881 4.96359C34.5981 4.02661 33.1898 3.23298 31.6867 2.60832C29.2083 1.57756 26.4815 1 23.614 1C20.7461 1 18.0189 1.57756 15.5417 2.60667C13.9738 3.25859 12.5103 4.09725 11.1751 5.08794C10.6308 3.92415 9.64888 2.98964 8.42857 2.48232C7.78227 2.21378 7.07014 2.06299 6.32186 2.06299C5.57358 2.06299 4.86188 2.21378 4.21515 2.48232C2.97246 2.99915 1.97461 3.9572 1.43675 5.14991C1.15706 5.77085 1 6.45417 1 7.17302C1 7.89146 1.15663 8.57478 1.43675 9.19571C1.97461 10.3888 2.97246 11.3469 4.21515 11.8633C4.5327 11.9955 4.86704 12.098 5.21299 12.1694C5.10456 12.3872 4.99699 12.6053 4.89673 12.8271C3.82315 15.2072 3.2216 17.8256 3.2216 20.5792V46C3.77281 45.6546 4.32702 45.3138 4.89673 44.9957C10.4075 41.9273 16.7991 40.1604 23.6153 40.1604C26.4815 40.1604 29.2096 39.5824 31.6867 38.5529C36.4479 36.574 40.2715 32.9029 42.3326 28.3316C43.4066 25.9519 44.0069 23.3339 44.0069 20.5808C44.0069 17.8273 43.4049 15.2089 42.3326 12.8288C42.2246 12.5888 42.1084 12.3529 41.9905 12.1178C42.2633 12.0505 42.5301 11.9691 42.7844 11.8633C44.0271 11.3469 45.025 10.3888 45.5628 9.19571C45.8429 8.57478 46 7.89146 46 7.17302C46 6.45417 45.8425 5.77085 45.5628 5.14991Z",stroke:"#12130F",strokeWidth:"2",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,st.jsx)("path",{d:"M13.1195 16.6365C13.1195 15.6334 12.2727 14.8204 11.2279 14.8204C10.1828 14.8204 9.33594 15.6334 9.33594 16.6365C9.33594 17.6396 10.1828 18.4526 11.2279 18.4526C12.2727 18.4526 13.1195 17.6396 13.1195 16.6365Z",fill:"#12130F"}),(0,st.jsx)("path",{d:"M38.0687 16.6365C38.0687 15.6334 37.2219 14.8204 36.1772 14.8204C35.132 14.8204 34.2852 15.6334 34.2852 16.6365C34.2852 17.6396 35.132 18.4526 36.1772 18.4526C37.2219 18.4526 38.0687 17.6396 38.0687 16.6365Z",fill:"#12130F"}),(0,st.jsx)("path",{d:"M22.6825 28.3741C23.2298 29.0285 24.2672 29.0285 24.8146 28.3741L26.5693 26.2754L27.6059 25.0351C28.3236 24.1762 27.6868 22.9013 26.5396 22.9013H23.7487H20.9574C19.8103 22.9013 19.1734 24.1762 19.8912 25.0351L20.9277 26.2754L22.6825 28.3741Z",fill:"#12130F"}),(0,st.jsx)("path",{d:"M23.3232 31.7015H24.0702V27.1769H23.3232V31.7015Z",fill:"#12130F"}),(0,st.jsx)("path",{d:"M21.5324 30.7709C21.9554 31.0547 22.3241 31.2109 22.6701 31.2997C23.0152 31.3873 23.3392 31.4121 23.6968 31.4158C24.0543 31.4104 24.3779 31.3857 24.7226 31.2985C25.0677 31.2097 25.4369 31.0539 25.8611 30.7709C25.9283 31.2762 25.6645 31.788 25.2407 32.1363C24.8134 32.4883 24.232 32.6569 23.6968 32.6548C23.1615 32.6552 22.581 32.4867 22.1537 32.1351C21.7303 31.7864 21.467 31.2753 21.5324 30.7709Z",fill:"#12130F"})]})}),(0,st.jsx)("h3",{className:"title__h1 text__color--secondary",children:t}),(0,st.jsx)("p",{className:"text",children:n}),(0,st.jsx)(Ya,{name:"\u0414\u0438\u0432\u0438\u0442\u0438\u0441\u044c \u043c\u0435\u043d\u044e",arrow:!0,onClick:function(){document.querySelector("#menu").scrollIntoView({behavior:"smooth"})}})]}),(0,st.jsxs)("picture",{className:"banner__preview",children:[(0,st.jsx)("source",{media:"(max-width: 786px)",srcSet:r}),(0,st.jsx)("source",{media:"(min-width: 787px)",srcSet:i}),(0,st.jsx)("img",{src:r,alt:""})]})]})})},Xa=n.p+"static/media/banner1.064356126c1cf74c9bdc.png",eo=n.p+"static/media/banner2.a9ab2dc965221294a1c7.png",to=n.p+"static/media/banner3.a47a41a33ceb6c6cc6b7.png",no=n.p+"static/media/banner1_mob.2149d7a6dd26c621b389.png",ro=n.p+"static/media/banner2_mob.e8e3a6d22f1998b2ef13.png",io=n.p+"static/media/banner3_mob.fe14d85da03d6c38dea5.png",ao=function(){var e=l((0,r.useState)(0),2),t=e[0],n=e[1],i=l((0,r.useState)("right"),2),a=i[0],o=i[1],s=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(s.current){if("right"===a){var e=setInterval((function(){s.current.scrollBy({left:100,behavior:"smooth"})}),7e3);return function(){clearInterval(e)}}if("left"===a){var t=setInterval((function(){s.current.scrollBy({left:-100,behavior:"smooth"})}),7e3);return function(){clearInterval(t)}}}}),[a]),(0,st.jsx)("div",{className:"slider",children:(0,st.jsxs)("div",{className:"slider__wrapper",children:[(0,st.jsxs)("div",{className:"slider__track",ref:s,children:[(0,st.jsx)(Za,{threshold:.2,as:"div",onChange:function(e,t){e&&(n(t.target.firstChild.dataset.index),o("right"))},style:{flexShrink:0},children:(0,st.jsx)($a,{title:"Polar \u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430",desc:"\u041d\u0435\u043e\u0431\u043e\u0432\u2019\u044f\u0437\u043a\u043e\u0432\u043e \u043f\u043e\u043a\u0438\u0434\u0430\u0442\u0438 \u0443\u043b\u044e\u0431\u043b\u0435\u043d\u0435 \u043b\u0456\u0436\u043a\u043e \u0430\u0431\u043e \u0436 \u0432\u0437\u0430\u0433\u0430\u043b\u0456 \u0432\u0438\u0445\u043e\u0434\u0438\u0442\u0438 \u0437 \u0434\u043e\u043c\u0443, \u0430\u0431\u0438 \u043f\u043e\u043b\u0430\u0441\u0443\u0432\u0430\u0442\u0438 \u0443\u043b\u044e\u0431\u043b\u0435\u043d\u0438\u043c\u0438 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u044f\u043c\u0438!",image_mob:no,image_desktop:Xa,index:0})}),(0,st.jsx)(Za,{threshold:.2,style:{flexShrink:0},as:"div",onChange:function(e,t){e&&n(t.target.firstChild.dataset.index)},children:(0,st.jsx)($a,{title:"\u041b\u044e\u0431\u043e\u0432 \u0437 \u043f\u0435\u0440\u0448\u043e\u0433\u043e \u043f\u043e\u0433\u043b\u044f\u0434\u0443 \u0456\u0441\u043d\u0443\u0454... ",desc:"\u041d\u0430\u0441\u043e\u043b\u043e\u0434\u0436\u0443\u0439\u0442\u0435\u0441\u044c \u0441\u043c\u0430\u0447\u043d\u043e\u044e \u0457\u0436\u0435\u044e \u0442\u0430 \u0431\u0443\u0434\u044c\u0442\u0435 \u043a\u043e\u0445\u0430\u043d\u0438\u043c\u0438 \u0432 \u0431\u0443\u0434\u044c-\u044f\u043a\u0438\u0439 \u0434\u0435\u043d\u044c",image_mob:ro,image_desktop:eo,index:1})}),(0,st.jsx)(Za,{threshold:.2,style:{flexShrink:0},as:"div",onChange:function(e,t){e&&(n(t.target.firstChild.dataset.index),o("left"))},children:(0,st.jsx)($a,{title:"\u0417\u0430\u043c\u043e\u0432\u043b\u044f\u0439 \u0441\u043c\u0430\u043a\u043e\u043b\u0438\u043a\u0438 \u0432\u0456\u0434 \u041f\u043e\u043b\u0430\u0440 \u0434\u043e\u0434\u043e\u043c\u0443",desc:"\u0428\u0432\u0438\u0434\u043a\u043e, \u044f\u043a\u0441\u0456\u043d\u043e \u0456 \u0441\u043c\u0430\u0447\u043d\u043e",image_mob:io,image_desktop:to,index:2})})]}),(0,st.jsxs)("div",{className:"slider__dots",children:[(0,st.jsx)("div",{className:"slider__dot ".concat(0==t&&"slider__dot-active")}),(0,st.jsx)("div",{className:"slider__dot ".concat(1==t&&"slider__dot-active")}),(0,st.jsx)("div",{className:"slider__dot ".concat(2==t&&"slider__dot-active")})]})]})})},oo=function(){var e=xe().id,t=(Ye((function(e){return e.user})).token,l((0,r.useState)(null),2)),n=t[0],i=t[1],a=l((0,r.useState)([]),2),o=a[0],s=a[1],u=l((0,r.useState)([]),2),c=u[0],f=u[1],h=l((0,r.useState)([]),2),d=(h[0],h[1]),p=localStorage.getItem("favoritProducts");return(0,r.useEffect)((function(){kr.get("https://polarpelmeni-api.work-set.eu/api/menu",{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then((function(e){var t=e.data.response.filter((function(e){return e.category_name.startsWith("onlineOrder:")})).map((function(e,t){return{category_name:e.category_name.replace(/onlineOrder: /,""),category_id:e.category_id,category_position_index:t}}));t[13].category_position_index=0,t[12].category_position_index=1,t[11].category_position_index=2,t[8].category_position_index=3,t[10].category_position_index=4,t[9].category_position_index=5,t[2].category_position_index=6,t[3].category_position_index=7,t[0].category_position_index=8,t[6].category_position_index=9,t[4].category_position_index=10,t[7].category_position_index=11,t[1].category_position_index=12,t[5].category_position_index=13,t.sort((function(e,t){return e.category_position_index-t.category_position_index})),console.log(t),i(t[0].category_id),s(t)})).catch((function(e){return console.error(e)}))}),[]),(0,r.useEffect)((function(){!function(e){var t=JSON.stringify({categoryId:e});kr.post("https://polarpelmeni-api.work-set.eu/api/products",t,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then((function(e){var t=e.data.response.map((function(e){return{photo:e.photo_origin,product_name:e.product_name,price:e.price,out:e.out,product_id:e.product_id,ingredients:e.product_production_description}}));f(t)})).catch((function(e){return console.error(e)}))}(n)}),[n]),(0,r.useEffect)((function(){d(JSON.parse(p))}),[p]),(0,r.useEffect)((function(){e&&i(e)}),[e]),(0,st.jsxs)(st.Fragment,{children:[(0,st.jsxs)("div",{className:"categories",id:"menu",children:[(0,st.jsx)("h1",{className:"title__h1",children:"\u041a\u0443\u0448\u0442\u0443\u0439 \u0442\u0456\u043b\u044c\u043a\u0438 \u043d\u0430\u0439\u0441\u043c\u0430\u0447\u043d\u0456\u0448\u0435"}),(0,st.jsx)("div",{className:"categories__list",children:o.map((function(e){return(0,st.jsx)("button",{className:"categories__btn ".concat(n===e.category_id?"categories__btn-active":""),onClick:function(){return i(e.category_id)},children:e.category_name},e.category_id)}))})]}),(0,st.jsx)("div",{className:"menu__products",children:c.map((function(e){return(0,st.jsx)(Ma,{preview:"https://polar-pelmeni-odessa.joinposter.com"+e.photo,name:e.product_name,price:parseInt(e.price[1].slice(0,-2)),ingredients:e.ingredients,weight:e.out,id:e.product_id},e.product_id)}))})]})},so=function(e){var t=e.direction;return(0,st.jsx)("div",{className:"button-arrow button-arrow-".concat(t),children:(0,st.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M10.4763 7.83307L6.00634 12.3031L7.18467 13.4814L13.6663 6.99973L7.18467 0.518066L6.00634 1.6964L10.4763 6.1664L0.333008 6.1664L0.333008 7.83307L10.4763 7.83307Z",fill:"#12130F"})})})},uo="https://polar-pelmeni-odessa.joinposter.com",co=function(){var e=xe().id,t=ot(),n=l((0,r.useState)(1),2),i=n[0],a=n[1],o=l((0,r.useState)(!1),2),s=o[0],u=o[1],c=l((0,r.useState)(null),2),f=c[0],h=c[1],d=l((0,r.useState)(null),2),p=d[0],v=d[1],m=l((0,r.useState)(null),2),g=m[0],y=m[1];(0,r.useEffect)((function(){if(f){var e=f.product_production_description.split(", ");v(e)}}),[f]),(0,r.useEffect)((function(){var t={productId:e},n=JSON.stringify(t);kr.post("https://polarpelmeni-api.work-set.eu/api/product",n,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then((function(e){console.log("pp",e),h(e.data.response);var t=JSON.stringify({categoryId:e.data.response.menu_category_id});kr.post("https://polarpelmeni-api.work-set.eu/api/products",t,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then((function(e){var t=e.data.response.map((function(e){return{photo:e.photo_origin,product_name:e.product_name,price:e.price,out:e.out,product_id:e.product_id,ingredients:e.product_production_description}}));y(t)}))})).catch((function(e){return console.error(e)}))}),[e]);var k=Ye((function(e){return e.shoppingCart.products}));return(0,r.useEffect)((function(){k&&(k.some((function(t){return t.id==e}))?u(!0):u(!1))}),[k,e]),null!==f&&!1!==f?(0,st.jsx)("div",{children:(0,st.jsx)("div",{className:"product-page",children:(0,st.jsxs)(ut,{children:[(0,st.jsxs)("div",{className:"product-page__content",children:[(0,st.jsx)("div",{className:"product-page__preview",children:(0,st.jsx)("img",{src:uo+f.photo_origin,alt:""})}),(0,st.jsxs)("div",{className:"product-page__info",children:[(0,st.jsxs)("p",{className:"product-page__weight text text__color--secondary",children:[f.cost," \u0433"]}),(0,st.jsx)("h1",{className:"product-page__title text__color--secondary",children:f.product_name}),f.group_modifications&&(0,st.jsx)("p",{className:"product-page__desc text__color--secondary",children:f.group_modifications.map((function(e,t){return f.group_modifications.length===t+1?"".concat(e.name):"".concat(e.name,", ")}))}),(0,st.jsxs)("p",{className:"product-page__price text-price text__color--secondary",children:[parseInt(f.price[1].slice(0,-2))," \u20b4"]}),(0,st.jsxs)("div",{className:"product-page__order",children:[!0===s?(0,st.jsxs)("button",{className:"btn btn-main",onClick:function(){},disabled:!0,children:[(0,st.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:6},children:(0,st.jsx)("path",{d:"M6.66715 10.1138L12.7954 3.9856L13.7382 4.9284L6.66715 11.9994L2.4245 7.75685L3.36731 6.81405L6.66715 10.1138Z",fill:"#92939A"})}),"\u0414\u043e\u0434\u0430\u043d\u043e \u0434\u043e \u043a\u043e\u0448\u0438\u043a\u0443"]}):(0,st.jsxs)("button",{className:"btn btn-main",onClick:function(){t(ka({name:f.product_name,price:parseInt(f.price[1].slice(0,-2)),count:i,preview:uo+f.photo_origin,weight:f.cost,id:e})),t(ja({action:"addToCard"})),setTimeout((function(){t(ja({action:""}))}),2e3)},children:["\u0414\u043e\u0434\u0430\u0442\u0438 \u0432 \u043a\u043e\u0448\u0438\u043a (",parseInt(f.price[1].slice(0,-2))*i," \u20b4)"]}),(0,st.jsxs)("div",{className:"counter",children:[(0,st.jsx)("div",{className:"counter__btn counter__btn--transperent",onClick:function(){i>1&&a(i-1)},children:"-"}),(0,st.jsx)("div",{className:"counter__value text__color--secondary",children:i}),(0,st.jsx)("div",{className:"counter__btn counter__btn--transperent",onClick:function(){return a(i+1)},children:"+"})]})]}),f.product_production_description&&(0,st.jsxs)(st.Fragment,{children:[(0,st.jsx)("h6",{className:"product-page__compile-title title__h6 text__color--secondary",children:"\u0421\u043a\u043b\u0430\u0434"}),(0,st.jsx)("ul",{className:"product-page__compile",children:p&&p.map((function(e){return(0,st.jsx)("li",{className:"product-page__compile-item",children:e})}))})]})]})]}),(0,st.jsxs)("div",{className:"product-page__recommendations",children:[(0,st.jsxs)("div",{className:"product-page__recommendations-head",children:[(0,st.jsx)("h3",{className:"title__h3",children:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0454\u043c\u043e \u0441\u043f\u0440\u043e\u0431\u0443\u0432\u0430\u0442\u0438"}),(0,st.jsxs)("div",{className:"product-page__recommendations-arrows",children:[(0,st.jsx)(so,{direction:"left"}),(0,st.jsx)(so,{direction:"right"})]})]}),null!==g&&(0,st.jsx)("div",{className:"product-page__recommendations-track",children:(0,st.jsx)("div",{className:"product-page__recommendations-list",children:g.map((function(e){return(0,st.jsx)(Ma,{preview:"https://polar-pelmeni-odessa.joinposter.com"+e.photo,name:e.product_name,price:parseInt(e.price[1].slice(0,-2)),ingredients:e.ingredients,weight:e.out,id:e.product_id},e.product_id)}))})})]})]})})}):"\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"},lo=sa({name:"modals",initialState:{authModal:!1,cityModal:!0,thanksModal:!1},reducers:{authModalUpdateState:function(e,t){e.authModal=t.payload.isOpen},cityModalUpdateState:function(e,t){e.cityModal=t.payload.isOpen},thanksModalUpdateState:function(e,t){e.thanksModal=t.payload.isOpen}}}),fo=lo.actions,ho=fo.authModalUpdateState,po=fo.cityModalUpdateState,vo=fo.thanksModalUpdateState,mo=lo.reducer;var go=n.p+"static/media/logo.4c66c0436de3e3728ef3931cb8bd0914.svg",yo=function(e){var t=e.preview,n=e.name,i=e.weight,a=e.price,o=e.count,s=e.id,u=e.cart_index,c=l((0,r.useState)(o),2),f=c[0],h=c[1],d=ot();return(0,r.useEffect)((function(){d(wa({cart_index:u,count:f}))}),[f]),(0,st.jsxs)("li",{className:"shopping-cart__item",children:[(0,st.jsx)("div",{className:"shopping-cart__preview",children:(0,st.jsx)("img",{src:t,alt:""})}),(0,st.jsxs)("div",{className:"shopping-cart__info",children:[(0,st.jsxs)("div",{className:"shopping-cart__row",children:[(0,st.jsx)("h6",{className:"title__h8",children:n}),(0,st.jsx)("div",{className:"shopping-cart__remove",onClick:function(){return d(ba({id:s}))},children:(0,st.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M6.0006 4.82144L10.1256 0.696442L11.3039 1.87478L7.17893 5.99977L11.3039 10.1248L10.1256 11.3031L6.0006 7.17811L1.8756 11.3031L0.697266 10.1248L4.82227 5.99977L0.697266 1.87478L1.8756 0.696442L6.0006 4.82144Z",fill:"#49484D"})})})]}),(0,st.jsxs)("p",{className:"shopping-cart__weight",children:[i," \u0433"]}),(0,st.jsxs)("div",{className:"shopping-cart__row",children:[(0,st.jsxs)("p",{className:"shopping-cart__price",children:[a," \u20b4"]}),(0,st.jsxs)("div",{className:"counter",children:[(0,st.jsx)("div",{className:"counter__btn counter__btn--light",onClick:function(){o>1&&h(o-1)},children:"-"}),(0,st.jsx)("div",{className:"counter__value",children:f}),(0,st.jsx)("div",{className:"counter__btn counter__btn--light",onClick:function(){return h(o+1)},children:"+"})]})]})]})]})},ko=function(e){var t=e.action,n=e.error,r=(e.onClick,ot());return(0,st.jsx)(kt,{to:"\u0411\u043b\u044e\u0434\u043e \u0434\u043e\u0434\u0430\u043d\u043e \u0443 \u043a\u043e\u0448\u0438\u043a"===t?"/order":"",className:"popup-actions",children:(0,st.jsxs)("div",{className:"popup-actions__content",children:[(0,st.jsx)("div",{className:"popup-actions__ico",children:n?(0,st.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,st.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#F55D66"}),(0,st.jsx)("path",{d:"M12.0007 18.6666C8.31875 18.6666 5.33398 15.6818 5.33398 11.9999C5.33398 8.31802 8.31875 5.33325 12.0007 5.33325C15.6825 5.33325 18.6673 8.31802 18.6673 11.9999C18.6673 15.6818 15.6825 18.6666 12.0007 18.6666ZM12.0007 17.3333C14.9462 17.3333 17.334 14.9455 17.334 11.9999C17.334 9.0544 14.9462 6.66659 12.0007 6.66659C9.05513 6.66659 6.66732 9.0544 6.66732 11.9999C6.66732 14.9455 9.05513 17.3333 12.0007 17.3333ZM11.334 13.9999H12.6673V15.3333H11.334V13.9999ZM11.334 8.66659H12.6673V12.6666H11.334V8.66659Z",fill:"black"})]}):(0,st.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,st.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#55CB99"}),(0,st.jsx)("g",{"clip-path":"url(#clip0_390_8333)",children:(0,st.jsx)("path",{d:"M10.6665 14.1148L16.7945 7.98608L17.7378 8.92875L10.6665 16.0001L6.42383 11.7574L7.36649 10.8148L10.6665 14.1148Z",fill:"#12130F"})}),(0,st.jsx)("defs",{children:(0,st.jsx)("clipPath",{id:"clip0_390_8333",children:(0,st.jsx)("rect",{width:"16",height:"16",fill:"white",transform:"translate(4 4)"})})})]})}),(0,st.jsx)("p",{children:t}),(0,st.jsx)("div",{className:"popup-actions__close",onClick:function(){return r(ja({action:""}))},children:(0,st.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M5.00048 4.05732L8.30048 0.757324L9.24315 1.69999L5.94315 4.99999L9.24315 8.29999L8.30048 9.24266L5.00048 5.94266L1.70048 9.24266L0.757812 8.29999L4.05781 4.99999L0.757812 1.69999L1.70048 0.757324L5.00048 4.05732Z",fill:"white"})})})]})})},bo=function(){var e=Ye((function(e){return e.shoppingCart.products})),t=we(),n=l((0,r.useState)(!1),2),i=n[0],a=n[1],o=l((0,r.useState)(0),2),s=o[0],u=o[1],c=l((0,r.useState)(!1),2),f=c[0],h=c[1];(0,r.useEffect)((function(){u(e.reduce((function(e,t){return e+t.totalPrice}),0))}),[e]),(0,r.useEffect)((function(){return document.body.style.overflow=i?"hidden":"auto",function(){document.body.style.overflow="auto"}}),[i]);var d;return(0,st.jsxs)(st.Fragment,{children:[(d=f,d?(0,st.jsx)(ko,{action:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f 200 \u20b4",error:!0}):null),(0,st.jsxs)("button",{className:"card",onClick:function(){return a(!0)},children:[(0,st.jsxs)("div",{className:"card__ico",children:[(0,st.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,st.jsx)("g",{clipPath:"url(#clip0_353_13525)",children:(0,st.jsx)("path",{d:"M2.66707 10.6667V2.66669H1.33374V1.33336H3.33374C3.51055 1.33336 3.68012 1.4036 3.80514 1.52862C3.93017 1.65365 4.00041 1.82321 4.00041 2.00003V10H12.2924L13.6257 4.66669H5.33374V3.33336H14.4804C14.5817 3.33336 14.6817 3.35647 14.7728 3.40092C14.8639 3.44537 14.9436 3.50999 15.006 3.58988C15.0683 3.66977 15.1116 3.76283 15.1326 3.86197C15.1536 3.96111 15.1517 4.06373 15.1271 4.16203L13.4604 10.8287C13.4243 10.9729 13.341 11.1008 13.2239 11.1923C13.1067 11.2837 12.9624 11.3334 12.8137 11.3334H3.33374C3.15693 11.3334 2.98736 11.2631 2.86234 11.1381C2.73731 11.0131 2.66707 10.8435 2.66707 10.6667ZM4.00041 15.3334C3.64679 15.3334 3.30765 15.1929 3.0576 14.9428C2.80755 14.6928 2.66707 14.3536 2.66707 14C2.66707 13.6464 2.80755 13.3073 3.0576 13.0572C3.30765 12.8072 3.64679 12.6667 4.00041 12.6667C4.35403 12.6667 4.69317 12.8072 4.94322 13.0572C5.19326 13.3073 5.33374 13.6464 5.33374 14C5.33374 14.3536 5.19326 14.6928 4.94322 14.9428C4.69317 15.1929 4.35403 15.3334 4.00041 15.3334ZM12.0004 15.3334C11.6468 15.3334 11.3076 15.1929 11.0576 14.9428C10.8075 14.6928 10.6671 14.3536 10.6671 14C10.6671 13.6464 10.8075 13.3073 11.0576 13.0572C11.3076 12.8072 11.6468 12.6667 12.0004 12.6667C12.354 12.6667 12.6932 12.8072 12.9432 13.0572C13.1933 13.3073 13.3337 13.6464 13.3337 14C13.3337 14.3536 13.1933 14.6928 12.9432 14.9428C12.6932 15.1929 12.354 15.3334 12.0004 15.3334Z",fill:"black"})}),(0,st.jsx)("defs",{children:(0,st.jsx)("clipPath",{id:"clip0_353_13525",children:(0,st.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}),0!==e.length&&(0,st.jsx)("div",{className:"card__length",children:(0,st.jsx)("span",{children:e.length})})]}),(0,st.jsx)("span",{className:"card__text",children:"\u041a\u043e\u0448\u0438\u043a"})]}),i&&(0,st.jsxs)("div",{className:"shopping-cart",children:[(0,st.jsx)("div",{className:"shopping-cart__close",onClick:function(){return a(!1)},children:(0,st.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M7.00072 5.58599L11.9507 0.635986L13.3647 2.04999L8.41472 6.99999L13.3647 11.95L11.9507 13.364L7.00072 8.41399L2.05072 13.364L0.636719 11.95L5.58672 6.99999L0.636719 2.04999L2.05072 0.635986L7.00072 5.58599Z",fill:"#12130F"})})}),0===e.length?(0,st.jsxs)("div",{className:"shopping-cart__content shopping-cart__content--empty",children:[(0,st.jsx)("div",{className:"shopping-cart__logo",children:(0,st.jsxs)("svg",{width:"150",height:"150",viewBox:"0 0 150 150",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,st.jsx)("circle",{cx:"75",cy:"75",r:"75",fill:"#DF643A"}),(0,st.jsx)("path",{d:"M104.417 49.7177C103.7 48.0744 102.369 46.7544 100.713 46.0423C99.8503 45.6723 98.9013 45.4646 97.9036 45.4646C96.9059 45.4646 95.9564 45.6723 95.0947 46.0423C93.5267 46.7157 92.257 47.9383 91.5175 49.4609C89.7975 48.17 87.9197 47.0765 85.9157 46.2159C82.611 44.7957 78.9753 44 75.152 44C71.3282 44 67.6919 44.7957 64.389 46.2136C62.2983 47.1118 60.3471 48.2673 58.5668 49.6323C57.8411 48.0288 56.5318 46.7413 54.9048 46.0423C54.043 45.6723 53.0935 45.4646 52.0958 45.4646C51.0981 45.4646 50.1492 45.6723 49.2869 46.0423C47.6299 46.7544 46.2995 48.0744 45.5823 49.7177C45.2094 50.5732 45 51.5146 45 52.5051C45 53.4949 45.2088 54.4364 45.5823 55.2919C46.2995 56.9357 47.6299 58.2557 49.2869 58.9672C49.7103 59.1494 50.1561 59.2905 50.6173 59.389C50.4727 59.689 50.3293 59.9895 50.1956 60.2952C48.7642 63.5744 47.9621 67.182 47.9621 70.9757V106C48.6971 105.524 49.436 105.055 50.1956 104.616C57.5433 100.389 66.0654 97.9543 75.1538 97.9543C78.9753 97.9543 82.6127 97.158 85.9157 95.7395C92.2639 93.013 97.362 87.9551 100.11 81.6568C101.542 78.3782 102.343 74.7712 102.343 70.978C102.343 67.1843 101.54 63.5766 100.11 60.2975C99.9662 59.9667 99.8112 59.6417 99.654 59.3179C100.018 59.2251 100.373 59.1129 100.713 58.9672C102.369 58.2557 103.7 56.9357 104.417 55.2919C104.791 54.4364 105 53.4949 105 52.5051C105 51.5146 104.79 50.5732 104.417 49.7177Z",fill:"white"}),(0,st.jsx)("path",{d:"M104.417 49.7177C103.7 48.0744 102.369 46.7544 100.713 46.0423C99.8503 45.6723 98.9013 45.4646 97.9036 45.4646C96.9059 45.4646 95.9564 45.6723 95.0947 46.0423C93.5267 46.7157 92.257 47.9383 91.5175 49.4609C89.7975 48.17 87.9197 47.0766 85.9157 46.2159C82.611 44.7957 78.9753 44 75.152 44C71.3282 44 67.6919 44.7958 64.389 46.2136C62.2983 47.1118 60.3471 48.2673 58.5668 49.6323C57.8411 48.0288 56.5318 46.7413 54.9048 46.0423C54.043 45.6723 53.0935 45.4646 52.0958 45.4646C51.0981 45.4646 50.1492 45.6723 49.2869 46.0423C47.6299 46.7544 46.2995 48.0744 45.5823 49.7177C45.2094 50.5732 45 51.5146 45 52.5051C45 53.4949 45.2088 54.4364 45.5823 55.2919C46.2995 56.9357 47.6299 58.2557 49.2869 58.9672C49.7103 59.1494 50.1561 59.2905 50.6173 59.389C50.4727 59.689 50.3293 59.9895 50.1956 60.2952C48.7642 63.5744 47.9621 67.182 47.9621 70.9757V106C48.6971 105.524 49.436 105.055 50.1956 104.616C57.5433 100.389 66.0654 97.9543 75.1538 97.9543C78.9753 97.9543 82.6127 97.158 85.9157 95.7395C92.2639 93.013 97.362 87.9551 100.11 81.6568C101.542 78.3782 102.343 74.7712 102.343 70.978C102.343 67.1843 101.54 63.5766 100.11 60.2975C99.9662 59.9667 99.8112 59.6417 99.654 59.3179C100.018 59.2251 100.373 59.1129 100.713 58.9672C102.369 58.2557 103.7 56.9357 104.417 55.2919C104.791 54.4364 105 53.4949 105 52.5051C105 51.5146 104.79 50.5732 104.417 49.7177Z",stroke:"#12130F","stroke-width":"3","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}),(0,st.jsx)("path",{d:"M61.158 65.5436C61.158 64.1616 60.0289 63.0414 58.6359 63.0414C57.2424 63.0414 56.1133 64.1616 56.1133 65.5436C56.1133 66.9257 57.2424 68.0459 58.6359 68.0459C60.0289 68.0459 61.158 66.9257 61.158 65.5436Z",fill:"#12130F"}),(0,st.jsx)("path",{d:"M94.4237 65.5436C94.4237 64.1616 93.2946 63.0414 91.9016 63.0414C90.508 63.0414 89.3789 64.1616 89.3789 65.5436C89.3789 66.9257 90.508 68.0459 91.9016 68.0459C93.2946 68.0459 94.4237 66.9257 94.4237 65.5436Z",fill:"#12130F"}),(0,st.jsx)("path",{d:"M73.9113 81.7154C74.641 82.617 76.0243 82.617 76.7541 81.7154L79.0937 78.8239L80.4758 77.1151C81.4328 75.9317 80.5837 74.1752 79.0541 74.1752H75.3329H71.6112C70.0816 74.1752 69.2325 75.9317 70.1895 77.1151L71.5716 78.8239L73.9113 81.7154Z",fill:"#12130F"}),(0,st.jsx)("path",{d:"M74.7617 86.2998H75.7577V80.0659H74.7617V86.2998Z",fill:"#12130F"}),(0,st.jsx)("path",{d:"M72.3765 85.0177C72.9405 85.4088 73.4322 85.6239 73.8934 85.7463C74.3536 85.867 74.7856 85.9012 75.2624 85.9063C75.7391 85.8989 76.1706 85.8647 76.6301 85.7446C77.0902 85.6222 77.5825 85.4077 78.1482 85.0177C78.2377 85.7139 77.886 86.4191 77.3209 86.899C76.7512 87.3839 75.9761 87.6162 75.2624 87.6133C74.5486 87.6139 73.7747 87.3817 73.205 86.8973C72.6404 86.4168 72.2893 85.7127 72.3765 85.0177Z",fill:"#12130F"})]})}),(0,st.jsx)("h5",{className:"title__h5",children:"\u041d\u0430\u0436\u0430\u043b\u044c, \u043a\u043e\u0448\u0438\u043a \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439"}),(0,st.jsx)("p",{className:"text",children:"\u0414\u043e\u0434\u0430\u0439\u0442\u0435 \u0449\u043e\u0441\u044c \u0441\u043c\u0430\u0447\u043d\u0435\u043d\u044c\u043a\u0435"})]}):(0,st.jsxs)("div",{className:"shopping-cart__content",children:[(0,st.jsxs)("div",{className:"shopping-cart__row",children:[(0,st.jsx)("h5",{className:"title__h5",children:"\u041a\u043e\u0448\u0438\u043a"}),(0,st.jsxs)("p",{className:"shopping-cart__products-count",children:[e.length," \u0442\u043e\u0432\u0430\u0440\u0456\u0432"]})]}),(0,st.jsx)("div",{className:"shopping-cart__list-wrapper",children:(0,st.jsx)("ul",{className:"shopping-cart__list",children:e.map((function(e){return(0,st.jsx)(yo,{preview:e.preview,name:e.name,price:e.totalPrice,weight:e.weight,count:e.count,id:e.id,cart_index:e.cart_index})}))})}),(0,st.jsxs)("div",{className:"shopping-cart__total",children:[(0,st.jsxs)("div",{className:"shopping-cart__total-row",children:[(0,st.jsx)("p",{className:"shopping-cart__text",children:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f:"}),(0,st.jsxs)("p",{className:"shopping-cart__text",children:[s," \u20b4"]})]}),(0,st.jsxs)("div",{className:"shopping-cart__total-row",children:[(0,st.jsx)("p",{className:"shopping-cart__text",children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430:"}),(0,st.jsx)("p",{className:"shopping-cart__text",children:s<500?"\u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e \u0442\u0430\u043a\u0441\u0456 (\u043e\u043f\u043b\u0430\u0447\u0443\u0454\u0442\u044c\u0441\u044f \u043e\u043a\u0440\u0435\u043c\u043e)":"\u0411\u0435\u0437\u043a\u043e\u0448\u0442\u043e\u0432\u043d\u0430"})]}),(0,st.jsxs)("div",{className:"shopping-cart__total-row",children:[(0,st.jsx)("p",{className:"shopping-cart__text-final",children:"\u0412\u0441\u044c\u043e\u0433\u043e \u0434\u043e \u0441\u043f\u043b\u0430\u0442\u0438:"}),(0,st.jsxs)("p",{className:"shopping-cart__text-final",children:[s," \u20b4"]})]})]}),(0,st.jsx)(Ya,{name:"\u0417\u0430\u043c\u043e\u0432\u0438\u0442\u0438",onClick:function(){s<200?(h(!0),setTimeout((function(){return h(!1)}),3e3)):(a(!i),t("/order"))},fullWide:!0})]})]})]})},wo=n(504),xo=n.n(wo),_o=function(e){return(0,st.jsxs)("label",{className:"inputNumber",htmlFor:"inputNumber",children:[(0,st.jsx)("span",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,st.jsx)(xo(),{value:e.inputValue&&e.inputValue,mask:"+380 (99) 999 99 99",id:"inputNumber",placeholder:"+380 (__) ___ __ __",onChange:function(t){return e.onChange(t.target.value)}})]})},So=function(e){var t=e.onData,n=l((0,r.useState)(""),2),i=n[0],a=n[1],o=(0,r.useRef)([]);(0,r.useEffect)((function(){t(i)}),[i]);return(0,st.jsx)("div",{className:"inputCode",children:Array.from({length:6}).map((function(e,t){return(0,st.jsx)("input",{autocomplete:"one-time-code",ref:function(e){return o.current[t]=e},type:"text",value:i[t]||"",maxLength:1,className:"inputCode__item",onChange:function(e){return function(e,t){var n=e.target.value,r=t+1;a((function(e){var i=e.split("");return i[t]=n,n&&o.current[r]&&o.current[r].focus(),i.join("")}))}(e,t)},onKeyDown:function(e){return function(e,t){var n=t-1,r=t+1;"Backspace"===e.key&&n>=0?o.current[n].focus():"Delete"===e.key&&r<o.current.length&&o.current[r].focus()}(e,t)}},t)}))})},Eo=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Co={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Eo(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new Io;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Io=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return g(n)}(E(Error)),To=function(e){return function(e){var t=Eo(e);return Co.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Lo=function(e){try{return Co.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function No(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=No(e[n],t[n]));return e}var Po=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Oo=function(){try{return Po()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Lo(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ao=function(){var e;return null===(e=Oo())||void 0===e?void 0:e.config},jo=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return g(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Do(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Mo(){var e,t=null===(e=Oo())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Ro(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Fo(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Uo(){var e=Do();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Vo(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Bo=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(x(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(x(a),zo.prototype.create),a}return g(n)}(E(Error)),zo=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return g(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(qo,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Bo(n,a,t)}}]),e}();var qo=/\{\$([^}]+)}/g;function Wo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ho(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Go(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Ko(s)&&Ko(u)){if(!Go(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ko(e){return null!==e&&"object"===typeof e}function Qo(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Jo(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Zo(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Yo(e,t){var n=new $o(e,t);return n.subscribe.bind(n)}var $o=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return g(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=I(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Xo),void 0===r.error&&(r.error=Xo),void 0===r.complete&&(r.complete=Xo);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Xo(){}function es(e){return e&&e._delegate?e._delegate:e}var ts=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return g(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ns="[DEFAULT]",rs=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return g(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new jo;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch(u){}var t,n=I(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ns;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ns;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ns;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=I(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(NN){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ns?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(NN){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ns;return this.component?this.component.multipleInstances?e:ns:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var is,as,os=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return g(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new rs(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ss=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(as||(as={}));var us={debug:as.DEBUG,verbose:as.VERBOSE,info:as.INFO,warn:as.WARN,error:as.ERROR,silent:as.SILENT},cs=as.INFO,ls=(Tt(is={},as.DEBUG,"log"),Tt(is,as.VERBOSE,"log"),Tt(is,as.INFO,"info"),Tt(is,as.WARN,"warn"),Tt(is,as.ERROR,"error"),is),fs=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ls[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},hs=function(){function e(t){d(this,e),this.name=t,this._logLevel=cs,this._logHandler=fs,this._userLogHandler=null,ss.push(this)}return g(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in as))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?us[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,as.DEBUG].concat(t)),this._logHandler.apply(this,[this,as.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,as.VERBOSE].concat(t)),this._logHandler.apply(this,[this,as.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,as.INFO].concat(t)),this._logHandler.apply(this,[this,as.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,as.WARN].concat(t)),this._logHandler.apply(this,[this,as.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,as.ERROR].concat(t)),this._logHandler.apply(this,[this,as.ERROR].concat(t))}}]),e}();var ds,ps,vs=function(e,t){return t.some((function(t){return e instanceof t}))};var ms=new WeakMap,gs=new WeakMap,ys=new WeakMap,ks=new WeakMap,bs=new WeakMap;var ws={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return gs.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ys.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ss(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function xs(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ps||(ps=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Es(this),n),Ss(ms.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ss(e.apply(Es(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Es(this),t].concat(r));return ys.set(a,t.sort?t.sort():[t]),Ss(a)}}function _s(e){return"function"===typeof e?xs(e):(e instanceof IDBTransaction&&function(e){if(!gs.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));gs.set(e,t)}}(e),vs(e,ds||(ds=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ws):e)}function Ss(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ss(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ms.set(t,e)})).catch((function(){})),bs.set(t,e),t}(e);if(ks.has(e))return ks.get(e);var t=_s(e);return t!==e&&(ks.set(e,t),bs.set(t,e)),t}var Es=function(e){return bs.get(e)};var Cs,Is,Ts=["get","getKey","getAll","getAllKeys","count"],Ls=["put","add","delete","clear"],Ns=new Map;function Ps(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ns.get(t))return Ns.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ls.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ts.includes(n))){var a=function(){var e=It(Et().mark((function e(t){var a,o,s,u,c,l,f=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ns.set(t,a),a}}}ws=function(e){return Nt(Nt({},e),{},{get:function(t,n,r){return Ps(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ps(t,n)||e.has(t,n)}})}(ws);var Os=function(){function e(t){d(this,e),this.container=t}return g(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var As="@firebase/app",js="0.9.12",Ds=new hs("@firebase/app"),Ms="[DEFAULT]",Rs=(Tt(Cs={},As,"fire-core"),Tt(Cs,"@firebase/app-compat","fire-core-compat"),Tt(Cs,"@firebase/analytics","fire-analytics"),Tt(Cs,"@firebase/analytics-compat","fire-analytics-compat"),Tt(Cs,"@firebase/app-check","fire-app-check"),Tt(Cs,"@firebase/app-check-compat","fire-app-check-compat"),Tt(Cs,"@firebase/auth","fire-auth"),Tt(Cs,"@firebase/auth-compat","fire-auth-compat"),Tt(Cs,"@firebase/database","fire-rtdb"),Tt(Cs,"@firebase/database-compat","fire-rtdb-compat"),Tt(Cs,"@firebase/functions","fire-fn"),Tt(Cs,"@firebase/functions-compat","fire-fn-compat"),Tt(Cs,"@firebase/installations","fire-iid"),Tt(Cs,"@firebase/installations-compat","fire-iid-compat"),Tt(Cs,"@firebase/messaging","fire-fcm"),Tt(Cs,"@firebase/messaging-compat","fire-fcm-compat"),Tt(Cs,"@firebase/performance","fire-perf"),Tt(Cs,"@firebase/performance-compat","fire-perf-compat"),Tt(Cs,"@firebase/remote-config","fire-rc"),Tt(Cs,"@firebase/remote-config-compat","fire-rc-compat"),Tt(Cs,"@firebase/storage","fire-gcs"),Tt(Cs,"@firebase/storage-compat","fire-gcs-compat"),Tt(Cs,"@firebase/firestore","fire-fst"),Tt(Cs,"@firebase/firestore-compat","fire-fst-compat"),Tt(Cs,"fire-js","fire-js"),Tt(Cs,"firebase","fire-js-all"),Cs),Fs=new Map,Us=new Map;function Vs(e,t){try{e.container.addComponent(t)}catch(n){Ds.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Bs(e,t){e.container.addOrOverwriteComponent(t)}function zs(e){var t=e.name;if(Us.has(t))return Ds.debug("There were multiple attempts to register component ".concat(t,".")),!1;Us.set(t,e);var n,r=I(Fs.values());try{for(r.s();!(n=r.n()).done;){Vs(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function qs(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ws(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ms;qs(e,t).clearInstance(n)}function Hs(){Us.clear()}var Gs=(Tt(Is={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Tt(Is,"bad-app-name","Illegal App name: '{$appName}"),Tt(Is,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Tt(Is,"app-deleted","Firebase App named '{$appName}' already deleted"),Tt(Is,"no-options","Need to provide options, when not being deployed to hosting via source."),Tt(Is,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Tt(Is,"invalid-log-argument","First argument to `onLog` must be null or a function."),Tt(Is,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Tt(Is,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Tt(Is,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Tt(Is,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Is),Ks=new zo("app","Firebase",Gs),Qs=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",(function(){return i}),"PUBLIC"))}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}]),e}(),Js="9.22.2";function Zs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Ms,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ks.create("bad-app-name",{appName:String(i)});if(n||(n=Ao()),!n)throw Ks.create("no-options");var a=Fs.get(i);if(a){if(Go(n,a.options)&&Go(r,a.config))return a;throw Ks.create("duplicate-app",{appName:i})}var o,s=new os(i),u=I(Us.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new Qs(n,r,s);return Fs.set(i,l),l}function Ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ms,t=Fs.get(e);if(!t&&e===Ms&&Ao())return Zs();if(!t)throw Ks.create("no-app",{appName:e});return t}function $s(){return Array.from(Fs.values())}function Xs(e){return eu.apply(this,arguments)}function eu(){return eu=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Fs.has(n)){e.next=6;break}return Fs.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(e,t,n){var r,i=null!==(r=Rs[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ds.warn(s.join(" "))}zs(new ts("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function nu(e,t){if(null!==e&&"function"!==typeof e)throw Ks.create("invalid-log-argument");!function(e,t){var n,r=I(ss);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=us[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:as[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ru(e){var t;t=e,ss.forEach((function(e){e.setLogLevel(t)}))}var iu="firebase-heartbeat-database",au=1,ou="firebase-heartbeat-store",su=null;function uu(){return su||(su=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Ss(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Ss(s.result),e.oldVersion,e.newVersion,Ss(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(iu,au,{upgrade:function(e,t){if(0===t)e.createObjectStore(ou)}}).catch((function(e){throw Ks.create("idb-open",{originalErrorMessage:e.message})}))),su}function cu(e){return lu.apply(this,arguments)}function lu(){return lu=It(Et().mark((function e(t){var n,r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,uu();case 3:return n=e.sent,e.next=6,n.transaction(ou).objectStore(ou).get(du(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Bo?Ds.warn(e.t0.message):(i=Ks.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ds.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),lu.apply(this,arguments)}function fu(e,t){return hu.apply(this,arguments)}function hu(){return hu=It(Et().mark((function e(t,n){var r,i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,uu();case 3:return r=e.sent,i=r.transaction(ou,"readwrite"),a=i.objectStore(ou),e.next=8,a.put(n,du(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Bo?Ds.warn(e.t0.message):(o=Ks.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ds.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),hu.apply(this,arguments)}function du(e){return"".concat(e.name,"!").concat(e.options.appId)}var pu=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ku(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return g(e,[{key:"triggerHeartbeat",value:function(){var e=It(Et().mark((function e(){var t,n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=vu(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=It(Et().mark((function e(){var t,n,r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=vu(),n=mu(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=To(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vu(){return(new Date).toISOString().substring(0,10)}function mu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=I(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),bu(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),bu(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var gu,yu,ku=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return g(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vo()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,cu(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",fu(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",fu(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function bu(e){return To(JSON.stringify({version:2,heartbeats:e})).length}gu="",zs(new ts("platform-logger",(function(e){return new Os(e)}),"PRIVATE")),zs(new ts("heartbeat",(function(e){return new pu(e)}),"PRIVATE")),tu(As,js,gu),tu(As,js,"esm2017"),tu("fire-js","");var wu=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,Vs(t,new ts("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Xs(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ms;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ms;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Vs(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Bs(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),xu=(Tt(yu={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Tt(yu,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),yu),_u=new zo("app-compat","Firebase",xu);var Su=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Zs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Wo(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:tu,setLogLevel:ru,onLog:nu,apps:null,SDK_VERSION:Js,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(zs(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw _u.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&No(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Wo(n,e=e||Ms))throw _u.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(wu);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){No(n,e)},createSubscribe:Yo,ErrorFactory:zo,deepExtend:No}),n}(),Eu=new hs("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Eu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Cu=self.firebase.SDK_VERSION;Cu&&Cu.indexOf("LITE")>=0&&Eu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Iu=Su;!function(e){tu("@firebase/app-compat","0.2.12",e)}();function Tu(){return Tu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Tu.apply(this,arguments)}Iu.registerVersion("firebase","9.22.2","app-compat");function Lu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var Nu,Pu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ou="EMAIL_SIGNIN",Au="PASSWORD_RESET",ju="RECOVER_EMAIL",Du="REVERT_SECOND_FACTOR_ADDITION",Mu="VERIFY_AND_CHANGE_EMAIL",Ru="VERIFY_EMAIL";function Fu(){return Tt({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Uu=function(){var e;return Tt(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Tt(e,"argument-error",""),Tt(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Tt(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Tt(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Tt(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Tt(e,"cordova-not-ready","Cordova framework is not ready."),Tt(e,"cors-unsupported","This browser is not supported."),Tt(e,"credential-already-in-use","This credential is already associated with a different user account."),Tt(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Tt(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Tt(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Tt(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Tt(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Tt(e,"email-already-in-use","The email address is already in use by another account."),Tt(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Tt(e,"expired-action-code","The action code has expired."),Tt(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Tt(e,"internal-error","An internal AuthError has occurred."),Tt(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Tt(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Tt(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Tt(e,"invalid-auth-event","An internal AuthError has occurred."),Tt(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Tt(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Tt(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Tt(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Tt(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Tt(e,"invalid-email","The email address is badly formatted."),Tt(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Tt(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Tt(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Tt(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Tt(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Tt(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Tt(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Tt(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Tt(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Tt(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Tt(e,"wrong-password","The password is invalid or the user does not have a password."),Tt(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Tt(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Tt(e,"invalid-provider-id","The specified provider ID is invalid."),Tt(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Tt(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Tt(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Tt(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Tt(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Tt(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Tt(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Tt(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Tt(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Tt(e,"missing-continue-uri","A continue URL must be provided in the request."),Tt(e,"missing-iframe-start","An internal AuthError has occurred."),Tt(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Tt(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Tt(e,"missing-password","A non-empty password must be provided"),Tt(e,"missing-multi-factor-info","No second factor identifier is provided."),Tt(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Tt(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Tt(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Tt(e,"app-deleted","This instance of FirebaseApp has been deleted."),Tt(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Tt(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Tt(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Tt(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Tt(e,"no-auth-event","An internal AuthError has occurred."),Tt(e,"no-such-provider","User was not linked to an account with the given provider."),Tt(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Tt(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Tt(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Tt(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Tt(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Tt(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Tt(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Tt(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Tt(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Tt(e,"rejected-credential","The request contains malformed or mismatching credentials."),Tt(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Tt(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Tt(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Tt(e,"timeout","The operation has timed out."),Tt(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Tt(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Tt(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Tt(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Tt(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Tt(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Tt(e,"unverified-email","The operation requires a verified email."),Tt(e,"user-cancelled","The user did not grant your application the permissions it requested."),Tt(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Tt(e,"user-disabled","The user account has been disabled by an administrator."),Tt(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Tt(e,"user-signed-out",""),Tt(e,"weak-password","The password must be 6 characters long or more."),Tt(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Tt(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Tt(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Tt(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Tt(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Tt(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Tt(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Tt(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Tt(e,"invalid-req-type","Invalid request parameters."),Tt(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},Vu=Fu,Bu=new zo("auth","Firebase",Fu()),zu=new hs("@firebase/auth");function qu(e){if(zu.logLevel<=as.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zu.warn.apply(zu,["Auth (".concat(Js,"): ").concat(e)].concat(n))}}function Wu(e){if(zu.logLevel<=as.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zu.error.apply(zu,["Auth (".concat(Js,"): ").concat(e)].concat(n))}}function Hu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ju.apply(void 0,[e].concat(n))}function Gu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ju.apply(void 0,[e].concat(n))}function Ku(e,t,n){var r=Object.assign(Object.assign({},Vu()),Tt({},t,n));return new zo("auth","Firebase",r).create(t,{appName:e.name})}function Qu(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Hu(e,"argument-error"),Ku(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ju(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return Bu.create.apply(Bu,[e].concat(n))}function Zu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ju.apply(void 0,[t].concat(r))}}function Yu(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Wu(t),new Error(t)}function $u(e,t){e||Yu(t)}function Xu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ec(){return"http:"===tc()||"https:"===tc()}function tc(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var nc=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,$u(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Do())||Fo()}return g(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ec()||Ro()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function rc(e,t){$u(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ic=function(){function e(){d(this,e)}return g(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Yu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Yu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Yu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ac=(Tt(Nu={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Tt(Nu,"MISSING_CUSTOM_TOKEN","internal-error"),Tt(Nu,"INVALID_IDENTIFIER","invalid-email"),Tt(Nu,"MISSING_CONTINUE_URI","internal-error"),Tt(Nu,"INVALID_PASSWORD","wrong-password"),Tt(Nu,"MISSING_PASSWORD","missing-password"),Tt(Nu,"EMAIL_EXISTS","email-already-in-use"),Tt(Nu,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Tt(Nu,"INVALID_IDP_RESPONSE","invalid-credential"),Tt(Nu,"INVALID_PENDING_TOKEN","invalid-credential"),Tt(Nu,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Tt(Nu,"MISSING_REQ_TYPE","internal-error"),Tt(Nu,"EMAIL_NOT_FOUND","user-not-found"),Tt(Nu,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Tt(Nu,"EXPIRED_OOB_CODE","expired-action-code"),Tt(Nu,"INVALID_OOB_CODE","invalid-action-code"),Tt(Nu,"MISSING_OOB_CODE","internal-error"),Tt(Nu,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Tt(Nu,"INVALID_ID_TOKEN","invalid-user-token"),Tt(Nu,"TOKEN_EXPIRED","user-token-expired"),Tt(Nu,"USER_NOT_FOUND","user-token-expired"),Tt(Nu,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Tt(Nu,"INVALID_CODE","invalid-verification-code"),Tt(Nu,"INVALID_SESSION_INFO","invalid-verification-id"),Tt(Nu,"INVALID_TEMPORARY_PROOF","invalid-credential"),Tt(Nu,"MISSING_SESSION_INFO","missing-verification-id"),Tt(Nu,"SESSION_EXPIRED","code-expired"),Tt(Nu,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Tt(Nu,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Tt(Nu,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Tt(Nu,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Tt(Nu,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Tt(Nu,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Tt(Nu,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Tt(Nu,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Tt(Nu,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Tt(Nu,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Tt(Nu,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Tt(Nu,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Tt(Nu,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Tt(Nu,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Tt(Nu,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Tt(Nu,"MISSING_CLIENT_TYPE","missing-client-type"),Tt(Nu,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Tt(Nu,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Tt(Nu,"INVALID_REQ_TYPE","invalid-req-type"),Nu),oc=new nc(3e4,6e4);function sc(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function uc(e,t,n,r){return cc.apply(this,arguments)}function cc(){return cc=It(Et().mark((function e(t,n,r,i){var a,o=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",lc(t,a,It(Et().mark((function e(){var a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Qo(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ic.fetch()(pc(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),cc.apply(this,arguments)}function lc(e,t,n){return fc.apply(this,arguments)}function fc(){return fc=It(Et().mark((function e(t,n,r){var i,a,o,s,u,c,f,h,d,p;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ac),n),e.prev=2,a=new vc(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw mc(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),f=l(c,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw mc(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw mc(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw mc(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Ku(t,p,d);case 34:Hu(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Bo)){e.next=41;break}throw e.t0;case 41:Hu(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),fc.apply(this,arguments)}function hc(e,t,n,r){return dc.apply(this,arguments)}function dc(){return dc=It(Et().mark((function e(t,n,r,i){var a,o,s=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,uc(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Hu(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function pc(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?rc(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var vc=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Gu(n.auth,"network-request-failed"))}),oc.get())}))}return g(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function mc(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Gu(e,t,r);return i.customData._tokenResponse=n,i}function gc(e,t){return yc.apply(this,arguments)}function yc(){return(yc=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kc(e,t){return bc.apply(this,arguments)}function bc(){return(bc=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wc(e,t){return xc.apply(this,arguments)}function xc(){return(xc=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _c(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Sc(){return Sc=It(Et().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=es(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Zu((a=Cc(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:_c(Ec(a.auth_time)),issuedAtTime:_c(Ec(a.iat)),expirationTime:_c(Ec(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}function Ec(e){return 1e3*Number(e)}function Cc(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{var a=Lo(r);return a?JSON.parse(a):(Wu("Failed to decode base64 JWT payload"),null)}catch(o){return Wu("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Ic(e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=It(Et().mark((function e(t,n){var r=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Bo&&Lc(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Tc.apply(this,arguments)}function Lc(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Nc=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return g(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(It(Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Pc=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return g(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Oc(e){return Ac.apply(this,arguments)}function Ac(){return Ac=It(Et().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ic(t,wc(r,{idToken:i}));case 6:Zu(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Lu(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=Dc(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Pc(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Ac.apply(this,arguments)}function jc(){return jc=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=es(t),e.next=3,Oc(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)}))),jc.apply(this,arguments)}function Dc(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function Mc(e,t){return Rc.apply(this,arguments)}function Rc(){return Rc=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lc(t,{},It(Et().mark((function e(){var r,i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qo({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=pc(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ic.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Rc.apply(this,arguments)}var Fc=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return g(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Zu(e.idToken,"internal-error"),Zu("undefined"!==typeof e.idToken,"internal-error"),Zu("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Cc(e);return Zu(t,"internal-error"),Zu("undefined"!==typeof t.exp,"internal-error"),Zu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=It(Et().mark((function e(t){var n,r=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Zu(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=It(Et().mark((function e(t,n){var r,i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mc(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Yu("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Zu("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Zu("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Zu("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Uc(e,t){Zu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Vc=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Lu(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new Pc(a.createdAt||void 0,a.lastLoginAt||void 0)}return g(e,[{key:"getIdToken",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ic(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Zu(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Sc.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return jc.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Zu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Zu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=It(Et().mark((function e(t){var n,r,i=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Oc(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ic(this,gc(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Zu(k&&_,t,"internal-error");var S=Fc.fromJSON(this.name,_);Zu("string"===typeof k,t,"internal-error"),Uc(f,t.name),Uc(h,t.name),Zu("boolean"===typeof b,t,"internal-error"),Zu("boolean"===typeof w,t,"internal-error"),Uc(d,t.name),Uc(p,t.name),Uc(v,t.name),Uc(m,t.name),Uc(g,t.name),Uc(y,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=It(Et().mark((function t(n,r){var i,a,o,s=arguments;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Fc).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Oc(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Bc=new Map;function zc(e){$u(e instanceof Function,"Expected a class definition");var t=Bc.get(e);return t?($u(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bc.set(e,t),t)}var qc=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return g(e,[{key:"_isAvailable",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();qc.type="NONE";var Wc=qc;function Hc(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Gc=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Hc(this.userKey,a.apiKey,o),this.fullPersistenceKey=Hc("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return g(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Vc._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=It(Et().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(zc(Wc),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||zc(Wc),s=Hc(i,n.config.apiKey,n.name),u=null,c=I(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=Vc._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Kc(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Yc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Qc(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xc(t))return"Blackberry";if(el(t))return"Webos";if(Jc(t))return"Safari";if((t.includes("chrome/")||Zc(t))&&!t.includes("edge/"))return"Chrome";if($c(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Qc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return/firefox\//i.test(e)}function Jc(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return/crios\//i.test(e)}function Yc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return/iemobile/i.test(e)}function $c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return/android/i.test(e)}function Xc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return/blackberry/i.test(e)}function el(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return/webos/i.test(e)}function tl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return tl(e)||$c(e)||el(e)||Xc(e)||/windows phone/i.test(e)||Yc(e)}function rl(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Kc(Do());break;case"Worker":t="".concat(Kc(Do()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Js,"/").concat(r)}function il(e){return al.apply(this,arguments)}function al(){return(al=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ol(e,t){return sl.apply(this,arguments)}function sl(){return(sl=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"GET","/v2/recaptchaConfig",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ul(e){return void 0!==e&&void 0!==e.getResponse}function cl(e){return void 0!==e&&void 0!==e.enterprise}var ll=g((function e(t){if(d(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function fl(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Gu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function hl(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var dl=function(){function e(t){d(this,e),this.type="recaptcha-enterprise",this.auth=yl(t)}return g(e,[{key:"verify",value:function(){var e=It(Et().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;cl(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=It(Et().mark((function e(n,r){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ol(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new ll(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&cl(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));fl("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function pl(e,t,n){return vl.apply(this,arguments)}function vl(){return vl=It(Et().mark((function e(t,n,r){var i,a,o,s,u=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new dl(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),vl.apply(this,arguments)}var ml=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return g(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=It(Et().mark((function e(t){var n,r,i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=I(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=I(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(Hr){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),gl=function(){function e(t,n,r,i){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kl(this),this.idTokenSubscription=new kl(this),this.beforeStateQueue=new ml(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return g(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=zc(t)),this._initializationPromise=this.queue(It(Et().mark((function r(){var i,a;return Et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Gc.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=It(Et().mark((function e(t){var n,r,i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Zu(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oc(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?es(t):null)&&Zu(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=It(Et().mark((function e(t){var n,r=this,i=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Zu(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(It(Et().mark((function n(){return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(zc(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=It(Et().mark((function e(){var t,n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new ll(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new dl(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new zo("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Zu(n=t&&zc(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Gc.create(this,[zc(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=It(Et().mark((function e(t){var n=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Zu(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Zu(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rl(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=It(Et().mark((function e(){var t,n,r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Tt({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=It(Et().mark((function e(){var t,n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&qu("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function yl(e){return es(e)}var kl=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=Yo((function(e){return n.observer=e}))}return g(e,[{key:"next",get:function(){return Zu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function bl(e,t,n){var r=yl(e);Zu(r._canInitEmulator,r,"emulator-config-failed"),Zu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=wl(t),o=function(e){var t=wl(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:xl(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:xl(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function wl(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xl(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var _l=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return g(e,[{key:"toJSON",value:function(){return Yu("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Yu("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Yu("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Yu("not implemented")}}]),e}();function Sl(e,t){return El.apply(this,arguments)}function El(){return(El=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:resetPassword",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cl(e,t){return Il.apply(this,arguments)}function Il(){return(Il=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tl(e,t){return Ll.apply(this,arguments)}function Ll(){return(Ll=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:update",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nl(e,t){return Pl.apply(this,arguments)}function Pl(){return(Pl=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hc(t,"POST","/v1/accounts:signInWithPassword",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ol(e,t){return Al.apply(this,arguments)}function Al(){return(Al=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:sendOobCode",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jl(e,t){return Dl.apply(this,arguments)}function Dl(){return(Dl=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ol(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ml(e,t){return Rl.apply(this,arguments)}function Rl(){return(Rl=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ol(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fl(e,t){return Ul.apply(this,arguments)}function Ul(){return(Ul=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ol(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vl(e,t){return Bl.apply(this,arguments)}function Bl(){return(Bl=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ol(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zl(e,t){return ql.apply(this,arguments)}function ql(){return(ql=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hc(t,"POST","/v1/accounts:signInWithEmailLink",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wl(e,t){return Hl.apply(this,arguments)}function Hl(){return(Hl=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hc(t,"POST","/v1/accounts:signInWithEmailLink",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gl=function(e){k(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return g(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=It(Et().mark((function e(t){var n,r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,pl(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Nl(t,i));case 11:return e.abrupt("return",Nl(t,r).catch(function(){var e=It(Et().mark((function e(n){var i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,pl(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Nl(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",zl(t,{email:this._email,oobCode:this._password}));case 13:Hu(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Cl(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Wl(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Hu(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(_l);function Kl(e,t){return Ql.apply(this,arguments)}function Ql(){return(Ql=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hc(t,"POST","/v1/accounts:signInWithIdp",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jl=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return g(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Kl(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Kl(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Kl(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qo(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hu("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Lu(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(_l);function Zl(e,t){return Yl.apply(this,arguments)}function Yl(){return(Yl=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:sendVerificationCode",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $l(){return($l=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hc(t,"POST","/v1/accounts:signInWithPhoneNumber",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xl(){return(Xl=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hc(t,"POST","/v1/accounts:signInWithPhoneNumber",sc(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw mc(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ef=Tt({},"USER_NOT_FOUND","user-not-found");function tf(){return(tf=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",hc(t,"POST","/v1/accounts:signInWithPhoneNumber",sc(t,r),ef));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nf=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return $l.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Xl.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return tf.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(_l);var rf=function(){function e(t){var n,r,i,a,o,s;d(this,e);var u=Jo(Zo(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Zu(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return g(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Jo(Zo(e)).link,n=t?Jo(Zo(t)).deep_link_id:null,r=Jo(Zo(e)).deep_link_id;return(r?Jo(Zo(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(NN){return null}}}]),e}();var af=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return g(e,null,[{key:"credential",value:function(e,t){return Gl._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=rf.parseLink(t);return Zu(n,"argument-error"),Gl._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();af.PROVIDER_ID="password",af.EMAIL_PASSWORD_SIGN_IN_METHOD="password",af.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var of=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return g(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),sf=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return g(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(of),uf=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Zu(e.idToken||e.accessToken,"argument-error"),Jl._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Zu("providerId"in t&&"signInMethod"in t,"argument-error"),Jl._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(sf),cf=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"facebook.com")}return g(n,null,[{key:"credential",value:function(e){return Jl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(NN){return null}}}]),n}(sf);cf.FACEBOOK_SIGN_IN_METHOD="facebook.com",cf.PROVIDER_ID="facebook.com";var lf=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return g(n,null,[{key:"credential",value:function(e,t){return Jl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(NN){return null}}}]),n}(sf);lf.GOOGLE_SIGN_IN_METHOD="google.com",lf.PROVIDER_ID="google.com";var ff=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"github.com")}return g(n,null,[{key:"credential",value:function(e){return Jl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(NN){return null}}}]),n}(sf);ff.GITHUB_SIGN_IN_METHOD="github.com",ff.PROVIDER_ID="github.com";var hf=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return g(n,[{key:"_getIdTokenResponse",value:function(e){return Kl(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Kl(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Kl(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(_l),df=function(e){k(n,e);var t=_(n);function n(e){return d(this,n),Zu(e.startsWith("saml."),"argument-error"),t.call(this,e)}return g(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=hf.fromJSON(e);return Zu(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return hf._create(r,n)}catch(i){return null}}}]),n}(of),pf=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"twitter.com")}return g(n,null,[{key:"credential",value:function(e,t){return Jl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(NN){return null}}}]),n}(sf);function vf(e,t){return mf.apply(this,arguments)}function mf(){return(mf=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hc(t,"POST","/v1/accounts:signUp",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}pf.TWITTER_SIGN_IN_METHOD="twitter.com",pf.PROVIDER_ID="twitter.com";var gf=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return g(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=It(Et().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Vc._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=yf(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=It(Et().mark((function t(n,r,i){var a;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=yf(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function yf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function kf(){return kf=It(Et().mark((function e(t){var n,r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yl(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new gf({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,vf(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,gf._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),kf.apply(this,arguments)}var bf=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o,s;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(x(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return g(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Bo);function wf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw bf._fromErrorAndOperation(e,n,t,r);throw n}))}function xf(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function _f(e,t){return Sf.apply(this,arguments)}function Sf(){return Sf=It(Et().mark((function e(t,n){var r,i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=es(t),e.next=3,If(!0,r,n);case 3:return e.t0=kc,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=xf(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Sf.apply(this,arguments)}function Ef(e,t){return Cf.apply(this,arguments)}function Cf(){return Cf=It(Et().mark((function e(t,n){var r,i,a=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ic,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",gf._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function If(e,t,n){return Tf.apply(this,arguments)}function Tf(){return Tf=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oc(n);case 2:i=xf(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Zu(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),Tf.apply(this,arguments)}function Lf(e,t){return Nf.apply(this,arguments)}function Nf(){return Nf=It(Et().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ic(t,wf(i,a,n,t),r);case 6:return Zu((o=e.sent).idToken,i,"internal-error"),Zu(s=Cc(o.idToken),i,"internal-error"),u=s.sub,Zu(t.uid===u,i,"user-mismatch"),e.abrupt("return",gf._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Hu(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Nf.apply(this,arguments)}function Pf(e,t){return Of.apply(this,arguments)}function Of(){return Of=It(Et().mark((function e(t,n){var r,i,a,o,s=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,wf(t,i,n);case 4:return a=e.sent,e.next=7,gf._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Of.apply(this,arguments)}function Af(e,t){return jf.apply(this,arguments)}function jf(){return(jf=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pf(yl(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Df(e,t){return Mf.apply(this,arguments)}function Mf(){return Mf=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=es(t),e.next=3,If(!1,r,n.providerId);case 3:return e.abrupt("return",Ef(r,n));case 4:case"end":return e.stop()}}),e)}))),Mf.apply(this,arguments)}function Rf(e,t){return Ff.apply(this,arguments)}function Ff(){return Ff=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lf(es(t),n));case 1:case"end":return e.stop()}}),e)}))),Ff.apply(this,arguments)}function Uf(e,t){return Vf.apply(this,arguments)}function Vf(){return(Vf=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hc(t,"POST","/v1/accounts:signInWithCustomToken",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bf(){return(Bf=It(Et().mark((function e(t,n){var r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yl(t),e.next=3,Uf(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,gf._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zf=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return g(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?qf._fromServerResponse(e,t):"totpInfo"in t?Wf._fromServerResponse(e,t):Hu(e,"internal-error")}}]),e}(),qf=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(zf),Wf=function(e){k(n,e);var t=_(n);function n(e){return d(this,n),t.call(this,"totp",e)}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(zf);function Hf(e,t,n){var r;Zu((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Zu("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Zu(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Zu(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Gf(){return Gf=It(Et().mark((function e(t,n,r){var i,a,o,s;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=yl(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,pl(a,o,"getOobCode",!0);case 5:return s=e.sent,r&&Hf(a,s,r),e.next=9,Ml(a,s);case 9:e.next=14;break;case 11:return r&&Hf(a,o,r),e.next=14,Ml(a,o).catch(function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,pl(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&Hf(a,n,r),e.next=8,Ml(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),Gf.apply(this,arguments)}function Kf(){return(Kf=It(Et().mark((function e(t,n,r){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sl(es(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qf(){return(Qf=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tl(es(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jf(e,t){return Zf.apply(this,arguments)}function Zf(){return(Zf=It(Et().mark((function e(t,n){var r,i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=es(t),e.next=3,Sl(r,{oobCode:n});case 3:i=e.sent,Zu(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Zu(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Zu(i.mfaInfo,r,"internal-error");case 13:Zu(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=zf._fromServerResponse(yl(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yf(){return(Yf=It(Et().mark((function e(t,n){var r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jf(es(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $f(e,t,n){return Xf.apply(this,arguments)}function Xf(){return Xf=It(Et().mark((function e(t,n,r){var i,a,o,s,u,c,l;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=yl(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,pl(a,o,"signUpPassword");case 5:u=e.sent,s=vf(a,u),e.next=10;break;case 9:s=vf(a,o).catch(function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,pl(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",vf(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,gf._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Xf.apply(this,arguments)}function eh(){return eh=It(Et().mark((function e(t,n,r){var i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e,t){Zu(t.handleCodeInApp,a,"argument-error"),t&&Hf(a,e,t)},a=yl(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,pl(a,o,"getOobCode",!0);case 6:return u=e.sent,s(u,r),e.next=10,Fl(a,u);case 10:e.next=15;break;case 12:return s(o,r),e.next=15,Fl(a,o).catch(function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,pl(a,o,"getOobCode",!0);case 4:return n=e.sent,s(n,r),e.next=8,Fl(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),eh.apply(this,arguments)}function th(){return(th=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=es(t),Zu((a=af.credentialWithLink(n,r||Xu()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Af(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nh(e,t){return rh.apply(this,arguments)}function rh(){return(rh=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:createAuthUri",sc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ih(){return(ih=It(Et().mark((function e(t,n){var r,i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ec()?Xu():"http://localhost",i={identifier:n,continueUri:r},e.next=4,nh(es(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ah(){return ah=It(Et().mark((function e(t,n){var r,i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=es(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Hf(r.auth,a,n),e.next=8,jl(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)}))),ah.apply(this,arguments)}function oh(){return oh=It(Et().mark((function e(t,n,r){var i,a,o,s;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=es(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Hf(i.auth,o,r),e.next=8,Vl(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)}))),oh.apply(this,arguments)}function sh(e,t){return uh.apply(this,arguments)}function uh(){return(uh=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ch(){return ch=It(Et().mark((function e(t,n){var r,i,a,o,s,u,c;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=es(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ic(a,sh(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)}))),ch.apply(this,arguments)}function lh(e,t,n){return fh.apply(this,arguments)}function fh(){return fh=It(Et().mark((function e(t,n,r){var i,a,o,s;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ic(t,Cl(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),fh.apply(this,arguments)}var hh=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),dh=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return g(n)}(hh),ph=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return g(n)}(hh),vh=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return g(n)}(dh),mh=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return g(n)}(hh),gh=function(e){k(n,e);var t=_(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return g(n)}(dh);function yh(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Cc(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new hh(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ph(a,i);case"github.com":return new vh(a,i);case"google.com":return new mh(a,i);case"twitter.com":return new gh(a,i,e.screenName||null);case"custom":case"anonymous":return new hh(a,null);default:return new hh(a,r,i)}}(n)}var kh=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.auth=r}return g(e,[{key:"toJSON",value:function(){return{multiFactorSession:Tt({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),bh=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return g(e,[{key:"resolveSignIn",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=yl(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return zf._fromServerResponse(r,e)}));Zu(i.mfaPendingCredential,r,"internal-error");var o=kh._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=It(Et().mark((function e(t){var a,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,gf._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return Zu(n.user,r,"internal-error"),e.abrupt("return",gf._forOperation(n.user,n.operationType,s));case 17:Hu(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function wh(e,t){return uc(e,"POST","/v2/accounts/mfaEnrollment:start",sc(e,t))}function xh(e,t){return uc(e,"POST","/v2/accounts/mfaEnrollment:finalize",sc(e,t))}var _h=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return zf._fromServerResponse(t.auth,e)})))}))}return g(e,[{key:"getSession",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=kh,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=It(Et().mark((function e(t,n){var r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ic(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=It(Et().mark((function e(t){var n,r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Ic(this.user,uc(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",sc(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Sh=new WeakMap;var Eh="__sak",Ch=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return g(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch(NN){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ih=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Do();return Jc(e)||tl(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=nl(),e._shouldAllowMigration=!0,e}return g(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Uo()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=It(Et().mark((function e(t,r){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tu(b(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=It(Et().mark((function e(t){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tu(b(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tu(b(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ch);Ih.type="LOCAL";var Th=Ih,Lh=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return g(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ch);Lh.type="SESSION";var Nh=Lh;function Ph(e){return Promise.all(e.map(function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Oh=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return g(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=It(Et().mark((function e(t){var n,r,i,a,o,s,u,c;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ph(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ah(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Oh.receivers=[];var jh=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return g(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=It(Et().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Ah("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Dh(){return window}function Mh(e){Dh().location.href=e}function Rh(){return"undefined"!==typeof Dh().WorkerGlobalScope&&"function"===typeof Dh().importScripts}function Fh(){return Uh.apply(this,arguments)}function Uh(){return(Uh=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Vh(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Bh="firebaseLocalStorageDb",zh="firebaseLocalStorage",qh="fbase_key",Wh=function(){function e(t){d(this,e),this.request=t}return g(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Hh(e,t){return e.transaction([zh],t?"readwrite":"readonly").objectStore(zh)}function Gh(){var e=indexedDB.deleteDatabase(Bh);return new Wh(e).toPromise()}function Kh(){var e=indexedDB.open(Bh,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(zh,{keyPath:qh})}catch(r){n(r)}})),e.addEventListener("success",It(Et().mark((function n(){var r;return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(zh)){n.next=12;break}return r.close(),n.next=5,Gh();case 5:return n.t0=t,n.next=8,Kh();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Qh(e,t,n){return Jh.apply(this,arguments)}function Jh(){return Jh=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Hh(t,!0).put((Tt(i={},qh,n),Tt(i,"value",r),i)),e.abrupt("return",new Wh(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Jh.apply(this,arguments)}function Zh(e,t){return Yh.apply(this,arguments)}function Yh(){return Yh=It(Et().mark((function e(t,n){var r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hh(t,!1).get(n),e.next=3,new Wh(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Yh.apply(this,arguments)}function $h(e,t){var n=Hh(e,!0).delete(t);return new Wh(n).toPromise()}var Xh=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return g(e,[{key:"_openDb",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Kh();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rh()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=It(Et().mark((function e(){var t=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Oh._getInstance(Rh()?self:null),this.receiver._subscribe("keyChanged",function(){var e=It(Et().mark((function e(n,r){var i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=It(Et().mark((function e(){var t,n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fh();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new jh(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Vh()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Kh();case 5:return t=e.sent,e.next=8,Qh(t,Eh,"1");case 8:return e.next=10,$h(t,Eh);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=It(Et().mark((function e(t,n){var r=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Qh(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Zh(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=It(Et().mark((function e(t){var n=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return $h(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=It(Et().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Hh(e,!1).getAll();return new Wh(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=I(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(It(Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Xh.type="LOCAL";var ed=Xh;function td(e,t){return uc(e,"POST","/v2/accounts/mfaSignIn:start",sc(e,t))}function nd(e,t){return uc(e,"POST","/v2/accounts/mfaSignIn:finalize",sc(e,t))}var rd=1e12,id=function(){function e(t){d(this,e),this.auth=t,this.counter=rd,this._widgets=new Map}return g(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new ad(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||rd;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||rd;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||rd,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ad=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Zu(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return g(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var od=hl("rcb"),sd=new nc(3e4,6e4),ud=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Dh().grecaptcha)||void 0===t?void 0:t.render)}return g(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Zu(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&ul(Dh().grecaptcha)?Promise.resolve(Dh().grecaptcha):new Promise((function(r,i){var a=Dh().setTimeout((function(){i(Gu(e,"network-request-failed"))}),sd.get());Dh()[od]=function(){Dh().clearTimeout(a),delete Dh()[od];var o=Dh().grecaptcha;if(o&&ul(o)){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Gu(e,"internal-error"))},fl("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Qo({onload:od,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Gu(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Dh().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var cd=function(){function e(){d(this,e)}return g(e,[{key:"load",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new id(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ld="recaptcha",fd={theme:"light",type:"image"},hd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},fd),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=ld,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yl(r),this.isInvisible="invisible"===this.parameters.size,Zu("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Zu(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cd:new ud,this.validateStartingState()}return g(e,[{key:"verify",value:function(){var e=It(Et().mark((function e(){var t,n,r,i=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Zu(!this.parameters.sitekey,this.auth,"argument-error"),Zu(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Zu("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Dh()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Zu(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=It(Et().mark((function e(){var t,n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zu(ec()&&!Rh(),this.auth,"internal-error"),e.next=3,dd();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,il(this.auth);case 8:Zu(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Zu(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function dd(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var pd=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return g(e,[{key:"confirm",value:function(e){var t=nf._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function vd(){return(vd=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yl(t),e.next=3,kd(i,n,es(r));case 3:return a=e.sent,e.abrupt("return",new pd(a,(function(e){return Af(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function md(e,t,n){return gd.apply(this,arguments)}function gd(){return gd=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=es(t),e.next=3,If(!1,i,"phone");case 3:return e.next=5,kd(i.auth,n,es(r));case 5:return a=e.sent,e.abrupt("return",new pd(a,(function(e){return Df(i,e)})));case 7:case"end":return e.stop()}}),e)}))),gd.apply(this,arguments)}function yd(){return yd=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=es(t),e.next=3,kd(i.auth,n,es(r));case 3:return a=e.sent,e.abrupt("return",new pd(a,(function(e){return Rf(i,e)})));case 5:case"end":return e.stop()}}),e)}))),yd.apply(this,arguments)}function kd(e,t,n){return bd.apply(this,arguments)}function bd(){return bd=It(Et().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Zu("string"===typeof a,t,"argument-error"),Zu(r.type===ld,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Zu("enroll"===s.type,t,"internal-error"),e.next=13,wh(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Zu("signin"===s.type,t,"internal-error"),Zu(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,td(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Zl(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),bd.apply(this,arguments)}function wd(){return wd=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ef(es(t),n);case 2:case"end":return e.stop()}}),e)}))),wd.apply(this,arguments)}var xd=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=yl(t)}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return kd(this.auth,e,es(t))}}],[{key:"credential",value:function(e,t){return nf._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?nf._fromTokenResponse(n,r):null}}]),e}();function _d(e,t){return t?zc(t):(Zu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}xd.PROVIDER_ID="phone",xd.PHONE_SIGN_IN_METHOD="phone";var Sd=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return Kl(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Kl(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Kl(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(_l);function Ed(e){return Pf(e.auth,new Sd(e),e.bypassAuthState)}function Cd(e){var t=e.auth,n=e.user;return Zu(n,t,"internal-error"),Lf(n,new Sd(e),e.bypassAuthState)}function Id(e){return Td.apply(this,arguments)}function Td(){return Td=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Zu(r=t.user,n,"internal-error"),e.abrupt("return",Ef(r,new Sd(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Td.apply(this,arguments)}var Ld=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return g(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=It(Et().mark((function t(n,r){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=It(Et().mark((function e(t){var n,r,i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ed;case"linkViaPopup":case"linkViaRedirect":return Id;case"reauthViaPopup":case"reauthViaRedirect":return Cd;default:Hu(this.auth,"internal-error")}}},{key:"resolve",value:function(e){$u(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){$u(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Nd=new nc(2e3,1e4);function Pd(e,t,n){return Od.apply(this,arguments)}function Od(){return(Od=It(Et().mark((function e(t,n,r){var i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yl(t),Qu(t,n,of),a=_d(i,r),o=new Md(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ad(){return Ad=It(Et().mark((function e(t,n,r){var i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qu((i=es(t)).auth,n,of),a=_d(i.auth,r),o=new Md(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function jd(e,t,n){return Dd.apply(this,arguments)}function Dd(){return Dd=It(Et().mark((function e(t,n,r){var i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qu((i=es(t)).auth,n,of),a=_d(i.auth,r),o=new Md(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Dd.apply(this,arguments)}var Md=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o){var s;return d(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=x(s),s}return g(n,[{key:"executeNotNull",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Zu(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=It(Et().mark((function e(){var t,n=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $u(1===this.filter.length,"Popup operations only handle one event"),t=Ah(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Gu(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Gu(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Gu(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Nd.get())}()}}]),n}(Ld);Md.currentPopupAction=null;var Rd="pendingRedirect",Fd=new Map,Ud=function(e){k(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return g(n,[{key:"execute",value:function(){var e=It(Et().mark((function e(){var t,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Fd.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Vd(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Tu(b(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Fd.set(this.auth._key(),t);case 21:return this.bypassAuthState||Fd.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=It(Et().mark((function e(t){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Tu(b(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Tu(b(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ld);function Vd(e,t){return Bd.apply(this,arguments)}function Bd(){return(Bd=It(Et().mark((function e(t,n){var r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(n),i=Hd(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zd(e,t){return qd.apply(this,arguments)}function qd(){return(qd=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hd(t)._set(Gd(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wd(e,t){Fd.set(e._key(),t)}function Hd(e){return zc(e._redirectPersistence)}function Gd(e){return Hc(Rd,e.config.apiKey,e.name)}function Kd(e,t,n){return function(e,t,n){return Qd.apply(this,arguments)}(e,t,n)}function Qd(){return(Qd=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yl(t),Qu(t,n,of),e.next=4,i._initializationPromise;case 4:return a=_d(i,r),e.next=7,zd(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jd(e,t,n){return function(e,t,n){return Zd.apply(this,arguments)}(e,t,n)}function Zd(){return Zd=It(Et().mark((function e(t,n,r){var i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qu((i=es(t)).auth,n,of),e.next=4,i.auth._initializationPromise;case 4:return a=_d(i.auth,r),e.next=7,zd(a,i.auth);case 7:return e.next=9,rp(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),Zd.apply(this,arguments)}function Yd(e,t,n){return function(e,t,n){return $d.apply(this,arguments)}(e,t,n)}function $d(){return $d=It(Et().mark((function e(t,n,r){var i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qu((i=es(t)).auth,n,of),e.next=4,i.auth._initializationPromise;case 4:return a=_d(i.auth,r),e.next=7,If(!1,i,n.providerId);case 7:return e.next=9,zd(a,i.auth);case 9:return e.next=11,rp(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)}))),$d.apply(this,arguments)}function Xd(e,t){return ep.apply(this,arguments)}function ep(){return(ep=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yl(t)._initializationPromise;case 2:return e.abrupt("return",tp(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tp(e,t){return np.apply(this,arguments)}function np(){return np=It(Et().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=yl(t),a=_d(i,n),o=new Ud(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}function rp(e){return ip.apply(this,arguments)}function ip(){return ip=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ah("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}var ap=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return g(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!sp(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gu(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(op(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(op(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function op(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function sp(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function up(e){return cp.apply(this,arguments)}function cp(){return cp=It(Et().mark((function e(t){var n,r=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",uc(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}var lp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fp=/^https?/;function hp(){return(hp=It(Et().mark((function e(t){var n,r,i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,up(t);case 4:n=e.sent,r=n.authorizedDomains,i=I(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!dp(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Hu(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function dp(e){var t=Xu(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!fp.test(r))return!1;if(lp.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var pp=new nc(3e4,6e4);function vp(){var e=Dh().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var mp=null;function gp(e){return mp=mp||function(e){return new Promise((function(t,n){var r,i,a;function o(){vp(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){vp(),n(Gu(e,"network-request-failed"))},timeout:pp.get()})}if(null===(i=null===(r=Dh().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Dh().gapi)||void 0===a?void 0:a.load)){var s=hl("iframefcb");return Dh()[s]=function(){gapi.load?o():n(Gu(e,"network-request-failed"))},fl("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw mp=null,e}))}(e),mp}var yp=new nc(5e3,15e3),kp="__/auth/iframe",bp="emulator/auth/iframe",wp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _p(e){var t=e.config;Zu(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?rc(t,bp):"https://".concat(e.config.authDomain,"/").concat(kp),r={apiKey:t.apiKey,appName:e.name,v:Js},i=xp.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Qo(r).slice(1))}function Sp(e){return Ep.apply(this,arguments)}function Ep(){return Ep=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gp(t);case 2:return n=e.sent,Zu(r=Dh().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:_p(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wp,dontclear:!0},(function(e){return new Promise(function(){var n=It(Et().mark((function n(r,i){var a,o,s;return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Dh().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Gu(t,"network-request-failed"),o=Dh().setTimeout((function(){i(a)}),yp.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ep.apply(this,arguments)}var Cp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ip=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return g(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Tp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Cp),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Do().toLowerCase();n&&(s=Zc(c)?"_blank":n),Qc(c)&&(t=t||"http://localhost",u.scrollbars="yes");var f=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return tl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Ip(null);var h=window.open(t||"",s,f);Zu(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Ip(h)}var Lp="__/auth/handler",Np="emulator/auth/handler",Pp=encodeURIComponent("fac");function Op(e,t,n,r,i,a){return Ap.apply(this,arguments)}function Ap(){return(Ap=It(Et().mark((function e(t,n,r,i,a,o){var s,u,c,f,h,d,p,v,m,g,y,k,b;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zu(t.config.authDomain,t,"auth-domain-config-required"),Zu(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Js,eventId:a},n instanceof of)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Ho(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,c=Object.entries(o||{});u<c.length;u++)f=l(c[u],2),h=f[0],d=f[1],s[h]=d;for(n instanceof sf&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,m=0,g=Object.keys(v);m<g.length;m++)y=g[m],void 0===v[y]&&delete v[y];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(Pp,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(jp(t),"?").concat(Qo(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jp(e){var t=e.config;return t.emulator?rc(t,Np):"https://".concat(t.authDomain,"/").concat(Lp)}var Dp="webStorageSupport",Mp=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nh,this._completeRedirectFn=tp,this._overrideRedirectResult=Wd}return g(e,[{key:"_openPopup",value:function(){var e=It(Et().mark((function e(t,n,r,i){var a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $u(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Op(t,n,r,Xu(),i);case 3:return o=e.sent,e.abrupt("return",Tp(t,o,Ah()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=It(Et().mark((function e(t,n,r,i){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Op(t,n,r,Xu(),i);case 4:return Mh(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):($u(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sp(t);case 2:return n=e.sent,r=new ap(t),n.register("authEvent",(function(e){return Zu(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Dp,{type:Dp},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Dp];void 0!==i&&t(!!i),Hu(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return hp.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return nl()||Jc()||tl()}}]),e}(),Rp=Mp,Fp=function(){function e(t){d(this,e),this.factorId=t}return g(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Yu("unexpected MultiFactorSessionType")}}}]),e}(),Up=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return g(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return uc(e,"POST","/v2/accounts/mfaEnrollment:finalize",sc(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return uc(e,"POST","/v2/accounts/mfaSignIn:finalize",sc(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Fp),Vp=function(){function e(){d(this,e)}return g(e,null,[{key:"assertion",value:function(e){return Up._fromCredential(e)}}]),e}();Vp.FACTOR_ID="phone";var Bp=function(){function e(){d(this,e)}return g(e,null,[{key:"assertionForEnrollment",value:function(e,t){return zp._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return zp._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zu("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,i=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},uc(i,"POST","/v2/accounts/mfaEnrollment:start",sc(i,a));case 4:return r=e.sent,e.abrupt("return",qp._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Bp.FACTOR_ID="totp";var zp=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return g(n,[{key:"_finalizeEnroll",value:function(){var e=It(Et().mark((function e(t,n,r){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zu("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",xh(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zu(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",nd(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Fp),qp=function(){function e(t,n,r,i,a,o,s){d(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return g(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Wp(e)||Wp(t))&&(r=!0),r&&(Wp(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Wp(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Wp(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Hp="@firebase/auth",Gp="0.23.2",Kp=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return g(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Zu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Qp;!function(e){var t;null===(t=Oo())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Jp(){return window}Qp="Browser",zs(new ts("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;Zu(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:Qp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rl(Qp)},l=new gl(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zc);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),zs(new ts("auth-internal",(function(e){return function(e){return new Kp(e)}(yl(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),tu(Hp,Gp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Qp)),tu(Hp,Gp,"esm2017");var Zp=2e3;function Yp(e,t,n){return $p.apply(this,arguments)}function $p(){return $p=It(Et().mark((function e(t,n,r){var i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Jp(),o=a.BuildInfo,$u(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,iv(n.sessionId);case 4:return s=e.sent,u={},tl()?u.ibi=o.packageName:$c()?u.apn=o.packageName:Hu(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",Op(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Xp(){return(Xp=It(Et().mark((function e(t){var n,r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jp(),r=n.BuildInfo,i={},tl()?i.iosBundleId=r.packageName:$c()?i.androidPackageName=r.packageName:Hu(t,"operation-not-supported-in-this-environment"),e.next=5,up(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ev(e){var t=Jp().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function tv(e,t,n){return nv.apply(this,arguments)}function nv(){return nv=It(Et().mark((function e(t,n,r){var i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jp(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Gu(t,"redirect-cancelled-by-user"))}),Zp))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),$c()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),nv.apply(this,arguments)}function rv(e){var t,n,r,i,a,o,s,u,c,l,f=Jp();Zu("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Zu("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Zu("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zu("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zu("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function iv(e){return av.apply(this,arguments)}function av(){return(av=It(Et().mark((function e(t){var n,r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ov(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ov(e){if($u(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var sv=20,uv=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return g(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Tu(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ap);function cv(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:pv(),postBody:null,tenantId:e.tenantId,error:Gu(e,"no-auth-event")}}function lv(e,t){return vv()._set(mv(e),t)}function fv(e){return hv.apply(this,arguments)}function hv(){return(hv=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vv()._get(mv(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,vv()._remove(mv(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dv(e,t){var n,r,i=function(e){var t=gv(e),n=t.link?decodeURIComponent(t.link):void 0,r=gv(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return gv(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=gv(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Gu(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function pv(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<sv;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function vv(){return zc(Th)}function mv(e){return Hc("authEvent",e.config.apiKey,e.name)}function gv(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=C(e.split("?"));t[0];return Jo(t.slice(1).join("?"))}var yv=function(){function e(){d(this,e),this._redirectPersistence=Nh,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=tp,this._overrideRedirectResult=Wd}return g(e,[{key:"_initialize",value:function(){var e=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new uv(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Hu(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=It(Et().mark((function e(t,n,r,i){var a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rv(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Fd.clear(),e.next=10,this._originValidation(t);case 10:return o=cv(t,r,i),e.next=13,lv(t,o);case 13:return e.next=15,Yp(t,o,n);case 15:return s=e.sent,e.next=18,ev(s);case 18:return u=e.sent,e.abrupt("return",tv(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Xp.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Jp(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(It(Et().mark((function n(){return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fv(e);case 2:t.onEvent(bv());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=It(Et().mark((function n(r){var i,a;return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,fv(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=dv(i,r.url)),t.onEvent(a||bv());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Jp().handleOpenURL=function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),kv=yv;function bv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Gu("no-auth-event")}}var wv=1e3;function xv(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function _v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return!("file:"!==xv()&&"ionic:"!==xv()&&"capacitor:"!==xv()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return Uo()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do();return/Edge\/\d+/.test(e)}(e)}function Ev(){try{var e=self.localStorage,t=Ah();if(e)return e.setItem(t,"1"),e.removeItem(t),!Sv()||Vo()}catch(n){return Cv()&&Vo()}return!1}function Cv(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Iv(){return("http:"===xv()||"https:"===xv()||Ro()||_v())&&!(Fo()||Mo())&&Ev()&&!Cv()}function Tv(){return _v()&&"undefined"!==typeof document}function Lv(){return Nv.apply(this,arguments)}function Nv(){return(Nv=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tv()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),wv);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pv={LOCAL:"local",NONE:"none",SESSION:"session"},Ov=Zu,Av="persistence";function jv(e,t){Ov(Object.values(Pv).includes(t),e,"invalid-persistence-type"),Fo()?Ov(t!==Pv.SESSION,e,"unsupported-persistence-type"):Mo()?Ov(t===Pv.NONE,e,"unsupported-persistence-type"):Cv()?Ov(t===Pv.NONE||t===Pv.LOCAL&&Vo(),e,"unsupported-persistence-type"):Ov(t===Pv.NONE||Ev(),e,"unsupported-persistence-type")}function Dv(e){return Mv.apply(this,arguments)}function Mv(){return(Mv=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Rv(),r=Hc(Av,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rv(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Fv=Zu,Uv=function(){function e(){d(this,e),this.browserResolver=zc(Rp),this.cordovaResolver=zc(kv),this.underlyingResolver=null,this._redirectPersistence=Nh,this._completeRedirectFn=tp,this._overrideRedirectResult=Wd}return g(e,[{key:"_initialize",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=It(Et().mark((function e(t,n,r,i){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=It(Et().mark((function e(t,n,r,i){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Tv()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Fv(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Lv();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Vv(e){return e.unwrap()}function Bv(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Gv(e,function(e,t){var n,r=es(e),i=t;return Zu(t.customData.operationType,r,"argument-error"),Zu(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bh._fromError(r,i)}(e,t));else if(r){var i=zv(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function zv(e){var t=(e instanceof Bo?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Bo)&&"temporaryProof"in t&&"phoneNumber"in t)return xd.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Pu.PASSWORD)return null;switch(r){case Pu.GOOGLE:n=lf;break;case Pu.FACEBOOK:n=cf;break;case Pu.GITHUB:n=ff;break;case Pu.TWITTER:n=pf;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?hf._create(r,s):Jl._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new uf(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Bo?n.credentialFromError(e):n.credentialFromResult(e)}function qv(e,t){return t.catch((function(t){throw t instanceof Bo&&Bv(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,zv(t)),additionalUserInfo:yh(e),user:Kv.getOrCreate(r)}}))}function Wv(e,t){return Hv.apply(this,arguments)}function Hv(){return(Hv=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return qv(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gv=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return g(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return qv(Vv(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Kv=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=es(e);return Sh.has(t)||Sh.set(t,_h._fromUser(t)),Sh.get(t)}(t)}return g(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qv(this.auth,Df(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wv(this.auth,md(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qv(this.auth,jd(this._delegate,t,Uv)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dv(yl(this.auth));case 2:return e.abrupt("return",Yd(this._delegate,t,Uv));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qv(this.auth,Rf(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Wv(this.auth,function(e,t,n){return yd.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return qv(this.auth,function(e,t,n){return Ad.apply(this,arguments)}(this._delegate,e,Uv))}},{key:"reauthenticateWithRedirect",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dv(yl(this.auth));case 2:return e.abrupt("return",Jd(this._delegate,t,Uv));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ah.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_f(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return lh(es(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return lh(es(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return wd.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ch.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return oh.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Kv.USER_MAP=new WeakMap;var Qv=Zu,Jv=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Qv(r,"invalid-api-key",{appName:t.name}),Qv(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Uv:void 0;this._delegate=n.initialize({options:{persistence:Yv(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Uu),this.linkUnderlyingAuth()}return g(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Kv.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){bl(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Qf.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Jf(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Kf.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qv(this._delegate,$f(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return ih.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=rf.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qv(Iv(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Xd(this._delegate,Uv);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",qv(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){yl(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Zv(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Zv(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return eh.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Gf.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jv(this._delegate,t),e.t0=t,e.next=e.t0===Pv.SESSION?4:e.t0===Pv.LOCAL?6:e.t0===Pv.NONE?11:13;break;case 4:return n=Nh,e.abrupt("break",14);case 6:return e.next=8,zc(ed)._isAvailable();case 8:return r=e.sent,n=r?ed:Th,e.abrupt("break",14);case 11:return n=Wc,e.abrupt("break",14);case 13:return e.abrupt("return",Hu("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return qv(this._delegate,function(e){return kf.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return qv(this._delegate,Af(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return qv(this._delegate,function(e,t){return Bf.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return qv(this._delegate,function(e,t,n){return Af(es(e),af.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return qv(this._delegate,function(e,t,n){return th.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Wv(this._delegate,function(e,t,n){return vd.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qv(Iv(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",qv(this._delegate,Pd(this._delegate,t,Uv)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qv(Iv(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Dv(this._delegate);case 3:return e.abrupt("return",Kd(this._delegate,t,Uv));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Yf.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Zv(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Kv.getOrCreate(e))},error:t,complete:n}}function Yv(e,t){var n=function(e,t){var n=Rv();if(!n)return[];var r=Hc(Av,e,t);switch(n.getItem(r)){case Pv.NONE:return[Wc];case Pv.LOCAL:return[ed,Nh];case Pv.SESSION:return[Nh];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ed)||n.push(ed),"undefined"!==typeof window)for(var r=0,i=[Th,Nh];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Wc)||n.push(Wc),n}Jv.Persistence=Pv;var $v=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new xd(Vv(Iu.auth()))}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return xd.credential(e,t)}}]),e}();$v.PHONE_SIGN_IN_METHOD=xd.PHONE_SIGN_IN_METHOD,$v.PROVIDER_ID=xd.PROVIDER_ID;var Xv,em=Zu,tm=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Iu.app();d(this,e),em(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new hd(t,n,i.auth()),this.type=this._delegate.type}return g(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Xv=Iu).INTERNAL.registerComponent(new ts("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Jv(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ou,PASSWORD_RESET:Au,RECOVER_EMAIL:ju,REVERT_SECOND_FACTOR_ADDITION:Du,VERIFY_AND_CHANGE_EMAIL:Mu,VERIFY_EMAIL:Ru}},EmailAuthProvider:af,FacebookAuthProvider:cf,GithubAuthProvider:ff,GoogleAuthProvider:lf,OAuthProvider:uf,SAMLAuthProvider:df,PhoneAuthProvider:$v,PhoneMultiFactorGenerator:Vp,RecaptchaVerifier:tm,TwitterAuthProvider:pf,Auth:Jv,AuthCredential:_l,Error:Bo}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Xv.registerVersion("@firebase/auth-compat","0.4.2");var nm,rm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},im={},am=am||{},om=rm||self;function sm(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function um(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var cm="closure_uid_"+(1e9*Math.random()>>>0),lm=0;function fm(e,t,n){return e.call.apply(e.bind,arguments)}function hm(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function dm(e,t,n){return(dm=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fm:hm).apply(null,arguments)}function pm(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function vm(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function mm(){this.s=this.s,this.o=this.o}mm.prototype.s=!1,mm.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,cm)&&e[cm]||(e[cm]=++lm)}(this)},mm.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var gm=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ym(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function km(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(sm(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function bm(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}bm.prototype.h=function(){this.defaultPrevented=!0};var wm=function(){if(!om.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{om.addEventListener("test",(function(){}),t),om.removeEventListener("test",(function(){}),t)}catch(Dr){}return e}();function xm(e){return/^[\s\xa0]*$/.test(e)}function _m(){var e=om.navigator;return e&&(e=e.userAgent)?e:""}function Sm(e){return-1!=_m().indexOf(e)}function Em(e){return Em[" "](e),e}Em[" "]=function(){};var Cm,Im,Tm=Sm("Opera"),Lm=Sm("Trident")||Sm("MSIE"),Nm=Sm("Edge"),Pm=Nm||Lm,Om=Sm("Gecko")&&!(-1!=_m().toLowerCase().indexOf("webkit")&&!Sm("Edge"))&&!(Sm("Trident")||Sm("MSIE"))&&!Sm("Edge"),Am=-1!=_m().toLowerCase().indexOf("webkit")&&!Sm("Edge");function jm(){var e=om.document;return e?e.documentMode:void 0}e:{var Dm="",Mm=function(){var e=_m();return Om?/rv:([^\);]+)(\)|;)/.exec(e):Nm?/Edge\/([\d\.]+)/.exec(e):Lm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Am?/WebKit\/(\S+)/.exec(e):Tm?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Mm&&(Dm=Mm?Mm[1]:""),Lm){var Rm=jm();if(null!=Rm&&Rm>parseFloat(Dm)){Cm=String(Rm);break e}}Cm=Dm}if(om.document&&Lm){var Fm=jm();Im=Fm||(parseInt(Cm,10)||void 0)}else Im=void 0;var Um=Im;function Vm(e,t){if(bm.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Om){e:{try{Em(t.nodeName);var i=!0;break e}catch(jr){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Bm[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Vm.$.h.call(this)}}vm(Vm,bm);var Bm={2:"touch",3:"pen",4:"mouse"};Vm.prototype.h=function(){Vm.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var zm="closure_listenable_"+(1e6*Math.random()|0),qm=0;function Wm(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++qm,this.fa=this.ia=!1}function Hm(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Gm(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Km(e){var t={};for(var n in e)t[n]=e[n];return t}var Qm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jm(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Qm.length;a++)n=Qm[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Zm(e){this.src=e,this.g={},this.h=0}function Ym(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=gm(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Hm(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $m(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Zm.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=$m(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Wm(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Xm="closure_lm_"+(1e6*Math.random()|0),eg={};function tg(e,t,n,r,i){if(r&&r.once)return rg(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)tg(e,t[a],n,r,i);return null}return n=lg(n),e&&e[zm]?e.O(t,n,um(r)?!!r.capture:!!r,i):ng(e,t,n,!1,r,i)}function ng(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=um(i)?!!i.capture:!!i,s=ug(e);if(s||(e[Xm]=s=new Zm(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=sg;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)wm||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(og(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function rg(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)rg(e,t[a],n,r,i);return null}return n=lg(n),e&&e[zm]?e.P(t,n,um(r)?!!r.capture:!!r,i):ng(e,t,n,!0,r,i)}function ig(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ig(e,t[a],n,r,i);else r=um(r)?!!r.capture:!!r,n=lg(n),e&&e[zm]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$m(a=e.g[t],n,r,i))&&(Hm(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ug(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$m(t,n,r,i)),(n=-1<e?t[e]:null)&&ag(n))}function ag(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[zm])Ym(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(og(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ug(t))?(Ym(n,e),0==n.h&&(n.src=null,t[Xm]=null)):Hm(e)}}}function og(e){return e in eg?eg[e]:eg[e]="on"+e}function sg(e,t){if(e.fa)e=!0;else{t=new Vm(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ag(e),e=n.call(r,t)}return e}function ug(e){return(e=e[Xm])instanceof Zm?e:null}var cg="__closure_events_fn_"+(1e9*Math.random()>>>0);function lg(e){return"function"===typeof e?e:(e[cg]||(e[cg]=function(t){return e.handleEvent(t)}),e[cg])}function fg(){mm.call(this),this.i=new Zm(this),this.S=this,this.J=null}function hg(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new bm(t,e);else if(t instanceof bm)t.target=t.target||e;else{var i=t;Jm(t=new bm(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=dg(o,r,!0,t)&&i}if(i=dg(o=t.g=e,r,!0,t)&&i,i=dg(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=dg(o=t.g=n[a],r,!1,t)&&i}function dg(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Ym(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}vm(fg,mm),fg.prototype[zm]=!0,fg.prototype.removeEventListener=function(e,t,n,r){ig(this,e,t,n,r)},fg.prototype.N=function(){if(fg.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Hm(n[r]);delete t.g[e],t.h--}}this.J=null},fg.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},fg.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var pg=om.JSON.stringify,vg=function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return g(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function mg(){var e=Sg,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gg=function(){function e(){d(this,e),this.h=this.g=null}return g(e,[{key:"add",value:function(e,t){var n=yg.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),yg=new vg((function(){return new kg}),(function(e){return e.reset()})),kg=function(){function e(){d(this,e),this.next=this.g=this.h=null}return g(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function bg(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function wg(e){om.setTimeout((function(){throw e}),0)}var xg,_g=!1,Sg=new gg,Eg=function(){var e=om.Promise.resolve(void 0);xg=function(){e.then(Cg)}},Cg=function(){for(var e;e=mg();){try{e.h.call(e.g)}catch(Dr){wg(Dr)}var t=yg;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_g=!1};function Ig(e,t){fg.call(this),this.h=e||1,this.g=t||om,this.j=dm(this.qb,this),this.l=Date.now()}function Tg(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Lg(e,t,n){if("function"===typeof e)n&&(e=dm(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=dm(e.handleEvent,e)}return 2147483647<Number(t)?-1:om.setTimeout(e,t||0)}function Ng(e){e.g=Lg((function(){e.g=null,e.i&&(e.i=!1,Ng(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}vm(Ig,fg),(nm=Ig.prototype).ga=!1,nm.T=null,nm.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hg(this,"tick"),this.ga&&(Tg(this),this.start()))}},nm.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nm.N=function(){Ig.$.N.call(this),Tg(this),delete this.g};var Pg=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return g(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ng(this)}},{key:"N",value:function(){Tu(b(n.prototype),"N",this).call(this),this.g&&(om.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(mm);function Og(e){mm.call(this),this.h=e,this.g={}}vm(Og,mm);var Ag=[];function jg(e,t,n,r){Array.isArray(n)||(n&&(Ag[0]=n.toString()),n=Ag);for(var i=0;i<n.length;i++){var a=tg(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Dg(e){Gm(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ag(e)}),e),e.g={}}function Mg(){this.g=!0}function Rg(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return pg(n)}catch(Ir){return t}}(e,n)+(r?" "+r:"")}))}Og.prototype.N=function(){Og.$.N.call(this),Dg(this)},Og.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mg.prototype.Ea=function(){this.g=!1},Mg.prototype.info=function(){};var Fg={},Ug=null;function Vg(){return Ug=Ug||new fg}function Bg(e){bm.call(this,Fg.Ta,e)}function zg(e){var t=Vg();hg(t,new Bg(t))}function qg(e,t){bm.call(this,Fg.STAT_EVENT,e),this.stat=t}function Wg(e){var t=Vg();hg(t,new qg(t,e))}function Hg(e,t){bm.call(this,Fg.Ua,e),this.size=t}function Gg(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return om.setTimeout((function(){e()}),t)}Fg.Ta="serverreachability",vm(Bg,bm),Fg.STAT_EVENT="statevent",vm(qg,bm),Fg.Ua="timingevent",vm(Hg,bm);var Kg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jg(){}function Zg(e){return e.h||(e.h=e.i())}function Yg(){}Jg.prototype.h=null;var $g,Xg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ey(){bm.call(this,"d")}function ty(){bm.call(this,"c")}function ny(){}function ry(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Og(this),this.P=ay,e=Pm?125:void 0,this.V=new Ig(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new iy}function iy(){this.i=null,this.g="",this.h=!1}vm(ey,bm),vm(ty,bm),vm(ny,Jg),ny.prototype.g=function(){return new XMLHttpRequest},ny.prototype.i=function(){return{}},$g=new ny;var ay=45e3,oy={},sy={};function uy(e,t,n){e.L=1,e.v=Iy(xy(t)),e.s=n,e.S=!0,cy(e,null)}function cy(e,t){e.G=Date.now(),dy(e),e.A=xy(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Vy(n.i,"t",r),e.C=0,n=e.l.J,e.h=new iy,e.g=Vk(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Pg(dm(e.Pa,e,e.g),e.O)),jg(e.U,e.g,"readystatechange",e.nb),t=e.I?Km(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),zg(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function ly(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function fy(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=hy(e,n))==sy){4==t&&(e.o=4,Wg(14),i=!1),Rg(e.j,e.m,null,"[Incomplete Response]");break}if(r==oy){e.o=4,Wg(15),Rg(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Rg(e.j,e.m,r,null),yy(e,r)}ly(e)&&r!=sy&&r!=oy&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Wg(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ok(t),t.M=!0,Wg(11))):(Rg(e.j,e.m,n,"[Invalid Chunked Response]"),gy(e),my(e))}function hy(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?sy:(n=Number(t.substring(n,r)),isNaN(n)?oy:(r+=1)+n>t.length?sy:(t=t.slice(r,r+n),e.C=r+n,t))}function dy(e){e.Y=Date.now()+e.P,py(e,e.P)}function py(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Gg(dm(e.lb,e),t)}function vy(e){e.B&&(om.clearTimeout(e.B),e.B=null)}function my(e){0==e.l.H||e.J||Dk(e.l,e)}function gy(e){vy(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Tg(e.V),Dg(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function yy(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ky(n.i,e)))if(!e.K&&Ky(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;jk(n),Sk(n)}Pk(n),Wg(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Gg(dm(n.ib,n),6e3));if(1>=Gy(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Rk(n,11)}else if((e.K||n.g==e)&&jk(n),!xm(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Qy(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Cy(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Uk(r,r.J?r.pa:null,r.Y),d.K){Jy(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(vy(p),dy(p)),r.g=d}else Nk(r);0<n.j.length&&Ck(n)}else"stop"!=a[0]&&"close"!=a[0]||Rk(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Rk(n,7):_k(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}zg()}catch(a){}}function ky(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(sm(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(sm(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(sm(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(nm=ry.prototype).setTimeout=function(e){this.P=e},nm.nb=function(e){e=e.target;var t=this.M;t&&3==gk(e)?t.l():this.Pa(e)},nm.Pa=function(e){try{if(e==this.g)e:{var t=gk(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Pm||this.g&&(this.h.h||this.g.ja()||yk(this.g)))){this.J||4!=t||7==n||zg(),vy(this);var r=this.g.da();this.ca=r;t:if(ly(this)){var i=yk(this.g);e="";var a=i.length,o=4==gk(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){gy(this),my(this);var s="";break t}this.h.i=new om.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xm(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Wg(12),gy(this),my(this);break e}Rg(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yy(this,r)}this.S?(fy(this,t,s),Pm&&this.i&&3==t&&(jg(this.U,this.V,"tick",this.mb),this.V.start())):(Rg(this.j,this.m,s,null),yy(this,s)),4==t&&gy(this),this.i&&!this.J&&(4==t?Dk(this.l,this):(this.i=!1,dy(this)))}else(function(e){var t={};e=(e.g&&2<=gk(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!xm(e[n])){var r=bg(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Wg(12)):(this.o=0,Wg(13)),gy(this),my(this)}}}catch(t){}},nm.mb=function(){if(this.g){var e=gk(this.g),t=this.g.ja();this.C<t.length&&(vy(this),fy(this,e,t),this.i&&4!=e&&dy(this))}},nm.cancel=function(){this.J=!0,gy(this)},nm.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(zg(),Wg(17)),gy(this),this.o=2,my(this)):py(this,this.Y-e)};var by=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wy(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof wy){this.h=e.h,_y(this,e.j),this.s=e.s,this.g=e.g,Sy(this,e.m),this.l=e.l;var t=e.i,n=new My;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ey(this,n),this.o=e.o}else e&&(t=String(e).match(by))?(this.h=!1,_y(this,t[1]||"",!0),this.s=Ty(t[2]||""),this.g=Ty(t[3]||"",!0),Sy(this,t[4]),this.l=Ty(t[5]||"",!0),Ey(this,t[6]||"",!0),this.o=Ty(t[7]||"")):(this.h=!1,this.i=new My(null,this.h))}function xy(e){return new wy(e)}function _y(e,t,n){e.j=n?Ty(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Sy(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ey(e,t,n){t instanceof My?(e.i=t,function(e,t){t&&!e.j&&(Ry(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Fy(this,t),Vy(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ly(t,jy)),e.i=new My(t,e.h))}function Cy(e,t,n){e.i.set(t,n)}function Iy(e){return Cy(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ty(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ly(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ny),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ny(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}wy.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ly(t,Py,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ly(t,Py,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ly(n,"/"==n.charAt(0)?Ay:Oy,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ly(n,Dy)),e.join("")};var Py=/[#\/\?@]/g,Oy=/[#\?:]/g,Ay=/[#\?]/g,jy=/[#\?@]/g,Dy=/#/g;function My(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ry(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fy(e,t){Ry(e),t=By(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Uy(e,t){return Ry(e),t=By(e,t),e.g.has(t)}function Vy(e,t,n){Fy(e,t),0<n.length&&(e.i=null,e.g.set(By(e,t),ym(n)),e.h+=n.length)}function By(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(nm=My.prototype).add=function(e,t){Ry(this),this.i=null,e=By(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},nm.forEach=function(e,t){Ry(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},nm.ta=function(){Ry(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},nm.Z=function(e){Ry(this);var t=[];if("string"===typeof e)Uy(this,e)&&(t=t.concat(this.g.get(By(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},nm.set=function(e,t){return Ry(this),this.i=null,Uy(this,e=By(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},nm.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},nm.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var zy=g((function e(t,n){d(this,e),this.g=t,this.map=n}));function qy(e){this.l=e||Wy,om.PerformanceNavigationTiming?e=0<(e=om.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(om.g&&om.g.Ka&&om.g.Ka()&&om.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Wy=10;function Hy(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Gy(e){return e.h?1:e.g?e.g.size:0}function Ky(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qy(e,t){e.g?e.g.add(t):e.h=t}function Jy(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zy(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=I(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return ym(e.i)}qy.prototype.cancel=function(){if(this.i=Zy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=I(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Yy=function(){function e(){d(this,e)}return g(e,[{key:"stringify",value:function(e){return om.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return om.JSON.parse(e,void 0)}}]),e}();function $y(){this.g=new Yy}function Xy(e,t,n){var r=n||"";try{ky(e,(function(e,n){var i=e;um(e)&&(i=pg(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ek(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(jr){}}function tk(e){this.l=e.fc||null,this.j=e.ob||!1}function nk(e,t){fg.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=rk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vm(tk,Jg),tk.prototype.g=function(){return new nk(this.l,this.j)},tk.prototype.i=function(e){return function(){return e}}({}),vm(nk,fg);var rk=0;function ik(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ak(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ok(e)}function ok(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(nm=nk.prototype).open=function(e,t){if(this.readyState!=rk)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ok(this)},nm.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||om).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},nm.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ak(this)),this.readyState=rk},nm.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ok(this)),this.g&&(this.readyState=3,ok(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof om.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ik(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},nm.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ak(this):ok(this),3==this.readyState&&ik(this)}},nm.Za=function(e){this.g&&(this.response=this.responseText=e,ak(this))},nm.Ya=function(e){this.g&&(this.response=e,ak(this))},nm.ka=function(){this.g&&ak(this)},nm.setRequestHeader=function(e,t){this.v.append(e,t)},nm.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},nm.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(nk.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var sk=om.JSON.parse;function uk(e){fg.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ck,this.L=this.M=!1}vm(uk,fg);var ck="",lk=/^https?$/i,fk=["POST","PUT"];function hk(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,dk(e),vk(e)}function dk(e){e.F||(e.F=!0,hg(e,"complete"),hg(e,"error"))}function pk(e){if(e.h&&"undefined"!=typeof am&&(!e.C[1]||4!=gk(e)||2!=e.da()))if(e.v&&4==gk(e))Lg(e.La,0,e);else if(hg(e,"readystatechange"),4==gk(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(by)[1]||null;!a&&om.self&&om.self.location&&(a=om.self.location.protocol.slice(0,-1)),i=!lk.test(a?a.toLowerCase():"")}t=i}if(t)hg(e,"complete"),hg(e,"success");else{e.m=6;try{var o=2<gk(e)?e.g.statusText:""}catch(Ir){o=""}e.j=o+" ["+e.da()+"]",dk(e)}}finally{vk(e)}}}function vk(e,t){if(e.g){mk(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||hg(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function mk(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(om.clearTimeout(e.A),e.A=null)}function gk(e){return e.g?e.g.readyState:0}function yk(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ck:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(qr){return null}}function kk(e){var t="";return Gm(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function bk(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=kk(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Cy(e,t,n))}function wk(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function xk(e){this.Ga=0,this.j=[],this.l=new Mg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=wk("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=wk("baseRetryDelayMs",5e3,e),this.hb=wk("retryDelaySeedMs",1e4,e),this.eb=wk("forwardChannelMaxRetries",2,e),this.xa=wk("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new qy(e&&e.concurrentRequestLimit),this.Ja=new $y,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function _k(e){if(Ek(e),3==e.H){var t=e.W++,n=xy(e.I);if(Cy(n,"SID",e.K),Cy(n,"RID",t),Cy(n,"TYPE","terminate"),Tk(e,n),(t=new ry(e,e.l,t)).L=2,t.v=Iy(xy(n)),n=!1,om.navigator&&om.navigator.sendBeacon)try{n=om.navigator.sendBeacon(t.v.toString(),"")}catch(Vr){}!n&&om.Image&&((new Image).src=t.v,n=!0),n||(t.g=Vk(t.l,null),t.g.ha(t.v)),t.G=Date.now(),dy(t)}Fk(e)}function Sk(e){e.g&&(Ok(e),e.g.cancel(),e.g=null)}function Ek(e){Sk(e),e.u&&(om.clearTimeout(e.u),e.u=null),jk(e),e.i.cancel(),e.m&&("number"===typeof e.m&&om.clearTimeout(e.m),e.m=null)}function Ck(e){if(!Hy(e.i)&&!e.m){e.m=!0;var t=e.Na;xg||Eg(),_g||(xg(),_g=!0),Sg.add(t,e),e.C=0}}function Ik(e,t){var n;n=t?t.m:e.W++;var r=xy(e.I);Cy(r,"SID",e.K),Cy(r,"RID",n),Cy(r,"AID",e.V),Tk(e,r),e.o&&e.s&&bk(r,e.o,e.s),n=new ry(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Lk(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Qy(e.i,n),uy(n,r,t)}function Tk(e,t){e.na&&Gm(e.na,(function(e,n){Cy(t,n,e)})),e.h&&ky({},(function(e,n){Cy(t,n,e)}))}function Lk(e,t,n){n=Math.min(e.j.length,n);var r=e.h?dm(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Xy(l,o,"req"+c+"_")}catch(mi){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Nk(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;xg||Eg(),_g||(xg(),_g=!0),Sg.add(t,e),e.A=0}}function Pk(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Gg(dm(e.Ma,e),Mk(e,e.A)),e.A++,!0)}function Ok(e){null!=e.B&&(om.clearTimeout(e.B),e.B=null)}function Ak(e){e.g=new ry(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=xy(e.wa);Cy(t,"RID","rpc"),Cy(t,"SID",e.K),Cy(t,"AID",e.V),Cy(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Cy(t,"TO",e.qa),Cy(t,"TYPE","xmlhttp"),Tk(e,t),e.o&&e.s&&bk(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Iy(xy(t)),n.s=null,n.S=!0,cy(n,e)}function jk(e){null!=e.v&&(om.clearTimeout(e.v),e.v=null)}function Dk(e,t){var n=null;if(e.g==t){jk(e),Ok(e),e.g=null;var r=2}else{if(!Ky(e.i,t))return;n=t.F,Jy(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;hg(r=Vg(),new Hg(r,n)),Ck(e)}else Nk(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Gy(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Gg(dm(e.Na,e,t),Mk(e,e.C)),e.C++,!0))}(e,t)||2==r&&Pk(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Rk(e,5);break;case 4:Rk(e,10);break;case 3:Rk(e,6);break;default:Rk(e,2)}}function Mk(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Rk(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=dm(e.pb,e);n||(n=new wy("//www.google.com/images/cleardot.gif"),om.location&&"http"==om.location.protocol||_y(n,"https"),Iy(n)),function(e,t){var n=new Mg;if(om.Image){var r=new Image;r.onload=pm(ek,n,r,"TestLoadImage: loaded",!0,t),r.onerror=pm(ek,n,r,"TestLoadImage: error",!1,t),r.onabort=pm(ek,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=pm(ek,n,r,"TestLoadImage: timeout",!1,t),om.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Wg(2);e.H=0,e.h&&e.h.za(t),Fk(e),Ek(e)}function Fk(e){if(e.H=0,e.ma=[],e.h){var t=Zy(e.i);0==t.length&&0==e.j.length||(km(e.ma,t),km(e.ma,e.j),e.i.i.length=0,ym(e.j),e.j.length=0),e.h.ya()}}function Uk(e,t,n){var r=n instanceof wy?xy(n):new wy(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Sy(r,r.m);else{var i=om.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new wy(null);r&&_y(a,r),t&&(a.g=t),i&&Sy(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Cy(r,n,t),Cy(r,"VER",e.ra),Tk(e,r),r}function Vk(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new uk(new tk({ob:!0})):new uk(e.va)).Oa(e.J),t}function Bk(){}function zk(){if(Lm&&!(10<=Number(Um)))throw Error("Environmental error: no available transport.")}function qk(e,t){fg.call(this),this.g=new xk(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!xm(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!xm(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Gk(this)}function Wk(e){ey.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Hk(){ty.call(this),this.status=1}function Gk(e){this.g=e}function Kk(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Qk(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Jk(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(nm=uk.prototype).Oa=function(e){this.M=e},nm.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$g.g(),this.C=this.u?Zg(this.u):Zg($g),this.g.onreadystatechange=dm(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void hk(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=I(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=om.FormData&&e instanceof om.FormData,!(0<=gm(fk,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=I(n);try{for(c.s();!(u=c.n()).done;){var f=l(u.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{mk(this),0<this.B&&((this.L=function(e){return Lm&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dm(this.ua,this)):this.A=Lg(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){hk(this,s)}},nm.ua=function(){"undefined"!=typeof am&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hg(this,"timeout"),this.abort(8))},nm.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hg(this,"complete"),hg(this,"abort"),vk(this))},nm.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vk(this,!0)),uk.$.N.call(this)},nm.La=function(){this.s||(this.G||this.v||this.l?pk(this):this.kb())},nm.kb=function(){pk(this)},nm.isActive=function(){return!!this.g},nm.da=function(){try{return 2<gk(this)?this.g.status:-1}catch(Ar){return-1}},nm.ja=function(){try{return this.g?this.g.responseText:""}catch(Ar){return""}},nm.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),sk(t)}},nm.Ia=function(){return this.m},nm.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(nm=xk.prototype).ra=8,nm.H=1,nm.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new ry(this,this.l,e),n=this.s;if(this.U&&(n?Jm(n=Km(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Lk(this,t,r),Cy(i=xy(this.I),"RID",e),Cy(i,"CVER",22),this.F&&Cy(i,"X-HTTP-Session-Id",this.F),Tk(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(kk(n)))+"&"+r:this.o&&bk(i,this.o,n)),Qy(this.i,t),this.bb&&Cy(i,"TYPE","init"),this.P?(Cy(i,"$req",r),Cy(i,"SID","null"),t.aa=!0,uy(t,i,null)):uy(t,i,r),this.H=2}}else 3==this.H&&(e?Ik(this,e):0==this.j.length||Hy(this.i)||Ik(this))},nm.Ma=function(){if(this.u=null,Ak(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Gg(dm(this.jb,this),e)}},nm.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wg(10),Sk(this),Ak(this))},nm.ib=function(){null!=this.v&&(this.v=null,Sk(this),Pk(this),Wg(19))},nm.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Wg(2)):(this.l.info("Failed to ping google.com"),Wg(1))},nm.isActive=function(){return!!this.h&&this.h.isActive(this)},(nm=Bk.prototype).Ba=function(){},nm.Aa=function(){},nm.za=function(){},nm.ya=function(){},nm.isActive=function(){return!0},nm.Va=function(){},zk.prototype.g=function(e,t){return new qk(e,t)},vm(qk,fg),qk.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Wg(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Uk(e,null,e.Y),Ck(e)},qk.prototype.close=function(){_k(this.g)},qk.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=pg(e),e=n);t.j.push(new zy(t.fb++,e)),3==t.H&&Ck(t)},qk.prototype.N=function(){this.g.h=null,delete this.j,_k(this.g),delete this.g,qk.$.N.call(this)},vm(Wk,ey),vm(Hk,ty),vm(Gk,Bk),Gk.prototype.Ba=function(){hg(this.g,"a")},Gk.prototype.Aa=function(e){hg(this.g,new Wk(e))},Gk.prototype.za=function(e){hg(this.g,new Hk)},Gk.prototype.ya=function(){hg(this.g,"b")},vm(Kk,(function(){this.blockSize=-1})),Kk.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Kk.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Qk(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Qk(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Qk(this,r),i=0;break}}this.h=i,this.i+=t},Kk.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Zk={};function Yk(e){return-128<=e&&128>e?function(e,t){var n=Zk;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Jk([0|e],0>e?-1:0)})):new Jk([0|e],0>e?-1:0)}function $k(e){if(isNaN(e)||!isFinite(e))return eb;if(0>e)return ab($k(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Xk;return new Jk(t,0)}var Xk=4294967296,eb=Yk(0),tb=Yk(1),nb=Yk(16777216);function rb(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ib(e){return-1==e.h}function ab(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Jk(n,~e.h).add(tb)}function ob(e,t){return e.add(ab(t))}function sb(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ub(e,t){this.g=e,this.h=t}function cb(e,t){if(rb(t))throw Error("division by zero");if(rb(e))return new ub(eb,eb);if(ib(e))return t=cb(ab(e),t),new ub(ab(t.g),ab(t.h));if(ib(t))return t=cb(e,ab(t)),new ub(ab(t.g),t.h);if(30<e.g.length){if(ib(e)||ib(t))throw Error("slowDivide_ only works with positive integers.");for(var n=tb,r=t;0>=r.X(e);)n=lb(n),r=lb(r);var i=fb(n,1),a=fb(r,1);for(r=fb(r,2),n=fb(n,2);!rb(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=fb(r,1),n=fb(n,1)}return t=ob(e,i.R(t)),new ub(i,t)}for(i=eb;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=$k(n)).R(t);ib(o)||0<o.X(e);)o=(a=$k(n-=r)).R(t);rb(a)&&(a=tb),i=i.add(a),e=ob(e,o)}return new ub(i,e)}function lb(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Jk(n,e.h)}function fb(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Jk(i,e.h)}(nm=Jk.prototype).ea=function(){if(ib(this))return-ab(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Xk+r)*t,t*=Xk}return e},nm.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(rb(this))return"0";if(ib(this))return"-"+ab(this).toString(e);for(var t=$k(Math.pow(e,6)),n=this,r="";;){var i=cb(n,t).g,a=((0<(n=ob(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(rb(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},nm.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},nm.X=function(e){return ib(e=ob(this,e))?-1:rb(e)?0:1},nm.abs=function(){return ib(this)?ab(this):this},nm.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Jk(n,-2147483648&n[n.length-1]?-1:0)},nm.R=function(e){if(rb(this)||rb(e))return eb;if(ib(this))return ib(e)?ab(this).R(ab(e)):ab(ab(this).R(e));if(ib(e))return ab(this.R(ab(e)));if(0>this.X(nb)&&0>e.X(nb))return $k(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,sb(n,2*r+2*i),n[2*r+2*i+1]+=a*u,sb(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,sb(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,sb(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Jk(n,0)},nm.gb=function(e){return cb(this,e).h},nm.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Jk(n,this.h&e.h)},nm.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Jk(n,this.h|e.h)},nm.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Jk(n,this.h^e.h)},zk.prototype.createWebChannel=zk.prototype.g,qk.prototype.send=qk.prototype.u,qk.prototype.open=qk.prototype.m,qk.prototype.close=qk.prototype.close,Kg.NO_ERROR=0,Kg.TIMEOUT=8,Kg.HTTP_ERROR=6,Qg.COMPLETE="complete",Yg.EventType=Xg,Xg.OPEN="a",Xg.CLOSE="b",Xg.ERROR="c",Xg.MESSAGE="d",fg.prototype.listen=fg.prototype.O,uk.prototype.listenOnce=uk.prototype.P,uk.prototype.getLastError=uk.prototype.Sa,uk.prototype.getLastErrorCode=uk.prototype.Ia,uk.prototype.getStatus=uk.prototype.da,uk.prototype.getResponseJson=uk.prototype.Wa,uk.prototype.getResponseText=uk.prototype.ja,uk.prototype.send=uk.prototype.ha,uk.prototype.setWithCredentials=uk.prototype.Oa,Kk.prototype.digest=Kk.prototype.l,Kk.prototype.reset=Kk.prototype.reset,Kk.prototype.update=Kk.prototype.j,Jk.prototype.add=Jk.prototype.add,Jk.prototype.multiply=Jk.prototype.R,Jk.prototype.modulo=Jk.prototype.gb,Jk.prototype.compare=Jk.prototype.X,Jk.prototype.toNumber=Jk.prototype.ea,Jk.prototype.toString=Jk.prototype.toString,Jk.prototype.getBits=Jk.prototype.D,Jk.fromNumber=$k,Jk.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ab(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=$k(Math.pow(n,8)),i=eb,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=$k(Math.pow(n,o)),i=i.R(o).add($k(s))):i=(i=i.R(r)).add($k(s))}return i};var hb=im.createWebChannelTransport=function(){return new zk},db=im.getStatEventTarget=function(){return Vg()},pb=im.ErrorCode=Kg,vb=im.EventType=Qg,mb=im.Event=Fg,gb=im.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},yb=im.FetchXmlHttpFactory=tk,kb=im.WebChannel=Yg,bb=im.XhrIo=uk,wb=im.Md5=Kk,xb=im.Integer=Jk,_b="@firebase/firestore",Sb=function(){function e(t){d(this,e),this.uid=t}return g(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Sb.UNAUTHENTICATED=new Sb(null),Sb.GOOGLE_CREDENTIALS=new Sb("google-credentials-uid"),Sb.FIRST_PARTY=new Sb("first-party-uid"),Sb.MOCK_USER=new Sb("mock-user");var Eb="9.22.2",Cb=new hs("@firebase/firestore");function Ib(){return Cb.logLevel}function Tb(e){if(Cb.logLevel<=as.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pb);Cb.debug.apply(Cb,["Firestore (".concat(Eb,"): ").concat(e)].concat(h(i)))}}function Lb(e){if(Cb.logLevel<=as.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pb);Cb.error.apply(Cb,["Firestore (".concat(Eb,"): ").concat(e)].concat(h(i)))}}function Nb(e){if(Cb.logLevel<=as.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pb);Cb.warn.apply(Cb,["Firestore (".concat(Eb,"): ").concat(e)].concat(h(i)))}}function Pb(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ob(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Eb,") INTERNAL ASSERTION FAILED: ")+e;throw Lb(t),new Error(t)}function Ab(e,t){e||Ob()}function jb(e,t){return e}var Db={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Mb=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return g(n)}(Bo),Rb=g((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Fb=g((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ub=function(){function e(){d(this,e)}return g(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Sb.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Vb=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return g(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Bb=function(){function e(t){d(this,e),this.t=t,this.currentUser=Sb.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Rb;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Rb,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Tb("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Tb("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Rb)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Tb("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ab("string"==typeof n.accessToken),new Fb(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ab(null===e||"string"==typeof e),new Sb(e)}}]),e}(),zb=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Sb.FIRST_PARTY,this.g=new Map}return g(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),qb=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r}return g(e,[{key:"getToken",value:function(){return Promise.resolve(new zb(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Sb.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Wb=g((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Hb=function(){function e(t){d(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Tb("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Tb("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Tb("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Tb("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ab("string"==typeof t.token),e.T=t.token,new Wb(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Gb(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Kb=function(){function e(){d(this,e)}return g(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Gb(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Qb(e,t){return e<t?-1:e>t?1:0}function Jb(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Zb(e){return e+"\0"}var Yb=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Mb(Db.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Mb(Db.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Mb(Db.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mb(Db.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return g(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Qb(this.nanoseconds,e.nanoseconds):Qb(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),$b=function(){function e(t){d(this,e),this.timestamp=t}return g(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Yb(0,0))}},{key:"max",value:function(){return new e(new Yb(253402300799,999999999))}}]),e}(),Xb=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&Ob(),void 0===r?r=t.length-n:r>t.length-n&&Ob(),this.segments=t,this.offset=n,this.len=r}return g(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ew=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Mb(Db.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,h(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Xb),tw=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nw=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return tw.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Mb(Db.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Mb(Db.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Mb(Db.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Mb(Db.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Xb),rw=function(){function e(t){d(this,e),this.path=t}return g(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ew.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ew.fromString(t))}},{key:"fromName",value:function(t){return new e(ew.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ew.emptyPath())}},{key:"comparator",value:function(e,t){return ew.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ew(t.slice()))}}]),e}(),iw=g((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function aw(e){return e.fields.find((function(e){return 2===e.kind}))}function ow(e){return e.fields.filter((function(e){return 2!==e.kind}))}iw.UNKNOWN_ID=-1;var sw=g((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var uw=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return g(e,null,[{key:"empty",value:function(){return new e(0,fw.min())}}]),e}();function cw(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$b.fromTimestamp(1e9===r?new Yb(n+1,0):new Yb(n,r));return new fw(i,rw.empty(),t)}function lw(e){return new fw(e.readTime,e.key,-1)}var fw=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return g(e,null,[{key:"min",value:function(){return new e($b.min(),rw.empty(),-1)}},{key:"max",value:function(){return new e($b.max(),rw.empty(),-1)}}]),e}();function hw(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=rw.comparator(e.documentKey,t.documentKey))?n:Qb(e.largestBatchId,t.largestBatchId)}var dw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pw=function(){function e(){d(this,e),this.onCommittedListeners=[]}return g(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function vw(e){return mw.apply(this,arguments)}function mw(){return mw=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Db.FAILED_PRECONDITION&&t.message===dw){e.next=2;break}throw t;case 2:Tb("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),mw.apply(this,arguments)}var gw=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return g(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ob(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=I(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),yw=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new Rb,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new ww(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=Cw(e.target.error);r.v.reject(new ww(t,n))}}return g(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Tb("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new _w(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ww(n,t)}}}]),e}(),kw=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(Do())&&Lb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return g(e,[{key:"$",value:function(){var e=It(Et().mark((function e(t){var n=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Tb("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ww(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Mb(Db.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Mb(Db.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new ww(t,n))},i.onupgradeneeded=function(e){Tb("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){Tb("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=It(Et().mark((function e(t,n,r,i){var a,o,s,u,c=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=Et().mark((function e(){var n,s,u,l;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=yw.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),gw.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.R;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,Tb("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Tb("SimpleDb","Removing database:",e),Sw(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!Vo())return!1;if(e.C())return!0;var t=Do(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),bw=function(){function e(t){d(this,e),this.L=t,this.q=!1,this.U=null}return g(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Sw(this.L.delete())}}]),e}(),ww=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,Db.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return g(n)}(Mb);function xw(e){return"IndexedDbTransactionError"===e.name}var _w=function(){function e(t){d(this,e),this.store=t}return g(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Tb("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Tb("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Sw(n)}},{key:"add",value:function(e){return Tb("SimpleDb","ADD",this.store.name,e,e),Sw(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Sw(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Tb("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Tb("SimpleDb","DELETE",this.store.name,e),Sw(this.store.delete(e))}},{key:"count",value:function(){return Tb("SimpleDb","COUNT",this.store.name),Sw(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new gw((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new gw((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Tb("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new gw((function(n,r){t.onerror=function(e){var t=Cw(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new gw((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new bw(i),o=t(i.primaryKey,i.value,a);if(o instanceof gw){var s=o.catch((function(e){return a.done(),gw.reject(e)}));n.push(s)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return gw.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Sw(e){return new gw((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Cw(e.target.error);n(t)}}))}var Ew=!1;function Cw(e){var t=kw.S(Do());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Mb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ew||(Ew=!0,setTimeout((function(){throw r}),0)),r}}return e}var Iw=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return g(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Tb("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Tb,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!xw(e.t4)){e.next=17;break}Tb("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,vw(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Tw=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return g(e,[{key:"nt",value:function(){var e=It(Et().mark((function e(){var t,n=this,r=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return gw.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Tb("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Tb("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=lw(t);hw(r,n)>0&&(n=r)})),new fw(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Lw=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return g(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Nw(e){return null==e}function Pw(e){return 0===e&&1/e==-1/0}function Ow(e){return"number"==typeof e&&Number.isInteger(e)&&!Pw(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Aw(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Dw(t)),t=jw(e.get(n),t);return Dw(t)}function jw(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Dw(e){return e+"\x01\x01"}function Mw(e){var t=e.length;if(Ab(t>=2),2===t)return Ab("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ew.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ob(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ob()}a=o+2}return new ew(r)}Lw.ct=-1;var Rw=["userId","batchId"];function Fw(e,t){return[e,Aw(t)]}function Uw(e,t,n){return[e,Aw(t),n]}var Vw={},Bw=["prefixPath","collectionGroup","readTime","documentId"],zw=["prefixPath","collectionGroup","documentId"],qw=["collectionGroup","readTime","prefixPath","documentId"],Ww=["canonicalId","targetId"],Hw=["targetId","path"],Gw=["path","targetId"],Kw=["collectionId","parent"],Qw=["indexId","uid"],Jw=["uid","sequenceNumber"],Zw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yw=["indexId","uid","orderedDocumentKey"],$w=["userId","collectionPath","documentId"],Xw=["userId","collectionPath","largestBatchId"],ex=["userId","collectionGroup","largestBatchId"],tx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),nx=[].concat(h(tx),["documentOverlays"]),rx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ix=rx,ax=[].concat(ix,["indexConfiguration","indexState","indexEntries"]),ox=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return g(n)}(pw);function sx(e,t){var n=jb(e);return kw.M(n.ht,t)}function ux(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function cx(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function lx(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var fx=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||dx.EMPTY}return g(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,dx.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,dx.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new hx(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new hx(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new hx(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new hx(this.root,e,this.comparator,!0)}}]),e}(),hx=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return g(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),dx=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return g(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ob();if(this.right.isRed())throw Ob();var e=this.left.check();if(e!==this.right.check())throw Ob();return e+(this.isRed()?0:1)}}]),e}();dx.EMPTY=null,dx.RED=!0,dx.BLACK=!1,dx.EMPTY=new(function(){function e(){d(this,e),this.size=0}return g(e,[{key:"key",get:function(){throw Ob()}},{key:"value",get:function(){throw Ob()}},{key:"color",get:function(){throw Ob()}},{key:"left",get:function(){throw Ob()}},{key:"right",get:function(){throw Ob()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new dx(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var px=function(){function e(t){d(this,e),this.comparator=t,this.data=new fx(this.comparator)}return g(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new vx(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new vx(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),vx=function(){function e(t){d(this,e),this.iter=t}return g(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function mx(e){return e.hasNext()?e.getNext():void 0}var gx=function(){function e(t){d(this,e),this.fields=t,t.sort(nw.comparator)}return g(e,[{key:"unionWith",value:function(t){var n,r=new px(nw.comparator),i=I(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=I(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=I(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Jb(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),yx=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return g(n)}(E(Error));var kx=function(e){function t(e){d(this,t),this.binaryString=e}return g(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Qb(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yx("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();kx.EMPTY_BYTE_STRING=new kx("");var bx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wx(e){if(Ab(!!e),"string"==typeof e){var t=0,n=bx.exec(e);if(Ab(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:xx(e.seconds),nanos:xx(e.nanos)}}function xx(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _x(e){return"string"==typeof e?kx.fromBase64String(e):kx.fromUint8Array(e)}function Sx(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ex(e){var t=e.mapValue.fields.__previous_value__;return Sx(t)?Ex(t):t}function Cx(e){var t=wx(e.mapValue.fields.__local_write_time__.timestampValue);return new Yb(t.seconds,t.nanos)}var Ix=g((function e(t,n,r,i,a,o,s,u,c){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),Tx=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return g(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Lx={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Nx={nullValue:"NULL_VALUE"};function Px(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Sx(e)?4:Hx(e)?9007199254740991:10:Ob()}function Ox(e,t){if(e===t)return!0;var n=Px(e);if(n!==Px(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Cx(e).isEqual(Cx(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=wx(e.timestampValue),r=wx(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _x(e.bytesValue).isEqual(_x(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xx(e.geoPointValue.latitude)===xx(t.geoPointValue.latitude)&&xx(e.geoPointValue.longitude)===xx(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xx(e.integerValue)===xx(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=xx(e.doubleValue),r=xx(t.doubleValue);return n===r?Pw(n)===Pw(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jb(e.arrayValue.values||[],t.arrayValue.values||[],Ox);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ux(n)!==ux(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ox(n[i],r[i])))return!1;return!0}(e,t);default:return Ob()}}function Ax(e,t){return void 0!==(e.values||[]).find((function(e){return Ox(e,t)}))}function jx(e,t){if(e===t)return 0;var n=Px(e),r=Px(t);if(n!==r)return Qb(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qb(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=xx(e.integerValue||e.doubleValue),r=xx(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Dx(e.timestampValue,t.timestampValue);case 4:return Dx(Cx(e),Cx(t));case 5:return Qb(e.stringValue,t.stringValue);case 6:return function(e,t){var n=_x(e),r=_x(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Qb(n[i],r[i]);if(0!==a)return a}return Qb(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Qb(xx(e.latitude),xx(t.latitude));return 0!==n?n:Qb(xx(e.longitude),xx(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=jx(n[i],r[i]);if(a)return a}return Qb(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Lx.mapValue&&t===Lx.mapValue)return 0;if(e===Lx.mapValue)return 1;if(t===Lx.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Qb(r[o],a[o]);if(0!==s)return s;var u=jx(n[r[o]],i[a[o]]);if(0!==u)return u}return Qb(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ob()}}function Dx(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qb(e,t);var n=wx(e),r=wx(t),i=Qb(n.seconds,r.seconds);return 0!==i?i:Qb(n.nanos,r.nanos)}function Mx(e){return Rx(e)}function Rx(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=wx(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?_x(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,rw.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=I(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Rx(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=I(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Rx(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ob();var t,n}function Fx(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ux(e){return!!e&&"integerValue"in e}function Vx(e){return!!e&&"arrayValue"in e}function Bx(e){return!!e&&"nullValue"in e}function zx(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qx(e){return!!e&&"mapValue"in e}function Wx(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return cx(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Wx(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Wx(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Hx(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gx(e){return"nullValue"in e?Nx:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Fx(Tx.empty(),rw.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ob()}function Kx(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Fx(Tx.empty(),rw.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Lx:Ob()}function Qx(e,t){var n=jx(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Jx(e,t){var n=jx(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Zx=function(){function e(t){d(this,e),this.value=t}return g(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!qx(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wx(t)}},{key:"setAll",value:function(e){var t=this,n=nw.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Wx(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());qx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ox(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];qx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){cx(t,(function(t,n){return e[t]=n}));var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Wx(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Yx(e){var t=[];return cx(e.fields,(function(e,n){var r=new nw([e]);if(qx(n)){var i=Yx(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=I(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new gx(t)}var $x=function(){function e(t,n,r,i,a,o,s){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return g(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual($b.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Zx.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Zx.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=$b.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,$b.min(),$b.min(),$b.min(),Zx.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,$b.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,$b.min(),$b.min(),Zx.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,$b.min(),$b.min(),Zx.empty(),2)}}]),e}(),Xx=g((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function e_(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?rw.comparator(rw.fromName(o.referenceValue),n.key):jx(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function t_(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ox(e.position[n],t.position[n]))return!1;return!0}var n_=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function r_(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var i_=g((function e(){d(this,e)})),a_=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(jx(t,this.value)):null!==t&&Px(this.value)===Px(t)&&this.matchesComparison(jx(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ob()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new v_(e,t,r):"array-contains"===t?new k_(e,r):"in"===t?new b_(e,r):"not-in"===t?new w_(e,r):"array-contains-any"===t?new x_(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new m_(e,n):new g_(e,n)}}]),n}(i_),o_=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return g(n,[{key:"matches",value:function(e){return s_(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=I(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(i_);function s_(e){return"and"===e.op}function u_(e){return"or"===e.op}function c_(e){return l_(e)&&s_(e)}function l_(e){var t,n=I(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof o_)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function f_(e){if(e instanceof a_)return e.field.canonicalString()+e.op.toString()+Mx(e.value);if(c_(e))return e.filters.map((function(e){return f_(e)})).join(",");var t=e.filters.map((function(e){return f_(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function h_(e,t){return e instanceof a_?function(e,t){return t instanceof a_&&e.op===t.op&&e.field.isEqual(t.field)&&Ox(e.value,t.value)}(e,t):e instanceof o_?function(e,t){return t instanceof o_&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&h_(n,t.filters[r])}),!0)}(e,t):void Ob()}function d_(e,t){var n=e.filters.concat(t);return o_.create(n,e.op)}function p_(e){return e instanceof a_?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Mx(e.value))}(e):e instanceof o_?function(e){return e.op.toString()+" {"+e.getFilters().map(p_).join(" ,")+"}"}(e):"Filter"}var v_=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=rw.fromName(i.referenceValue),a}return g(n,[{key:"matches",value:function(e){var t=rw.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(a_),m_=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=y_("in",r),i}return g(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(a_),g_=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=y_("not-in",r),i}return g(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(a_);function y_(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return rw.fromName(e.referenceValue)}))}var k_=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Vx(t)&&Ax(t.arrayValue,this.value)}}]),n}(a_),b_=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ax(this.value.arrayValue,t)}}]),n}(a_),w_=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return g(n,[{key:"matches",value:function(e){if(Ax(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ax(this.value.arrayValue,t)}}]),n}(a_),x_=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return g(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Vx(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ax(t.value.arrayValue,e)}))}}]),n}(a_),__=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function S_(e){return new __(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function E_(e){var t=jb(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return f_(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Nw(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Mx(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Mx(e)})).join(",")),t.dt=n}return t.dt}function C_(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!r_(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!h_(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!t_(e.startAt,t.startAt)&&t_(e.endAt,t.endAt)}function I_(e){return rw.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function T_(e,t){return e.filters.filter((function(e){return e instanceof a_&&e.field.isEqual(t)}))}function L_(e,t,n){var r,i=Nx,a=!0,o=I(T_(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=Nx,c=!0;switch(s.op){case"<":case"<=":u=Gx(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=Nx}Qx({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Qx({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function N_(e,t,n){var r,i=Lx,a=!0,o=I(T_(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=Lx,c=!0;switch(s.op){case">=":case">":u=Kx(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=Lx}Jx({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Jx({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var P_=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this._t=null,this.startAt,this.endAt}));function O_(e,t,n,r,i,a,o,s){return new P_(e,t,n,r,i,a,o,s)}function A_(e){return new P_(e)}function j_(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function D_(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function M_(e){var t,n=I(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function R_(e){return null!==e.collectionGroup}function F_(e){var t=jb(e);if(null===t.wt){t.wt=[];var n=M_(t),r=D_(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new n_(n)),t.wt.push(new n_(nw.keyField(),"asc"));else{var i,a=!1,o=I(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new n_(nw.keyField(),u))}}}return t.wt}function U_(e){var t=jb(e);if(!t._t)if("F"===t.limitType)t._t=S_(t.path,t.collectionGroup,F_(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=I(F_(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new n_(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Xx(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Xx(t.startAt.position,t.startAt.inclusive):null;t._t=S_(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function V_(e,t){t.getFirstInequalityField(),M_(e);var n=e.filters.concat([t]);return new P_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function B_(e,t,n){return new P_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function z_(e,t){return C_(U_(e),U_(t))&&e.limitType===t.limitType}function q_(e){return"".concat(E_(U_(e)),"|lt:").concat(e.limitType)}function W_(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return p_(e)})).join(", "),"]")),Nw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Mx(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Mx(e)})).join(",")),"Target(".concat(t,")")}(U_(e)),"; limitType=").concat(e.limitType,")")}function H_(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):rw.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=I(F_(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=I(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=e_(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,F_(e),t))&&!(e.endAt&&!function(e,t,n){var r=e_(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,F_(e),t))}(e,t)}function G_(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function K_(e){return function(t,n){var r,i=!1,a=I(F_(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Q_(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Q_(e,t,n){var r=e.field.isKeyField()?rw.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?jx(r,i):Ob()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ob()}}var J_=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return g(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){cx(this.inner,(function(t,n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return lx(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Z_=new fx(rw.comparator);function Y_(){return Z_}var $_=new fx(rw.comparator);function X_(){for(var e=$_,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function eS(e){var t=$_;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function tS(){return rS()}function nS(){return rS()}function rS(){return new J_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var iS=new fx(rw.comparator),aS=new px(rw.comparator);function oS(){for(var e=aS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var sS=new px(Qb);function uS(){return sS}function cS(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pw(t)?"-0":t}}function lS(e){return{integerValue:""+e}}function fS(e,t){return Ow(t)?lS(t):cS(e,t)}var hS=g((function e(){d(this,e),this._=void 0}));function dS(e,t,n){return e instanceof mS?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Sx(t)&&(t=Ex(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof gS?yS(e,t):e instanceof kS?bS(e,t):function(e,t){var n=vS(e,t),r=xS(n)+xS(e.gt);return Ux(n)&&Ux(e.gt)?lS(r):cS(e.serializer,r)}(e,t)}function pS(e,t,n){return e instanceof gS?yS(e,t):e instanceof kS?bS(e,t):n}function vS(e,t){return e instanceof wS?Ux(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var mS=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(hS),gS=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return g(n)}(hS);function yS(e,t){var n,r=_S(t),i=I(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ox(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var kS=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return g(n)}(hS);function bS(e,t){var n,r=_S(t),i=I(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ox(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var wS=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return g(n)}(hS);function xS(e){return xx(e.integerValue||e.doubleValue)}function _S(e){return Vx(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var SS=g((function e(t,n){d(this,e),this.field=t,this.transform=n}));var ES=g((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),CS=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return g(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function IS(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var TS=g((function e(){d(this,e)}));function LS(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new BS(e.key,CS.none()):new jS(e.key,e.data,CS.none());var n,r=e.data,i=Zx.empty(),a=new px(nw.comparator),o=I(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new DS(e.key,i,new gx(a.toArray()),CS.none())}function NS(e,t,n){e instanceof jS?function(e,t,n){var r=e.value.clone(),i=RS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof DS?function(e,t,n){if(IS(e.precondition,t)){var r=RS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(MS(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function PS(e,t,n,r){return e instanceof jS?function(e,t,n,r){if(!IS(e.precondition,t))return n;var i=e.value.clone(),a=FS(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof DS?function(e,t,n,r){if(!IS(e.precondition,t))return n;var i=FS(e.fieldTransforms,r,t),a=t.data;return a.setAll(MS(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return IS(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function OS(e,t){var n,r=null,i=I(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=vS(a.transform,o||null);null!=s&&(null===r&&(r=Zx.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function AS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Jb(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gS&&t instanceof gS||e instanceof kS&&t instanceof kS?Jb(e.elements,t.elements,Ox):e instanceof wS&&t instanceof wS?Ox(e.gt,t.gt):e instanceof mS&&t instanceof mS}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var jS=function(e){k(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(TS),DS=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return g(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(TS);function MS(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function RS(e,t,n){var r=new Map;Ab(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,pS(o,s,n[i]))}return r}function FS(e,t,n){var r,i=new Map,a=I(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,dS(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var US,VS,BS=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(TS),zS=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(TS),qS=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return g(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&NS(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=I(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=PS(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=I(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=PS(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=nS();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=LS(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument($b.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),oS())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Jb(this.mutations,e.mutations,(function(e,t){return AS(e,t)}))&&Jb(this.baseMutations,e.baseMutations,(function(e,t){return AS(e,t)}))}}]),e}(),WS=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return g(e,null,[{key:"from",value:function(t,n,r){Ab(t.mutations.length===r.length);for(var i=iS,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),HS=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return g(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),GS=g((function e(t,n){d(this,e),this.count=t,this.unchangedNames=n}));function KS(e){switch(e){default:return Ob();case Db.CANCELLED:case Db.UNKNOWN:case Db.DEADLINE_EXCEEDED:case Db.RESOURCE_EXHAUSTED:case Db.INTERNAL:case Db.UNAVAILABLE:case Db.UNAUTHENTICATED:return!1;case Db.INVALID_ARGUMENT:case Db.NOT_FOUND:case Db.ALREADY_EXISTS:case Db.PERMISSION_DENIED:case Db.FAILED_PRECONDITION:case Db.ABORTED:case Db.OUT_OF_RANGE:case Db.UNIMPLEMENTED:case Db.DATA_LOSS:return!0}}function QS(e){if(void 0===e)return Lb("GRPC error has no .code"),Db.UNKNOWN;switch(e){case US.OK:return Db.OK;case US.CANCELLED:return Db.CANCELLED;case US.UNKNOWN:return Db.UNKNOWN;case US.DEADLINE_EXCEEDED:return Db.DEADLINE_EXCEEDED;case US.RESOURCE_EXHAUSTED:return Db.RESOURCE_EXHAUSTED;case US.INTERNAL:return Db.INTERNAL;case US.UNAVAILABLE:return Db.UNAVAILABLE;case US.UNAUTHENTICATED:return Db.UNAUTHENTICATED;case US.INVALID_ARGUMENT:return Db.INVALID_ARGUMENT;case US.NOT_FOUND:return Db.NOT_FOUND;case US.ALREADY_EXISTS:return Db.ALREADY_EXISTS;case US.PERMISSION_DENIED:return Db.PERMISSION_DENIED;case US.FAILED_PRECONDITION:return Db.FAILED_PRECONDITION;case US.ABORTED:return Db.ABORTED;case US.OUT_OF_RANGE:return Db.OUT_OF_RANGE;case US.UNIMPLEMENTED:return Db.UNIMPLEMENTED;case US.DATA_LOSS:return Db.DATA_LOSS;default:return Ob()}}(VS=US||(US={}))[VS.OK=0]="OK",VS[VS.CANCELLED=1]="CANCELLED",VS[VS.UNKNOWN=2]="UNKNOWN",VS[VS.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",VS[VS.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",VS[VS.NOT_FOUND=5]="NOT_FOUND",VS[VS.ALREADY_EXISTS=6]="ALREADY_EXISTS",VS[VS.PERMISSION_DENIED=7]="PERMISSION_DENIED",VS[VS.UNAUTHENTICATED=16]="UNAUTHENTICATED",VS[VS.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",VS[VS.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",VS[VS.ABORTED=10]="ABORTED",VS[VS.OUT_OF_RANGE=11]="OUT_OF_RANGE",VS[VS.UNIMPLEMENTED=12]="UNIMPLEMENTED",VS[VS.INTERNAL=13]="INTERNAL",VS[VS.UNAVAILABLE=14]="UNAVAILABLE",VS[VS.DATA_LOSS=15]="DATA_LOSS";var JS=function(){function e(){d(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return g(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return ZS}},{key:"getOrCreateInstance",value:function(){return null===ZS&&(ZS=new e),ZS}}]),e}(),ZS=null;function YS(){return new TextEncoder}var $S=new xb([4294967295,4294967295],0);function XS(e){var t=YS().encode(e),n=new wb;return n.update(t),new Uint8Array(n.digest())}function eE(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new xb([n,r],0),new xb([i,a],0)]}var tE=function(){function e(t,n,r){if(d(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nE("Invalid padding: ".concat(n));if(r<0)throw new nE("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new nE("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new nE("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=xb.fromNumber(this.It)}return g(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(xb.fromNumber(n)));return 1===r.compare($S)&&(r=new xb([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=l(eE(XS(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=l(eE(XS(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),nE=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return g(n)}(E(Error)),rE=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return g(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,iE.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e($b.min(),i,new fx(Qb),Y_(),oS())}}]),e}(),iE=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return g(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,oS(),oS(),oS())}}]),e}(),aE=g((function e(t,n,r,i){d(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),oE=g((function e(t,n){d(this,e),this.targetId=t,this.Vt=n})),sE=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kx.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),uE=function(){function e(){d(this,e),this.St=0,this.Dt=fE(),this.Ct=kx.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return g(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=oS(),t=oS(),n=oS();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ob()}})),new iE(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=fE()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),cE=function(){function e(t){d(this,e),this.Gt=t,this.Qt=new Map,this.jt=Y_(),this.zt=lE(),this.Wt=new fx(Qb)}return g(e,[{key:"Ht",value:function(e){var t,n=I(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(s){n.e(s)}finally{n.f()}var i,a=I(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:Ob()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(I_(a))if(0===r){var o=new rw(a.path);this.Yt(n,o,$x.newNoDocument(o,$b.min()))}else Ab(1===r);else{var s=this.ie(n);if(s!==r){var u=this.re(e,s);if(0!==u){this.ee(n);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=JS.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,s,u,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(u=null===(s=null==l?void 0:l.bits)||void 0===s?void 0:s.padding)&&void 0!==u?u:0}),c}(u,s,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,s=r.bits,u=s.bitmap,c=void 0===u?"":u,l=s.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=_x(c).toUint8Array()}catch(e){if(e instanceof yx)return Nb("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new tE(a,f,d)}catch(e){return Nb(e instanceof nE?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&I_(a.target)){var o=new rw(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,$x.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=oS();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new rE(e,n,this.Wt,this.jt,r);return this.jt=Y_(),this.zt=lE(),this.Wt=new fx(Qb),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new uE,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new px(Qb),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Tb("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new uE),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function lE(){return new fx(rw.comparator)}function fE(){return new fx(rw.comparator)}var hE={asc:"ASCENDING",desc:"DESCENDING"},dE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pE={and:"AND",or:"OR"},vE=g((function e(t,n){d(this,e),this.databaseId=t,this.useProto3Json=n}));function mE(e,t){return e.useProto3Json||Nw(t)?t:{value:t}}function gE(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function yE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function kE(e,t){return gE(e,t.toTimestamp())}function bE(e){return Ab(!!e),$b.fromTimestamp(function(e){var t=wx(e);return new Yb(t.seconds,t.nanos)}(e))}function wE(e,t){return function(e){return new ew(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function xE(e){var t=ew.fromString(e);return Ab(HE(t)),t}function _E(e,t){return wE(e.databaseId,t.path)}function SE(e,t){var n=xE(t);if(n.get(1)!==e.databaseId.projectId)throw new Mb(Db.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Mb(Db.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rw(TE(n))}function EE(e,t){return wE(e.databaseId,t)}function CE(e){var t=xE(e);return 4===t.length?ew.emptyPath():TE(t)}function IE(e){return new ew(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function TE(e){return Ab(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function LE(e,t,n){return{name:_E(e,t),fields:n.value.mapValue.fields}}function NE(e,t,n){var r=SE(e,t.name),i=bE(t.updateTime),a=t.createTime?bE(t.createTime):$b.min(),o=new Zx({mapValue:{fields:t.fields}}),s=$x.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function PE(e,t){return"found"in t?function(e,t){Ab(!!t.found),t.found.name,t.found.updateTime;var n=SE(e,t.found.name),r=bE(t.found.updateTime),i=t.found.createTime?bE(t.found.createTime):$b.min(),a=new Zx({mapValue:{fields:t.found.fields}});return $x.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Ab(!!t.missing),Ab(!!t.readTime);var n=SE(e,t.missing),r=bE(t.readTime);return $x.newNoDocument(n,r)}(e,t):Ob()}function OE(e,t){var n;if(t instanceof jS)n={update:LE(e,t.key,t.value)};else if(t instanceof BS)n={delete:_E(e,t.key)};else if(t instanceof DS)n={update:LE(e,t.key,t.data),updateMask:WE(t.fieldMask)};else{if(!(t instanceof zS))return Ob();n={verify:_E(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof mS)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gS)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof kS)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wS)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ob()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ob()}(e,t.precondition)),n}function AE(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?CS.updateTime(bE(e.updateTime)):void 0!==e.exists?CS.exists(e.exists):CS.none()}(t.currentDocument):CS.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ab("REQUEST_TIME"===t.setToServerValue),n=new mS;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new gS(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new kS(i)}else"increment"in t?n=new wS(e,t.increment):Ob();var a=nw.fromServerFormat(t.fieldPath);return new SS(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=SE(e,t.update.name),a=new Zx({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new gx(t.map((function(e){return nw.fromServerFormat(e)})))}(t.updateMask);return new DS(i,a,o,n,r)}return new jS(i,a,n,r)}if(t.delete){var s=SE(e,t.delete);return new BS(s,n)}if(t.verify){var u=SE(e,t.verify);return new zS(u,n)}return Ob()}function jE(e,t){return{documents:[EE(e,t.path)]}}function DE(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=EE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=EE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return qE(o_.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:BE(e.field),direction:FE(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=mE(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ME(e){var t=CE(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ab(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=RE(e);return t instanceof o_&&c_(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new n_(zE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Nw(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Xx(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Xx(n,t)}(n.endAt)),O_(t,i,s,o,u,"F",c,l)}function RE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=zE(e.unaryFilter.field);return a_.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=zE(e.unaryFilter.field);return a_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=zE(e.unaryFilter.field);return a_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=zE(e.unaryFilter.field);return a_.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ob()}}(e):void 0!==e.fieldFilter?function(e){return a_.create(zE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ob()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return o_.create(e.compositeFilter.filters.map((function(e){return RE(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ob()}}(e.compositeFilter.op))}(e):Ob()}function FE(e){return hE[e]}function UE(e){return dE[e]}function VE(e){return pE[e]}function BE(e){return{fieldPath:e.canonicalString()}}function zE(e){return nw.fromServerFormat(e.fieldPath)}function qE(e){return e instanceof a_?function(e){if("=="===e.op){if(zx(e.value))return{unaryFilter:{field:BE(e.field),op:"IS_NAN"}};if(Bx(e.value))return{unaryFilter:{field:BE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zx(e.value))return{unaryFilter:{field:BE(e.field),op:"IS_NOT_NAN"}};if(Bx(e.value))return{unaryFilter:{field:BE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:BE(e.field),op:UE(e.op),value:e.value}}}(e):e instanceof o_?function(e){var t=e.getFilters().map((function(e){return qE(e)}));return 1===t.length?t[0]:{compositeFilter:{op:VE(e.op),filters:t}}}(e):Ob()}function WE(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function HE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var GE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$b.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$b.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:kx.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return g(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),KE=g((function e(t){d(this,e),this.fe=t}));function QE(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:JE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:_E(e,t.key),fields:t.data.value.mapValue.fields,updateTime:gE(e,t.version.toTimestamp()),createTime:gE(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ZE(t.version)};else{if(!t.isUnknownDocument())return Ob();r.unknownDocument={path:n.path.toArray(),version:ZE(t.version)}}return r}function JE(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ZE(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function YE(e){var t=new Yb(e.seconds,e.nanoseconds);return $b.fromTimestamp(t)}function $E(e,t){for(var n=(t.baseMutations||[]).map((function(t){return AE(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return AE(e.fe,t)})),s=Yb.fromMillis(t.localWriteTimeMs);return new qS(t.batchId,s,n,o)}function XE(e){var t,n,r=YE(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?YE(e.lastLimboFreeSnapshotVersion):$b.min();return void 0!==e.query.documents?(Ab(1===(n=e.query).documents.length),t=U_(A_(CE(n.documents[0])))):t=function(e){return U_(ME(e))}(e.query),new GE(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,kx.fromBase64String(e.resumeToken))}function eC(e,t){var n,r=ZE(t.snapshotVersion),i=ZE(t.lastLimboFreeSnapshotVersion);n=I_(t.target)?jE(e.fe,t.target):DE(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:E_(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function tC(e){var t=ME({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?B_(t,t.limit,"L"):t}function nC(e,t){return new HS(t.largestBatchId,AE(e.fe,t.overlayMutation))}function rC(e,t){var n=t.path.lastSegment();return[e,Aw(t.path.popLast()),n]}function iC(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ZE(r.readTime),documentKey:Aw(r.documentKey.path),largestBatchId:r.largestBatchId}}var aC=function(){function e(){d(this,e)}return g(e,[{key:"getBundleMetadata",value:function(e,t){return oC(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:YE(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return oC(e).put({bundleId:(n=t).id,createTime:ZE(bE(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return sC(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:tC(t.bundledQuery),readTime:YE(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return sC(e).put(function(e){return{name:e.name,readTime:ZE(bE(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function oC(e){return sx(e,"bundles")}function sC(e){return sx(e,"namedQueries")}var uC=function(){function e(t,n){d(this,e),this.serializer=t,this.userId=n}return g(e,[{key:"getOverlay",value:function(e,t){var n=this;return cC(e).get(rC(this.userId,t)).next((function(e){return e?nC(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=tS();return gw.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new HS(t,a);i.push(r.we(e,o))})),gw.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Aw(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(cC(e).J("collectionPathOverlayIndex",i))})),gw.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=tS(),a=Aw(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return cC(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=nC(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=tS(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cC(e).X({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=nC(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return cC(e).put(function(e,t,n){var r=l(rC(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:OE(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function cC(e){return sx(e,"documentOverlays")}var lC=function(){function e(){d(this,e)}return g(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(xx(e.integerValue));else if("doubleValue"in e){var n=xx(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Pw(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(_x(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Hx(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ob()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),rw.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function fC(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function hC(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=fC(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}lC.Ve=new lC;var dC=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return g(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=hC(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=hC(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),pC=function(){function e(t){d(this,e),this.je=t}return g(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),vC=function(){function e(t){d(this,e),this.je=t}return g(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),mC=function(){function e(){d(this,e),this.je=new dC,this.ze=new pC(this.je),this.We=new vC(this.je)}return g(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),gC=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return g(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function yC(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=kC(e.arrayValue,t.arrayValue))?n:0!==(n=kC(e.directionalValue,t.directionalValue))?n:rw.comparator(e.documentKey,t.documentKey)}function kC(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var bC=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=I(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return g(e,[{key:"tn",value:function(e){Ab(e.collectionGroup===this.collectionId);var t=aw(e);if(void 0!==t&&!this.en(t))return!1;for(var n=ow(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],s))return!1}return!0}},{key:"en",value:function(e){var t,n=I(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function wC(e){var t,n;if(Ab(e instanceof a_||e instanceof o_),e instanceof a_){if(e instanceof b_){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return a_.create(e.field,"==",t)})))||[];return o_.create(r,"or")}return e}var i=e.filters.map((function(e){return wC(e)}));return o_.create(i,e.op)}function xC(e){if(0===e.getFilters().length)return[];var t=CC(wC(e));return Ab(EC(t)),_C(t)||SC(t)?[t]:t.getFilters()}function _C(e){return e instanceof a_}function SC(e){return e instanceof o_&&c_(e)}function EC(e){return _C(e)||SC(e)||function(e){if(e instanceof o_&&u_(e)){var t,n=I(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!_C(r)&&!SC(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function CC(e){if(Ab(e instanceof a_||e instanceof o_),e instanceof a_)return e;if(1===e.filters.length)return CC(e.filters[0]);var t=e.filters.map((function(e){return CC(e)})),n=o_.create(t,e.op);return EC(n=LC(n))?n:(Ab(n instanceof o_),Ab(s_(n)),Ab(n.filters.length>1),n.filters.reduce((function(e,t){return IC(e,t)})))}function IC(e,t){var n;return Ab(e instanceof a_||e instanceof o_),Ab(t instanceof a_||t instanceof o_),n=e instanceof a_?t instanceof a_?function(e,t){return o_.create([e,t],"and")}(e,t):TC(e,t):t instanceof a_?TC(t,e):function(e,t){if(Ab(e.filters.length>0&&t.filters.length>0),s_(e)&&s_(t))return d_(e,t.getFilters());var n=u_(e)?e:t,r=u_(e)?t:e,i=n.filters.map((function(e){return IC(e,r)}));return o_.create(i,"or")}(e,t),LC(n)}function TC(e,t){if(s_(t))return d_(t,e.getFilters());var n=t.filters.map((function(t){return IC(e,t)}));return o_.create(n,"or")}function LC(e){if(Ab(e instanceof a_||e instanceof o_),e instanceof a_)return e;var t=e.getFilters();if(1===t.length)return LC(t[0]);if(l_(e))return e;var n=t.map((function(e){return LC(e)})),r=[];return n.forEach((function(t){t instanceof a_?r.push(t):t instanceof o_&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:o_.create(r,e.op)}var NC=function(){function e(){d(this,e),this.rn=new PC}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),gw.resolve()}},{key:"getCollectionParents",value:function(e,t){return gw.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return gw.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return gw.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return gw.resolve(null)}},{key:"getIndexType",value:function(e,t){return gw.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return gw.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return gw.resolve(null)}},{key:"getMinOffset",value:function(e,t){return gw.resolve(fw.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return gw.resolve(fw.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return gw.resolve()}},{key:"updateIndexEntries",value:function(e,t){return gw.resolve()}}]),e}(),PC=function(){function e(){d(this,e),this.index={}}return g(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new px(ew.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new px(ew.comparator)).toArray()}}]),e}(),OC=new Uint8Array(0),AC=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.on=new PC,this.un=new J_((function(e){return E_(e)}),(function(e,t){return C_(e,t)})),this.uid=t.uid||""}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Aw(i)};return jC(e).put(a)}return gw.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Zb(t),""],!1,!0);return jC(e).j(r).next((function(e){var r,i=I(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Mw(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=MC(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=RC(e);return a.next((function(e){o.put(iC(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=MC(e),r=RC(e),i=DC(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=DC(e),i=!0,a=new Map;return gw.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=oS(),o=[];return gw.forEach(a,(function(i,a){var s;Tb("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(E_(t)));var u=function(e,t){var n=aw(t);if(void 0===n)return null;var r,i=I(T_(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=I(ow(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=I(T_(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=I(ow(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?L_(e,o.fieldPath,e.startAt):N_(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Xx(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=I(ow(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?N_(e,o.fieldPath,e.endAt):L_(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Xx(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,u,h,l.inclusive,d,f.inclusive,p);return gw.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=rw.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return gw.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:xC(o_.create(e.filters,"and")).map((function(t){return S_(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(){var u=t?s.dn(t[d/c]):OC,f=s.wn(e,u,n[d%c],r),p=s._n(e,u,i[d%c],a),v=o.map((function(t){return s.wn(e,u,t,!0)}));l.push.apply(l,h(s.createRange(f,p,v)))},d=0;d<u;++d)f();return l}},{key:"wn",value:function(e,t,n,r){var i=new gC(e,rw.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new gC(e,rw.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new bC(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=I(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return gw.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new px(nw.comparator),r=!1,i=I(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=I(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var u,c=I(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new mC,i=I(ow(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.He(a.kind);lC.Ve._e(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new mC;return lC.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new mC;return lC.Ve._e(Fx(this.databaseId,t),n.He(function(e){var t=ow(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new mC);var i,a=0,o=I(ow(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=I(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.yn(t,u.fieldPath)&&Vx(c))r=this.pn(r,u,c);else{var h=f.He(u.kind);lC.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=h(e),a=[],o=I(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=I(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new mC;f.seed(l.Qe()),lC.Ve._e(u,f.He(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof a_&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=MC(e),i=RC(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return gw.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new uw(t.sequenceNumber,new fw(YE(t.readTime),new rw(Mw(t.documentKey)),t.largestBatchId)):uw.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new sw(nw.fromServerFormat(n),r)}));return new iw(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Qb(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=MC(e),a=RC(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return gw.forEach(t,(function(t){return a.put(iC(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return gw.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?gw.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),gw.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?gw.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return DC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return DC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=DC(e),i=new px(yC);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new gC(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new px(yC),r=this.mn(t,e);if(null==r)return n;var i=aw(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Vx(a)){var o,s=I(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new gC(t.indexId,e.key,this.dn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new gC(t.indexId,e.key,OC,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;Tb("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=mx(a),u=mx(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=mx(o)):l?(i(s),s=mx(a)):(s=mx(a),u=mx(o))}}(r,i,yC,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),gw.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return RC(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return yC(e,t)})).filter((function(e,t,n){return!t||0!==yC(e,n[t-1])}));var r=[];r.push(e);var i,a=I(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=yC(o,e),u=yC(o,t);if(0===s)r[0]=e.Je();else if(s>0&&u<0)r.push(o),r.push(o.Je());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,OC,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,OC,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return yC(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(FC)}},{key:"getMinOffset",value:function(e,t){var n=this;return gw.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||Ob()}))})).next(FC)}}]),e}();function jC(e){return sx(e,"collectionParents")}function DC(e){return sx(e,"indexEntries")}function MC(e){return sx(e,"indexConfiguration")}function RC(e){return sx(e,"indexState")}function FC(e){Ab(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;hw(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fw(t.readTime,t.documentKey,n)}var UC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VC=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return g(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function BC(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.X({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Ab(1===s)})));var c,l=[],f=I(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Uw(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return gw.waitFor(a).next((function(){return l}))}function zC(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ob();t=e.noDocument}return JSON.stringify(t).length}VC.DEFAULT_COLLECTION_PERCENTILE=10,VC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,VC.DEFAULT=new VC(41943040,VC.DEFAULT_COLLECTION_PERCENTILE,VC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),VC.DISABLED=new VC(-1,0,0);var qC=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return g(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return HC(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=GC(e),o=HC(e);return o.add({}).next((function(s){Ab("number"==typeof s);var u,c=new qS(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return OE(e.fe,t)})),i=n.mutations.map((function(t){return OE(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new px((function(e,t){return Qb(e.canonicalString(),t.canonicalString())})),d=I(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Uw(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Vw))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[s]=c.keys()})),gw.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return HC(e).get(t).next((function(e){return e?(Ab(e.userId===n.userId),$E(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?gw.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return HC(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ab(t.batchId>=r),a=$E(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return HC(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return HC(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return $E(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Fw(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return GC(e).X({range:i},(function(r,i,o){var s=l(r,3),u=s[0],c=s[1],f=s[2],h=Mw(c);if(u===n.userId&&t.path.isEqual(h))return HC(e).get(f).next((function(e){if(!e)throw Ob();Ab(e.userId===n.userId),a.push($E(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new px(Qb),i=[];return t.forEach((function(t){var a=Fw(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=GC(e).X({range:o},(function(e,i,a){var o=l(e,3),s=o[0],u=o[1],c=o[2],f=Mw(u);s===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(s)})),gw.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Fw(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new px(Qb);return GC(e).X({range:o},(function(e,t,a){var o=l(e,3),u=o[0],c=o[1],f=o[2],h=Mw(c);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.Dn(e,s)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(HC(e).get(t).next((function(e){if(null===e)throw Ob();Ab(e.userId===n.userId),r.push($E(n.serializer,e))})))})),gw.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return BC(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),gw.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return gw.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return GC(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Mw(e[1]);i.push(a)}else r.done()})).next((function(){Ab(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return WC(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return KC(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return Ab(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function WC(e,t,n){var r=Fw(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return GC(e).X({range:a,Y:!0},(function(e,n,r){var a=l(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function HC(e){return sx(e,"mutations")}function GC(e){return sx(e,"documentMutations")}function KC(e){return sx(e,"mutationQueues")}var QC=function(){function e(t){d(this,e),this.Nn=t}return g(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),JC=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.serializer=n}return g(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new QC(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return $b.fromTimestamp(new Yb(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ZC(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return Ab(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ZC(e).X((function(o,s){var u=XE(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return gw.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ZC(e).X((function(e,n){var r=XE(n);t(r)}))}},{key:"$n",value:function(e){return YC(e).get("targetGlobalKey").next((function(e){return Ab(null!==e),e}))}},{key:"On",value:function(e,t){return YC(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return ZC(e).put(eC(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=E_(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ZC(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=XE(n);C_(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=$C(e);return t.forEach((function(t){var o=Aw(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),gw.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=$C(e);return gw.forEach(t,(function(t){var a=Aw(t.path);return gw.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=$C(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=$C(e),i=oS();return r.X({range:n,Y:!0},(function(e,t,n){var r=Mw(e[1]),a=new rw(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Aw(t.path),r=IDBKeyRange.bound([n],[Zb(n)],!1,!0),i=0;return $C(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return ZC(e).get(t).next((function(e){return e?XE(e):null}))}}]),e}();function ZC(e){return sx(e,"targets")}function YC(e){return sx(e,"targetGlobal")}function $C(e){return sx(e,"targetDocuments")}function XC(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],s=a[1],u=Qb(r,o);return 0===u?Qb(i,s):u}var eI=function(){function e(t){d(this,e),this.Ln=t,this.buffer=new px(XC),this.qn=0}return g(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();XC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),tI=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return g(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;Tb("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!xw(e.t0)){e.next=12;break}Tb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,vw(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),nI=function(){function e(t,n){d(this,e),this.jn=t,this.params=n}return g(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return gw.resolve(Lw.ct);var r=new eI(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Tb("LruGarbageCollector","Garbage collection skipped; disabled"),gw.resolve(UC)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Tb("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),UC):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Tb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Ib()<=as.DEBUG&&Tb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),gw.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function rI(e,t){return new nI(e,t)}var iI=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=rI(this,n)}return g(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return aI(e,n)}},{key:"removeReference",value:function(e,t,n){return aI(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return aI(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return KC(e).Z((function(r){return WC(e,r,t).next((function(e){return e&&(n=!0),gw.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,s){if(s<=t){var u=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,$b.min()),$C(e).delete([0,Aw(o.path)])}))}));i.push(u)}})).next((function(){return gw.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return aI(e,t)}},{key:"Yn",value:function(e,t){var n,r=$C(e),i=Lw.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Lw.ct&&t(new rw(Mw(n)),i),i=u,n=s):i=Lw.ct})).next((function(){i!==Lw.ct&&t(new rw(Mw(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function aI(e,t){return $C(e).put(function(e,t){return{targetId:0,path:Aw(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var oI=function(){function e(){d(this,e),this.changes=new J_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return g(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,$x.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?gw.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),sI=function(){function e(t){d(this,e),this.serializer=t}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return fI(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return fI(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],JE(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=$x.newInvalidDocument(t);return fI(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(hI(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:$x.newInvalidDocument(t)};return fI(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(hI(t))},(function(e,i){r={document:n.ts(t,i),size:zC(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Y_();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=Y_(),i=new fx(rw.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,zC(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return gw.resolve();var r=new px(pI);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(hI(r.first()),hI(r.last())),a=r.getIterator(),o=a.getNext();return fI(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=rw.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&pI(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(hI(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),JE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fI(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=Y_(),o=I(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.ts(rw.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(H_(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Y_(),o=dI(t,n),s=dI(t,fw.max());return fI(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.ts(rw.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new cI(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return lI(e).get("remoteDocumentGlobalKey").next((function(e){return Ab(!!e),e}))}},{key:"Zn",value:function(e,t){return lI(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=NE(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=rw.fromSegments(t.noDocument.path),i=YE(t.noDocument.readTime);n=$x.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ob();var a=rw.fromSegments(t.unknownDocument.path),o=YE(t.unknownDocument.version);n=$x.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Yb(e[0],e[1]);return $b.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual($b.min()))return n}return $x.newInvalidDocument(e)}}]),e}();function uI(e){return new sI(e)}var cI=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new J_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new px((function(e,t){return Qb(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.us.get(a);if(n.push(t.os.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=QE(t.os.serializer,o);i=i.add(a.path.popLast());var c=zC(u);r+=c-s.size,n.push(t.os.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=QE(t.os.serializer,o.convertToNoDocument($b.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),gw.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(oI);function lI(e){return sx(e,"remoteDocumentGlobal")}function fI(e){return sx(e,"remoteDocumentsV14")}function hI(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function dI(e,t){var n=t.documentKey.path.toArray();return[e,JE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pI(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Qb(n[a],r[a]))return i;return(i=Qb(n.length,r.length))||((i=Qb(n[n.length-2],r[r.length-2]))||Qb(n[n.length-1],r[r.length-1]))}var vI=g((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),mI=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return g(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&PS(r.mutation,e,gx.empty(),Yb.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,oS()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oS(),i=tS();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=X_();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=tS();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,oS())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Y_(),a=rS(),o=rS();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof DS)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),PS(o.mutation,t,o.mutation.getFieldMask(),Yb.now())):a.set(t.key,gx.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new vI(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=rS(),i=new fx((function(e,t){return e-t})),a=oS();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=I(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||gx.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||oS()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=nS();c.forEach((function(e){if(!a.has(e)){var n=LS(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return gw.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return rw.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):R_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):gw.resolve(tS()),s=-1,u=a;return o.next((function(t){return gw.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?gw.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,oS())})).next((function(e){return{batchId:s,changes:eS(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new rw(t)).next((function(e){var t=X_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=X_();return this.indexManager.getCollectionParents(e,i).next((function(o){return gw.forEach(o,(function(o){var s=function(e,t){return new P_(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,$x.newInvalidDocument(r)))}));var n=X_();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&PS(a.mutation,i,gx.empty(),Yb.now()),H_(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),gI=function(){function e(t){d(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return g(e,[{key:"getBundleMetadata",value:function(e,t){return gw.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:bE(n.createTime)}),gw.resolve()}},{key:"getNamedQuery",value:function(e,t){return gw.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:tC(e.bundledQuery),readTime:bE(e.readTime)}}(t)),gw.resolve()}}]),e}(),yI=function(){function e(){d(this,e),this.overlays=new fx(rw.comparator),this.ls=new Map}return g(e,[{key:"getOverlay",value:function(e,t){return gw.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=tS();return gw.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),gw.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),gw.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=tS(),i=t.length+1,a=new rw(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return gw.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new fx((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=tS(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=tS(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return gw.resolve(u)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new HS(t,n));var a=this.ls.get(t);void 0===a&&(a=oS(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),kI=function(){function e(){d(this,e),this.fs=new px(bI.ds),this.ws=new px(bI._s)}return g(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new bI(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new bI(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new rw(new ew([])),r=new bI(n,e),i=new bI(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new rw(new ew([])),n=new bI(t,e),r=new bI(t,e+1),i=oS();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new bI(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),bI=function(){function e(t,n){d(this,e),this.key=t,this.As=n}return g(e,null,[{key:"ds",value:function(e,t){return rw.comparator(e.key,t.key)||Qb(e.As,t.As)}},{key:"_s",value:function(e,t){return Qb(e.As,t.As)||rw.comparator(e.key,t.key)}}]),e}(),wI=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new px(bI.ds)}return g(e,[{key:"checkEmpty",value:function(e){return gw.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new qS(i,t,n,r);this.mutationQueue.push(a);var o,s=I(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Rs=this.Rs.add(new bI(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return gw.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return gw.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return gw.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return gw.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return gw.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new bI(t,0),i=new bI(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),gw.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new px(Qb);return t.forEach((function(e){var t=new bI(e,0),i=new bI(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),gw.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;rw.isDocumentKey(i)||(i=i.child(""));var a=new bI(new rw(i),0),o=new px(Qb);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),gw.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ab(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return gw.forEach(t.mutations,(function(i){var a=new bI(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new bI(t,0),r=this.Rs.firstAfterOrEqual(n);return gw.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,gw.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),xI=function(){function e(t){d(this,e),this.Ds=t,this.docs=new fx(rw.comparator),this.size=0}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return gw.resolve(n?n.document.mutableCopy():$x.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Y_();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():$x.newInvalidDocument(e))})),gw.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Y_(),a=t.path,o=new rw(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||hw(lw(l),n)<=0||(r.has(l.key)||H_(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return gw.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ob()}},{key:"Cs",value:function(e,t){return gw.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new _I(this)}},{key:"getSize",value:function(e){return gw.resolve(this.size)}}]),e}(),_I=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).os=e,r}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),gw.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(oI),SI=function(){function e(t){d(this,e),this.persistence=t,this.xs=new J_((function(e){return E_(e)}),C_),this.lastRemoteSnapshotVersion=$b.min(),this.highestTargetId=0,this.Ns=0,this.ks=new kI,this.targetCount=0,this.Ms=QC.kn()}return g(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),gw.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return gw.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return gw.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),gw.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),gw.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new QC(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,gw.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),gw.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,gw.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),gw.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return gw.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return gw.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),gw.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),gw.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),gw.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return gw.resolve(n)}},{key:"containsKey",value:function(e,t){return gw.resolve(this.ks.containsKey(t))}}]),e}(),EI=function(){function e(t,n){var r=this;d(this,e),this.$s={},this.overlays={},this.Os=new Lw(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new SI(this),this.indexManager=new NC,this.remoteDocumentCache=new xI((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new KE(n),this.qs=new gI(this.serializer)}return g(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new yI,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new wI(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Tb("MemoryPersistence","Starting transaction:",e);var i=new CI(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return gw.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),CI=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return g(n)}(pw),II=function(){function e(t){d(this,e),this.persistence=t,this.Qs=new kI,this.js=null}return g(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw Ob()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),gw.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),gw.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),gw.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gw.forEach(this.Ws,(function(r){var i=rw.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,$b.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return gw.or([function(){return gw.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),TI=function(){function e(t){d(this,e),this.serializer=t}return g(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new yw("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rw,{unique:!0}),e.createObjectStore("documentMutations")}(e),LI(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=gw.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),LI(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$b.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rw,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return gw.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:$w});t.createIndex("collectionPathOverlayIndex",Xw,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ex,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Bw});t.createIndex("documentKeyIndex",zw),t.createIndex("collectionGroupIndex",qw)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Qw}).createIndex("sequenceNumberIndex",Jw,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Zw}).createIndex("documentKeyIndex",Yw,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=zC(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return gw.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return gw.forEach(r,(function(r){Ab(r.userId===n.userId);var i=$E(t.serializer,r);return BC(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new ew(n),o=function(e){return[0,Aw(e)]}(a);r.push(t.get(o).next((function(n){return n?gw.resolve():function(n){return t.put({targetId:0,path:Aw(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return gw.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Kw});var n=t.store("collectionParents"),r=new PC,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Aw(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new ew(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],Mw(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=XE(r),a=eC(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new rw(ew.fromString(i.document.name).popFirst(5)):i.noDocument?rw.fromSegments(i.noDocument.path):i.unknownDocument?rw.fromSegments(i.unknownDocument.path):Ob()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return gw.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=uI(this.serializer),a=new EI(II.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:oS();$E(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),gw.forEach(r,(function(e,r){var o=new Sb(r),s=uC.de(n.serializer,o),u=a.getIndexManager(o),c=qC.de(o,n.serializer,u,a.referenceDelegate);return new mI(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new ox(t,Lw.ct),e).next()}))}))}}]),e}();function LI(e){e.createObjectStore("targetDocuments",{keyPath:Hw}).createIndex("documentTargetsIndex",Gw,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ww,{unique:!0}),e.createObjectStore("targetGlobal")}var NI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",PI=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=s,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new Mb(Db.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iI(this,i),this.di=n+"main",this.serializer=new KE(u),this.wi=new kw(this.di,this.ui,new TI(this.serializer)),this.Bs=new JC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uI(this.serializer),this.qs=new aC,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Lb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return g(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Mb(Db.FAILED_PRECONDITION,NI);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Lw(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=It(Et().mark((function n(r){return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=It(Et().mark((function t(n){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return AI(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(xw(t))return Tb("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Tb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return OI(e).get("owner").next((function(e){return gw.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return AI(e).delete(this.clientId)}},{key:"bi",value:function(){var e=It(Et().mark((function e(){var t,n,r,i,a=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=sx(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return gw.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=I(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?gw.resolve(!0):OI(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new Mb(Db.FAILED_PRECONDITION,NI);return!1}}return!(!t.networkEnabled||!t.inForeground)||AI(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Tb("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=It(Et().mark((function e(){var t=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ox(e,Lw.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return AI(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return qC.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new AC(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return uC.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Tb("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.ui)?ax:14===i?ix:13===i?rx:12===i?nx:11===i?tx:void Ob();return this.wi.runTransaction(e,o,s,(function(i){return a=new ox(i,r.Os?r.Os.next():Lw.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw Lb("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new Mb(Db.FAILED_PRECONDITION,dw);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return OI(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Mb(Db.FAILED_PRECONDITION,NI)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return OI(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=OI(e);return n.get("owner").next((function(e){return t.Ri(e)?(Tb("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):gw.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Lb("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!Mo()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Tb("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Lb("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(Lr){Lb("Failed to set zombie client id.",Lr)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(Lr){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return kw.D()}}]),e}();function OI(e){return sx(e,"owner")}function AI(e){return sx(e,"clientMetadata")}function jI(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var DI=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return g(e,null,[{key:"Li",value:function(t,n){var r,i=oS(),a=oS(),o=I(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),MI=function(){function e(){d(this,e),this.qi=!1}return g(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(j_(t))return gw.resolve(null);var r=U_(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=B_(t,null,"F"),r=U_(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=oS.apply(void 0,h(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,B_(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return j_(t)||r.isEqual($b.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Ib()<=as.DEBUG&&Tb("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),W_(t)),i.Wi(e,o,t,cw(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new px(K_(e));return t.forEach((function(t,r){H_(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Ib()<=as.DEBUG&&Tb("QueryEngine","Using full collection scan to execute query:",W_(t)),this.Ui.getDocumentsMatchingQuery(e,t,fw.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),RI=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new fx(Qb),this.Yi=new J_((function(e){return E_(e)}),C_),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return g(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mI(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function FI(e,t,n,r){return new RI(e,t,n,r)}function UI(e,t){return VI.apply(this,arguments)}function VI(){return VI=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jb(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=oS(),u=I(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=I(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=I(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=I(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;s=s.add(y.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function BI(e,t){var n=jb(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=gw.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ab(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=oS(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function zI(e){var t=jb(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function qI(e,t){var n=jb(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(kx.EMPTY_BYTE_STRING,$b.min()).withLastLimboFreeSnapshotVersion($b.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var s=Y_(),u=oS();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(WI(e,a,t.documentUpdates).next((function(e){s=e.nr,u=e.sr}))),!r.isEqual($b.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return gw.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function WI(e,t,n){var r=oS(),i=oS();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Y_();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual($b.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Tb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function HI(e,t){var n=jb(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function GI(e,t){var n=jb(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,gw.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new GE(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function KI(e,t,n){return QI.apply(this,arguments)}function QI(){return QI=It(Et().mark((function e(t,n,r){var i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=jb(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),xw(e.t1)){e.next=12;break}throw e.t1;case 12:Tb("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),QI.apply(this,arguments)}function JI(e,t,n){var r=jb(e),i=$b.min(),a=oS();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=jb(e),i=r.Yi.get(n);return void 0!==i?gw.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,U_(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:$b.min(),n?a:oS())})).next((function(e){return $I(r,G_(t),e),{documents:e,ir:a}}))}))}function ZI(e,t){var n=jb(e),r=jb(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function YI(e,t){var n=jb(e),r=n.Xi.get(t)||$b.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,cw(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return $I(n,t,e),e}))}function $I(e,t,n){var r=e.Xi.get(t)||$b.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function XI(e,t,n,r){return eT.apply(this,arguments)}function eT(){return eT=It(Et().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=jb(t),o=oS(),s=Y_(),u=I(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,GI(a,function(e){return U_(A_(ew.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return WI(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),eT.apply(this,arguments)}function tT(e,t){return nT.apply(this,arguments)}function nT(){return nT=It(Et().mark((function e(t,n){var r,i,a,o=arguments;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:oS(),e.next=3,GI(t,U_(tC(n.bundledQuery)));case 3:return i=e.sent,a=jb(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=bE(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(kx.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),nT.apply(this,arguments)}function rT(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function iT(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function aT(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var oT=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return g(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Mb(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Lb("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),sT=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return g(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Mb(i.error.code,i.error.message))),a?new e(t,i.state,r):(Lb("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),uT=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return g(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=uS(),o=0;i&&o<r.activeTargetIds.length;++o)i=Ow(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Lb("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),cT=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return g(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Lb("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),lT=function(){function e(){d(this,e),this.activeTargetIds=uS()}return g(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),fT=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new fx(Qb),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=rT(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new lT),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return g(e,[{key:"start",value:function(){var e=It(Et().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=I(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(rT(this.persistenceKey,i)))&&(o=uT.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(s=this.storage.getItem(this.vr))&&(u=this.br(s))&&this.Vr(u),c=I(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(aT(this.persistenceKey,e));if(n){var r=sT.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(aT(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Tb("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Tb("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Tb("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Tb("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Lb("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(It(Et().mark((function e(){var r,i,a,o,s,u,c;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(s));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}u=function(e){var t=Lw.ct;if(null!=e)try{var n=JSON.parse(e);Ab("number"==typeof n),t=n}catch(e){Lb("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Lw.ct&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new oT(this.currentUser,e,t,n),i=iT(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=iT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=aT(this.persistenceKey,e),i=new sT(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return uT.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return oT.ar(new Sb(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return sT.ar(r,t)}},{key:"br",value:function(e){return cT.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:Tb("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Wr(o,s).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=uS();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),hT=function(){function e(){d(this,e),this.Hr=new lT,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return g(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new lT,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),dT=function(){function e(){d(this,e)}return g(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),pT=function(){function e(){var t=this;d(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return g(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Tb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=I(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Tb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=I(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),vT=null;function mT(){return null===vT?vT=268435456+Math.round(2147483648*Math.random()):vT++,"0x"+vT.toString(16)}var gT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},yT=function(){function e(t){d(this,e),this.ro=t.ro,this.oo=t.oo}return g(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),kT="WebChannelConnection",bT=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return g(n,[{key:"Ao",value:function(e,t,n,r){var i=mT();return new Promise((function(a,o){var s=new bb;s.setWithCredentials(!0),s.listenOnce(vb.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case pb.NO_ERROR:var t=s.getResponseJson();Tb(kT,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case pb.TIMEOUT:Tb(kT,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Mb(Db.DEADLINE_EXCEEDED,"Request time out"));break;case pb.HTTP_ERROR:var n=s.getStatus();if(Tb(kT,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Db).indexOf(t)>=0?t:Db.UNKNOWN}(u.status);o(new Mb(c,u.message))}else o(new Mb(Db.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Mb(Db.UNAVAILABLE,"Connection failed."));break;default:Ob()}}finally{Tb(kT,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);Tb(kT,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=mT(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hb(),o=db(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new yb({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");Tb(kT,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),f=!1,h=!1,d=new yT({ro:function(t){h?Tb(kT,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Tb(kT,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Tb(kT,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,kb.EventType.OPEN,(function(){h||Tb(kT,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,kb.EventType.CLOSE,(function(){h||(h=!0,Tb(kT,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,kb.EventType.ERROR,(function(t){h||(h=!0,Nb(kT,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new Mb(Db.UNAVAILABLE,"The operation could not be completed")))})),p(l,kb.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Ab(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Tb(kT,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=US[e];if(void 0!==t)return QS(t)}(s),c=o.message;void 0===u&&(u=Db.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),h=!0,d.wo(new Mb(u,c)),l.close()}else Tb(kT,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,mb.STAT_EVENT,(function(t){t.stat===gb.PROXY?Tb(kT,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===gb.NOPROXY&&Tb(kT,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return g(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=mT(),o=this.To(e,t);Tb("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.Eo(s,r,i),this.Ao(e,o,s,n).then((function(t){return Tb("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Nb("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Eb,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=gT[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function wT(){return"undefined"!=typeof window?window:null}function xT(){return"undefined"!=typeof document?document:null}function _T(e){return new vE(e,!0)}var ST=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return g(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Tb("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),ET=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ST(t,n)}return g(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===Db.RESOURCE_EXHAUSTED?(Lb(n.toString()),Lb("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===Db.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new Mb(Db.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(It(Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Tb("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Tb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),CT=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return g(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ob()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Ab(void 0===t||"string"==typeof t),kx.fromBase64String(t||"")):(Ab(void 0===t||t instanceof Uint8Array),kx.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Db.UNKNOWN:QS(e.code);return new Mb(t,e.message||"")}(o);n=new sE(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=SE(e,u.document.name),l=bE(u.document.updateTime),f=u.document.createTime?bE(u.document.createTime):$b.min(),h=new Zx({mapValue:{fields:u.document.fields}}),d=$x.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new aE(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=SE(e,m.document),y=m.readTime?bE(m.readTime):$b.min(),k=$x.newNoDocument(g,y),b=m.removedTargetIds||[];n=new aE([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=SE(e,w.document),_=w.removedTargetIds||[];n=new aE([],_,x,null)}else{if(!("filter"in t))return Ob();t.filter;var S=t.filter;S.targetId;var E=S.count,C=void 0===E?0:E,I=S.unchangedNames,T=new GS(C,I),L=S.targetId;n=new oE(L,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return $b.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?$b.min():t.readTime?bE(t.readTime):$b.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=IE(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=I_(r)?{documents:jE(e,r)}:{query:DE(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=yE(e,t.resumeToken);var i=mE(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo($b.min())>0){n.readTime=gE(e,t.snapshotVersion.toTimestamp());var a=mE(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ob()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=IE(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(ET),IT=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.ru=!1,u}return g(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Tu(b(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Ab(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(Ab(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?bE(e.updateTime):bE(t);return n.isEqual($b.min())&&(n=bE(t)),new ES(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=bE(e.commitTime);return this.listener.cu(n,t)}return Ab(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=IE(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return OE(t.serializer,e)}))};this.Wo(n)}}]),n}(ET),TT=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return g(n,[{key:"fu",value:function(){if(this.lu)throw new Mb(Db.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.connection.Io(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Db.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Mb(Db.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),s=o[0],u=o[1];return i.connection.vo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Db.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Mb(Db.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return g((function e(){d(this,e)}))}());var LT=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return g(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Lb(t),this.mu=!1):Tb("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),NT=g((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=BT(o),!e.t0){e.next=5;break}return Tb("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=jb(t)).vu.add(4),e.next=4,AT(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,PT(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new LT(r,i)}));function PT(e){return OT.apply(this,arguments)}function OT(){return OT=It(Et().mark((function e(t){var n,r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!BT(t)){e.next=18;break}n=I(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),OT.apply(this,arguments)}function AT(e){return jT.apply(this,arguments)}function jT(){return jT=It(Et().mark((function e(t){var n,r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=I(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),jT.apply(this,arguments)}function DT(e,t){var n=jb(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),VT(n)?UT(n):mL(n).Ko()&&RT(n,t))}function MT(e,t){var n=jb(e),r=mL(n);n.Au.delete(t),r.Ko()&&FT(n,t),0===n.Au.size&&(r.Ko()?r.jo():BT(n)&&n.bu.set("Unknown"))}function RT(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($b.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}mL(e).su(t)}function FT(e,t){e.Vu.qt(t),mL(e).iu(t)}function UT(e){e.Vu=new cE({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),mL(e).start(),e.bu.gu()}function VT(e){return BT(e)&&!mL(e).Uo()&&e.Au.size>0}function BT(e){return 0===jb(e).vu.size}function zT(e){e.Vu=void 0}function qT(e){return WT.apply(this,arguments)}function WT(){return WT=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){RT(t,e)}));case 1:case"end":return e.stop()}}),e)}))),WT.apply(this,arguments)}function HT(e,t){return GT.apply(this,arguments)}function GT(){return GT=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zT(t),VT(t)?(t.bu.Iu(n),UT(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),GT.apply(this,arguments)}function KT(e,t,n){return QT.apply(this,arguments)}function QT(){return QT=It(Et().mark((function e(t,n,r){var i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof sE&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=It(Et().mark((function e(t,n){var r,i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=I(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Tb("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,JT(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof aE?t.Vu.Ht(n):n instanceof oE?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual($b.min())){e.next=29;break}return e.prev=14,e.next=17,zI(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(kx.EMPTY_BYTE_STRING,r.snapshotVersion)),FT(e,t);var i=new GE(r.target,t,n,r.sequenceNumber);RT(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Tb("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,JT(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),QT.apply(this,arguments)}function JT(e,t,n){return ZT.apply(this,arguments)}function ZT(){return ZT=It(Et().mark((function e(t,n,r){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xw(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,AT(t);case 5:t.bu.set("Offline"),r||(r=function(){return zI(t.localStore)}),t.asyncQueue.enqueueRetryable(It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tb("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,PT(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),ZT.apply(this,arguments)}function YT(e,t){return t().catch((function(n){return JT(e,n,t)}))}function $T(e){return XT.apply(this,arguments)}function XT(){return XT=It(Et().mark((function e(t){var n,r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=jb(t),r=gL(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!eL(n)){e.next=19;break}return e.prev=3,e.next=6,HI(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,tL(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,JT(n,e.t0);case 17:e.next=2;break;case 19:nL(n)&&rL(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),XT.apply(this,arguments)}function eL(e){return BT(e)&&e.Eu.length<10}function tL(e,t){e.Eu.push(t);var n=gL(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function nL(e){return BT(e)&&!gL(e).Uo()&&e.Eu.length>0}function rL(e){gL(e).start()}function iL(e){return aL.apply(this,arguments)}function aL(){return aL=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gL(t).hu();case 1:case"end":return e.stop()}}),e)}))),aL.apply(this,arguments)}function oL(e){return sL.apply(this,arguments)}function sL(){return sL=It(Et().mark((function e(t){var n,r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gL(t),r=I(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),sL.apply(this,arguments)}function uL(e,t,n){return cL.apply(this,arguments)}function cL(){return cL=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=WS.from(i,n,r),e.next=3,YT(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,$T(t);case 5:case"end":return e.stop()}}),e)}))),cL.apply(this,arguments)}function lL(e,t){return fL.apply(this,arguments)}function fL(){return fL=It(Et().mark((function e(t,n){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&gL(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=It(Et().mark((function e(t,n){var r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!KS(i=n.code)||i===Db.ABORTED){e.next=7;break}return r=t.Eu.shift(),gL(t).Qo(),e.next=5,YT(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,$T(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:nL(t)&&rL(t);case 5:case"end":return e.stop()}}),e)}))),fL.apply(this,arguments)}function hL(e,t){return dL.apply(this,arguments)}function dL(){return dL=It(Et().mark((function e(t,n){var r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=jb(t)).asyncQueue.verifyOperationInProgress(),Tb("RemoteStore","RemoteStore received new credentials"),i=BT(r),r.vu.add(3),e.next=6,AT(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,PT(r);case 12:case"end":return e.stop()}}),e)}))),dL.apply(this,arguments)}function pL(e,t){return vL.apply(this,arguments)}function vL(){return vL=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jb(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,PT(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,AT(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),vL.apply(this,arguments)}function mL(e){return e.Su||(e.Su=function(e,t,n){var r=jb(e);return r.fu(),new CT(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:qT.bind(null,e),ao:HT.bind(null,e),nu:KT.bind(null,e)}),e.Ru.push(function(){var t=It(Et().mark((function t(n){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),VT(e)?UT(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:zT(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function gL(e){return e.Du||(e.Du=function(e,t,n){var r=jb(e);return r.fu(),new IT(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:iL.bind(null,e),ao:lL.bind(null,e),au:oL.bind(null,e),cu:uL.bind(null,e)}),e.Ru.push(function(){var t=It(Et().mark((function t(n){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,$T(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Tb("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var yL=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Rb,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return g(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mb(Db.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function kL(e,t){if(Lb("AsyncQueue","".concat(t,": ").concat(e)),xw(e))return new Mb(Db.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var bL=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||rw.comparator(e.key,n.key)}:function(e,t){return rw.comparator(e.key,t.key)},this.keyedMap=X_(),this.sortedSet=new fx(this.comparator)}return g(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),wL=function(){function e(){d(this,e),this.Cu=new fx(rw.comparator)}return g(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ob():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),xL=function(){function e(t,n,r,i,a,o,s,u,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return g(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&z_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,bL.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),_L=g((function e(){d(this,e),this.Nu=void 0,this.listeners=[]})),SL=g((function e(){d(this,e),this.queries=new J_((function(e){return q_(e)}),z_),this.onlineState="Unknown",this.ku=new Set}));function EL(e,t){return CL.apply(this,arguments)}function CL(){return CL=It(Et().mark((function e(t,n){var r,i,a,o,s;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jb(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new _L),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=kL(e.t0,"Initialization of query '".concat(W_(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&PL(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),CL.apply(this,arguments)}function IL(e,t){return TL.apply(this,arguments)}function TL(){return TL=It(Et().mark((function e(t,n){var r,i,a,o,s;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jb(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),TL.apply(this,arguments)}function LL(e,t){var n,r=jb(e),i=!1,a=I(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=I(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&PL(r)}function NL(e,t,n){var r=jb(e),i=r.queries.get(t);if(i){var a,o=I(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function PL(e){e.ku.forEach((function(e){e.next()}))}var OL=function(){function e(t,n,r){d(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return g(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=I(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new xL(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=xL.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),AL=function(){function e(t,n){d(this,e),this.Gu=t,this.byteLength=n}return g(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),jL=function(){function e(t){d(this,e),this.serializer=t}return g(e,[{key:"rr",value:function(e){return SE(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?NE(this.serializer,e.document,!1):$x.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return bE(e)}}]),e}(),DL=function(){function e(t,n,r){d(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ML(t)}return g(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=ew.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new jL(this.serializer),i=I(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.rr(a.metadata.name),u=I(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||oS()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=It(Et().mark((function e(){var t,n,r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,XI(this.localStore,new jL(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=I(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,tT(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ML(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var RL=g((function e(t){d(this,e),this.key=t})),FL=g((function e(t){d(this,e),this.key=t})),UL=function(){function e(t,n){d(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=oS(),this.mutatedKeys=oS(),this.tc=K_(t),this.ec=new bL(this.tc)}return g(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new wL,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=H_(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.tc(f,u)>0||c&&n.tc(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:s,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ob()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,u=s!==this.Xu;return this.Xu=s,0!==a.length||u?{snapshot:new xL(this.query,e.ec,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new wL,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=oS(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new FL(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new RL(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=oS();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return xL.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),VL=g((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),BL=g((function e(t){d(this,e),this.key=t,this.fc=!1})),zL=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new J_((function(e){return q_(e)}),z_),this._c=new Map,this.mc=new Set,this.gc=new fx(rw.comparator),this.yc=new Map,this.Ic=new kI,this.Tc={},this.Ec=new Map,this.Ac=QC.Mn(),this.onlineState="Unknown",this.vc=void 0}return g(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function qL(e,t){return WL.apply(this,arguments)}function WL(){return WL=It(Et().mark((function e(t,n){var r,i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=MN(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,GI(r.localStore,U_(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,HL(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&DT(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),WL.apply(this,arguments)}function HL(e,t,n,r,i){return GL.apply(this,arguments)}function GL(){return GL=It(Et().mark((function e(t,n,r,i,a){var o,s,u,c,l,f;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=It(Et().mark((function e(t,n,r,i){var a,o,s;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,JI(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(hN(t,n.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,JI(t.localStore,n,!0);case 3:return o=e.sent,s=new UL(n,o.ir),u=s.sc(o.documents),c=iE.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),hN(t,r,l.cc),f=new VL(n,r,s),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),GL.apply(this,arguments)}function KL(e,t){return QL.apply(this,arguments)}function QL(){return QL=It(Et().mark((function e(t,n){var r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jb(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!z_(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,KI(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),MT(r.remoteStore,i.targetId),lN(r,i.targetId)})).catch(vw);case 9:e.next=14;break;case 11:return lN(r,i.targetId),e.next=14,KI(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),QL.apply(this,arguments)}function JL(e,t,n){return ZL.apply(this,arguments)}function ZL(){return ZL=It(Et().mark((function e(t,n,r){var i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=RN(t),e.prev=1,e.next=4,function(e,t){var n,r,i=jb(e),a=Yb.now(),o=t.reduce((function(e,t){return e.add(t.key)}),oS());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Y_(),u=oS();return i.Zi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=I(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=OS(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new DS(c.key,l,Yx(l.value.mapValue),CS.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:eS(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new fx(Qb)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,vN(i,a.changes);case 9:return e.next=11,$T(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=kL(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),ZL.apply(this,arguments)}function YL(e,t){return $L.apply(this,arguments)}function $L(){return $L=It(Et().mark((function e(t,n){var r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jb(t),e.prev=1,e.next=4,qI(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(Ab(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Ab(n.fc):e.removedDocuments.size>0&&(Ab(n.fc),n.fc=!1))})),e.next=8,vN(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,vw(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),$L.apply(this,arguments)}function XL(e,t,n){var r=jb(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=jb(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=I(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&PL(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function eN(e,t,n){return tN.apply(this,arguments)}function tN(){return tN=It(Et().mark((function e(t,n,r){var i,a,o,s,u,c;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=jb(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new fx(rw.comparator)).insert(o,$x.newNoDocument(o,$b.min())),u=oS().add(o),c=new rE($b.min(),new Map,new fx(Qb),s,u),e.next=9,YL(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),pN(i),e.next=16;break;case 14:return e.next=16,KI(i.localStore,n,!1).then((function(){return lN(i,n,r)})).catch(vw);case 16:case"end":return e.stop()}}),e)}))),tN.apply(this,arguments)}function nN(e,t){return rN.apply(this,arguments)}function rN(){return rN=It(Et().mark((function e(t,n){var r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jb(t),i=n.batch.batchId,e.prev=1,e.next=4,BI(r.localStore,n);case 4:return a=e.sent,cN(r,i,null),uN(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,vN(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,vw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),rN.apply(this,arguments)}function iN(e,t,n){return aN.apply(this,arguments)}function aN(){return aN=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jb(t),e.prev=1,e.next=4,function(e,t){var n=jb(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ab(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,cN(i,n,r),uN(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,vN(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,vw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),aN.apply(this,arguments)}function oN(e,t){return sN.apply(this,arguments)}function sN(){return sN=It(Et().mark((function e(t,n){var r,i,a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return BT((r=jb(t)).remoteStore)||Tb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=jb(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=kL(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),sN.apply(this,arguments)}function uN(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function cN(e,t,n){var r=jb(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function lN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=I(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||fN(e,t)}))}function fN(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(MT(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),pN(e))}function hN(e,t,n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof RL?(e.Ic.addReference(a.key,t),dN(e,a)):a instanceof FL?(Tb("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||fN(e,a.key)):Ob()}}catch(o){i.e(o)}finally{i.f()}}function dN(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Tb("SyncEngine","New document in limbo: "+n),e.mc.add(r),pN(e))}function pN(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new rw(ew.fromString(t)),r=e.Ac.next();e.yc.set(r,new BL(n)),e.gc=e.gc.insert(n,r),DT(e.remoteStore,new GE(U_(A_(n.path)),r,"TargetPurposeLimboResolution",Lw.ct))}}function vN(e,t,n){return mN.apply(this,arguments)}function mN(){return mN=It(Et().mark((function e(t,n,r){var i,a,o,s;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=jb(t),a=[],o=[],s=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){s.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=DI.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.dc.nu(a),e.next=9,function(){var e=It(Et().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jb(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return gw.forEach(n,(function(t){return gw.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return gw.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),xw(e.t0)){e.next=10;break}throw e.t0;case 10:Tb("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=I(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),mN.apply(this,arguments)}function gN(e,t){return yN.apply(this,arguments)}function yN(){return yN=It(Et().mark((function e(t,n){var r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=jb(t)).currentUser.isEqual(n)){e.next=11;break}return Tb("SyncEngine","User change. New user:",n.toKey()),e.next=5,UI(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new Mb(Db.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,vN(r,i.er);case 11:case"end":return e.stop()}}),e)}))),yN.apply(this,arguments)}function kN(e,t){var n=jb(e),r=n.yc.get(t);if(r&&r.fc)return oS().add(r.key);var i=oS(),a=n._c.get(t);if(!a)return i;var o,s=I(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.wc.get(u);i=i.unionWith(c.view.nc)}}catch(l){s.e(l)}finally{s.f()}return i}function bN(e,t){return wN.apply(this,arguments)}function wN(){return wN=It(Et().mark((function e(t,n){var r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jb(t),e.next=3,JI(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&hN(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)}))),wN.apply(this,arguments)}function xN(e,t){return _N.apply(this,arguments)}function _N(){return _N=It(Et().mark((function e(t,n){var r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jb(t),e.abrupt("return",YI(r.localStore,n).then((function(e){return vN(r,e)})));case 2:case"end":return e.stop()}}),e)}))),_N.apply(this,arguments)}function SN(e,t,n,r){return EN.apply(this,arguments)}function EN(){return EN=It(Et().mark((function e(t,n,r,i){var a,o;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jb(t),e.next=3,function(e,t){var n=jb(e),r=jb(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):gw.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,$T(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(cN(a,n,i||null),uN(a,n),function(e,t){jb(jb(e).mutationQueue).Cn(t)}(a.localStore,n)):Ob();case 11:return e.next=13,vN(a,o);case 13:e.next=16;break;case 15:Tb("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),EN.apply(this,arguments)}function CN(e,t){return IN.apply(this,arguments)}function IN(){return IN=It(Et().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(MN(r=jb(t)),RN(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,TN(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,pL(r.remoteStore,!0);case 9:o=I(a);try{for(o.s();!(s=o.n()).done;)u=s.value,DT(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return lN(r,t),KI(r.localStore,t,!0)})),MT(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,TN(r,c);case 21:return function(e){var t=jb(e);t.yc.forEach((function(e,n){MT(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new fx(rw.comparator)}(r),r.vc=!1,e.next=25,pL(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),IN.apply(this,arguments)}function TN(e,t,n){return LN.apply(this,arguments)}function LN(){return LN=It(Et().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,g;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=jb(t),a=[],o=[],s=I(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,GI(i.localStore,U_(f[0]));case 11:l=e.sent,h=I(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,bN(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,ZI(i.localStore,c);case 36:return g=e.sent,e.next=39,GI(i.localStore,g);case 39:return l=e.sent,e.next=42,HL(i,NN(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),LN.apply(this,arguments)}function NN(e){return O_(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function PN(e){var t=jb(e);return jb(jb(t.localStore).persistence).$i()}function ON(e,t,n,r){return AN.apply(this,arguments)}function AN(){return AN=It(Et().mark((function e(t,n,r,i){var a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=jb(t)).vc){e.next=3;break}return e.abrupt("return",void Tb("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,YI(a.localStore,G_(o[0]));case 10:return s=e.sent,u=rE.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,kx.EMPTY_BYTE_STRING),e.next=14,vN(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,KI(a.localStore,n,!0);case 17:return lN(a,n,i),e.abrupt("break",20);case 19:Ob();case 20:case"end":return e.stop()}}),e)}))),AN.apply(this,arguments)}function jN(e,t,n){return DN.apply(this,arguments)}function DN(){return DN=It(Et().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=MN(t)).vc){e.next=45;break}a=I(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i._c.has(s)){e.next=10;break}return Tb("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,ZI(i.localStore,s);case 12:return u=e.sent,e.next=15,GI(i.localStore,u);case 15:return c=e.sent,e.next=18,HL(i,NN(u),c.targetId,!1,c.resumeToken);case 18:DT(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=I(r),e.prev=30,h=Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,KI(i.localStore,t,!1).then((function(){MT(i.remoteStore,t),lN(i,t)})).catch(vw);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),DN.apply(this,arguments)}function MN(e){var t=jb(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=YL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=eN.bind(null,t),t.dc.nu=LL.bind(null,t.eventManager),t.dc.Pc=NL.bind(null,t.eventManager),t}function RN(e){var t=jb(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=nN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=iN.bind(null,t),t}function FN(e,t,n){var r=jb(e);(function(){var e=It(Et().mark((function e(t,n,r){var i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=jb(e),r=bE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(ML(i)),a=new DL(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,vN(t,u.Ju,void 0);case 31:return e.next=33,function(e,t){var n=jb(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Nb("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var UN=function(){function e(){d(this,e),this.synchronizeTabs=!1}return g(e,[{key:"initialize",value:function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=_T(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return FI(this.persistence,new MI,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new EI(II.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new hT}},{key:"terminate",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),VN=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return g(n,[{key:"initialize",value:function(){var e=It(Et().mark((function e(t){var r=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tu(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,RN(this.Vc.syncEngine);case 6:return e.next=8,$T(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return FI(this.persistence,new MI,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new tI(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Tw(t,this.persistence);return new Iw(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=jI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?VC.withCacheSize(this.cacheSizeBytes):VC.DEFAULT;return new PI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,wT(),xT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new hT}}]),n}(UN),BN=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return g(n,[{key:"initialize",value:function(){var e=It(Et().mark((function e(t){var r,i=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tu(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof fT,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:SN.bind(null,r),zr:ON.bind(null,r),Wr:jN.bind(null,r),$i:PN.bind(null,r),Qr:xN.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CN(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=wT();if(!fT.D(t))throw new Mb(Db.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fT(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(VN),zN=function(){function e(){d(this,e)}return g(e,[{key:"initialize",value:function(){var e=It(Et().mark((function e(t,n){var r=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return XL(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=gN.bind(null,this.syncEngine),e.next=12,pL(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new SL}},{key:"createDatastore",value:function(e){var t,n=_T(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new bT(t));return function(e,t,n,r){return new TT(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return XL(o.syncEngine,e,0)},a=pT.D()?new pT:new dT,new NT(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new zL(e,t,n,r,i,a);return o&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jb(t),Tb("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,AT(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function qN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return It(Et().mark((function r(){var i;return Et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var WN=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return g(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Lb("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),HN=function(){function e(t,n){var r=this;d(this,e),this.Cc=t,this.serializer=n,this.metadata=new Rb,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return g(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=It(Et().mark((function e(){var t,n,r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new AL(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=It(Et().mark((function e(){var t,n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=It(Et().mark((function e(){var t,n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),GN=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return g(e,[{key:"lookup",value:function(){var e=It(Et().mark((function e(t){var n,r=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Mb(Db.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=It(Et().mark((function e(t,n){var r,i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jb(t),i=IE(r.serializer)+"/documents",a={documents:n.map((function(e){return _E(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=PE(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Ab(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new BS(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=It(Et().mark((function e(){var t,n=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=rw.fromPath(t);n.mutations.push(new zS(r,n.precondition(r)))})),e.next=7,function(){var e=It(Et().mark((function e(t,n){var r,i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jb(t),i=IE(r.serializer)+"/documents",a={writes:n.map((function(e){return OE(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ob();t=$b.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Mb(Db.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual($b.min())?CS.exists(!1):CS.updateTime(t):CS.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($b.min()))throw new Mb(Db.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return CS.updateTime(t)}return CS.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),KN=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new ST(this.asyncQueue,"transaction_retry")}return g(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(It(Et().mark((function t(){var n,r;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new GN(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Nw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!KS(t)}return!1}}]),e}(),QN=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Sb.UNAUTHENTICATED,this.clientId=Kb.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tb("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Tb("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return g(e,[{key:"getConfiguration",value:function(){var e=It(Et().mark((function e(){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Mb(Db.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Rb;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(It(Et().mark((function n(){var r;return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=kL(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function JN(e,t){return ZN.apply(this,arguments)}function ZN(){return ZN=It(Et().mark((function e(t,n){var r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Tb("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,UI(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ZN.apply(this,arguments)}function YN(e,t){return $N.apply(this,arguments)}function $N(){return $N=It(Et().mark((function e(t,n){var r,i;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,eP(t);case 3:return r=e.sent,Tb("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return hL(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return hL(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),$N.apply(this,arguments)}function XN(e){return"FirebaseError"===e.name?e.code===Db.FAILED_PRECONDITION||e.code===Db.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function eP(e){return tP.apply(this,arguments)}function tP(){return tP=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Tb("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,JN(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),XN(n=e.t0)){e.next=13;break}throw n;case 13:return Nb("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,JN(t,new UN);case 16:e.next=21;break;case 18:return Tb("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,JN(t,new UN);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),tP.apply(this,arguments)}function nP(e){return rP.apply(this,arguments)}function rP(){return rP=It(Et().mark((function e(t){return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Tb("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,YN(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Tb("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,YN(t,new zN);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),rP.apply(this,arguments)}function iP(e){return eP(e).then((function(e){return e.persistence}))}function aP(e){return eP(e).then((function(e){return e.localStore}))}function oP(e){return nP(e).then((function(e){return e.remoteStore}))}function sP(e){return nP(e).then((function(e){return e.syncEngine}))}function uP(e){return nP(e).then((function(e){return e.datastore}))}function cP(e){return lP.apply(this,arguments)}function lP(){return lP=It(Et().mark((function e(t){var n,r;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nP(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=qL.bind(null,n.syncEngine),r.onUnlisten=KL.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),lP.apply(this,arguments)}function fP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Rb;return e.asyncQueue.enqueueAndForget(It(Et().mark((function i(){return Et().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new WN({next:function(a){t.enqueueAndForget((function(){return IL(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Mb(Db.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Mb(Db.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new OL(A_(n.path),a,{includeMetadataChanges:!0,Ku:!0});return EL(e,o)},i.next=3,cP(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function hP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Rb;return e.asyncQueue.enqueueAndForget(It(Et().mark((function i(){return Et().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new WN({next:function(n){t.enqueueAndForget((function(){return IL(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Mb(Db.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new OL(n,a,{includeMetadataChanges:!0,Ku:!0});return EL(e,o)},i.next=3,cP(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function dP(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var pP=new Map;function vP(e,t,n){if(!n)throw new Mb(Db.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function mP(e,t,n,r){if(!0===t&&!0===r)throw new Mb(Db.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function gP(e){if(!rw.isDocumentKey(e))throw new Mb(Db.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function yP(e){if(rw.isDocumentKey(e))throw new Mb(Db.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function kP(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ob()}function bP(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Mb(Db.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=kP(e);throw new Mb(Db.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function wP(e,t){if(t<=0)throw new Mb(Db.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var xP=function(){function e(t){var n,r;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Mb(Db.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Mb(Db.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}mP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dP(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Mb(Db.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Mb(Db.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Mb(Db.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return g(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),_P=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xP({}),this._settingsFrozen=!1}return g(e,[{key:"app",get:function(){if(!this._app)throw new Mb(Db.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Mb(Db.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xP(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ub;switch(e.type){case"firstParty":return new qb(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Mb(Db.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=pP.get(e);t&&(Tb("ComponentProvider","Removing Datastore"),pP.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function SP(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=bP(e,_P))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Nb("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=Sb.MOCK_USER;else{s=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[To(JSON.stringify({alg:"none",type:"JWT"})),To(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Mb(Db.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Sb(c)}e._authCredentials=new Vb(new Fb(s,u))}}var EP=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return g(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new IP(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),CP=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return g(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),IP=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,A_(i)))._path=i,a.type="collection",a}return g(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new EP(this.firestore,null,new rw(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(CP);function TP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=es(e),vP("collection","path",t),e instanceof _P){var a=ew.fromString.apply(ew,[t].concat(r));return yP(a),new IP(e,null,a)}if(!(e instanceof EP||e instanceof IP))throw new Mb(Db.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ew.fromString.apply(ew,[t].concat(r)));return yP(o),new IP(e.firestore,null,o)}function LP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=es(e),1===arguments.length&&(t=Kb.A()),vP("doc","path",t),e instanceof _P){var a=ew.fromString.apply(ew,[t].concat(r));return gP(a),new EP(e,null,new rw(a))}if(!(e instanceof EP||e instanceof IP))throw new Mb(Db.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ew.fromString.apply(ew,[t].concat(r)));return gP(o),new EP(e.firestore,e instanceof IP?e.converter:null,new rw(o))}function NP(e,t){return e=es(e),t=es(t),(e instanceof EP||e instanceof IP)&&(t instanceof EP||t instanceof IP)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function PP(e,t){return e=es(e),t=es(t),e instanceof CP&&t instanceof CP&&e.firestore===t.firestore&&z_(e._query,t._query)&&e.converter===t.converter}var OP=function(){function e(){var t=this;d(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ST(this,"async_queue_retry"),this.Xc=function(){var e=xT();e&&Tb("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=xT();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return g(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=xT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Rb;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=It(Et().mark((function e(){var t=this;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),xw(e.t0)){e.next=12;break}throw e.t0;case 12:Tb("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Lb("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=yL.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&Ob()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=It(Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=I(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=I(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function AP(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=I(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var jP=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new Rb,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return g(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),DP=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new OP,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return g(n,[{key:"_terminate",value:function(){return this._firestoreClient||RP(this),this._firestoreClient.terminate()}}]),n}(_P);function MP(e){return e._firestoreClient||RP(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function RP(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Ix(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,dP(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new QN(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function FP(e,t,n){var r=new Rb;return e.asyncQueue.enqueue(It(Et().mark((function i(){var a;return Et().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,JN(e,n);case 3:return i.next=5,YN(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),XN(a=i.t0)){i.next=13;break}throw a;case 13:Nb("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function UP(e){return function(e){return e.asyncQueue.enqueue(It(Et().mark((function t(){var n,r;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iP(e);case 2:return n=t.sent,t.next=5,oP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=jb(e);return t.vu.delete(0),PT(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(MP(e=bP(e,DP)))}function VP(e){return function(e){return e.asyncQueue.enqueue(It(Et().mark((function t(){var n,r;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iP(e);case 2:return n=t.sent,t.next=5,oP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=jb(t)).vu.add(0),e.next=4,AT(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(MP(e=bP(e,DP)))}function BP(e,t){var n=MP(e=bP(e,DP)),r=new jP;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new HN(e,t)}(function(e,t){if(e instanceof Uint8Array)return qN(e,t);if(e instanceof ArrayBuffer)return qN(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?YS().encode(e):e),t)}(n,_T(t));e.asyncQueue.enqueueAndForget(It(Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=FN,t.next=3,sP(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function zP(e,t){return function(e,t){return e.asyncQueue.enqueue(It(Et().mark((function n(){return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=jb(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,aP(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(MP(e=bP(e,DP)),t).then((function(t){return t?new CP(e,null,t.query):null}))}function qP(e){if(e._initialized||e._terminated)throw new Mb(Db.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var WP=function(){function e(t){d(this,e),this._byteString=t}return g(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(kx.fromBase64String(t))}catch(t){throw new Mb(Db.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(kx.fromUint8Array(t))}}]),e}(),HP=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Mb(Db.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nw(n)}return g(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var GP=g((function e(t){d(this,e),this._methodName=t})),KP=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Mb(Db.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Mb(Db.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return g(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Qb(this._lat,e._lat)||Qb(this._long,e._long)}}]),e}(),QP=/^__.*__$/,JP=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new DS(e,this.data,this.fieldMask,t,this.fieldTransforms):new jS(e,this.data,t,this.fieldTransforms)}}]),e}(),ZP=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return new DS(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function YP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ob()}}var $P=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return g(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return yO(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(YP(this.ca)&&QP.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),XP=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||_T(t)}return g(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $P({ca:e,methodName:t,ga:n,path:nw.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function eO(e){var t=e._freezeSettings(),n=_T(e._databaseId);return new XP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tO(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);pO("Data must be an object, but it was:",o,r);var s,u,c=hO(r,o);if(a.merge)s=new gx(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=I(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=vO(t,l.value,n);if(!o.contains(d))throw new Mb(Db.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));kO(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}s=new gx(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new JP(new Zx(c),s,u)}var nO=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(GP);function rO(e,t,n){return new $P({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var iO=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){return new SS(e.path,new mS)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(GP),aO=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).pa=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=rO(this,e,!0),n=this.pa.map((function(e){return fO(e,t)})),r=new gS(n);return new SS(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(GP),oO=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).pa=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=rO(this,e,!0),n=this.pa.map((function(e){return fO(e,t)})),r=new kS(n);return new SS(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(GP),sO=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Ia=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=new wS(e.serializer,fS(e.serializer,this.Ia));return new SS(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(GP);function uO(e,t,n,r){var i=e.ya(1,t,n);pO("Data must be an object, but it was:",i,r);var a=[],o=Zx.empty();cx(r,(function(e,r){var s=gO(t,e,n);r=es(r);var u=i.da(s);if(r instanceof nO)a.push(s);else{var c=fO(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new gx(a);return new ZP(o,s,i.fieldTransforms)}function cO(e,t,n,r,i,a){var o=e.ya(1,t,n),s=[vO(t,r,n)],u=[i];if(a.length%2!=0)throw new Mb(Db.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(vO(t,a[c])),u.push(a[c+1]);for(var l=[],f=Zx.empty(),h=s.length-1;h>=0;--h)if(!kO(l,s[h])){var d=s[h],p=u[h];p=es(p);var v=o.da(d);if(p instanceof nO)l.push(d);else{var m=fO(p,v);null!=m&&(l.push(d),f.set(d,m))}}var g=new gx(l);return new ZP(f,g,o.fieldTransforms)}function lO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return fO(n,e.ya(r?4:3,t))}function fO(e,t){if(dO(e=es(e)))return pO("Unsupported field value:",t,e),hO(e,t);if(e instanceof GP)return function(e,t){if(!YP(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=I(e);try{for(a.s();!(n=a.n()).done;){var o=fO(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=es(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fS(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Yb.fromDate(e);return{timestampValue:gE(t.serializer,n)}}if(e instanceof Yb){var r=new Yb(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gE(t.serializer,r)}}if(e instanceof KP)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof WP)return{bytesValue:yE(t.serializer,e._byteString)};if(e instanceof EP){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:wE(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(kP(e)))}(e,t)}function hO(e,t){var n={};return lx(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cx(e,(function(e,r){var i=fO(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function dO(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Yb||e instanceof KP||e instanceof WP||e instanceof EP||e instanceof GP)}function pO(e,t,n){if(!dO(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=kP(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function vO(e,t,n){if((t=es(t))instanceof HP)return t._internalPath;if("string"==typeof t)return gO(e,t);throw yO("Field path arguments must be of type string or ",e,!1,void 0,n)}var mO=new RegExp("[~\\*/\\[\\]]");function gO(e,t,n){if(t.search(mO)>=0)throw yO("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(HP,h(t.split(".")))._internalPath}catch(Mr){throw yO("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function yO(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Mb(Db.INVALID_ARGUMENT,s+e+u)}function kO(e,t){return e.some((function(e){return e.isEqual(t)}))}var bO=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return g(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new EP(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new wO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(xO("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),wO=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){return Tu(b(n.prototype),"data",this).call(this)}}]),n}(bO);function xO(e,t){return"string"==typeof t?gO(e,t):t instanceof HP?t._internalPath:t._delegate._internalPath}function _O(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Mb(Db.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var SO=g((function e(){d(this,e)})),EO=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(SO);function CO(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof SO&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof TO})).length,n=e.filter((function(e){return e instanceof IO})).length;if(t>1||t>0&&n>0)throw new Mb(Db.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=I(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var IO=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return g(n,[{key:"_apply",value:function(e){var t=this._parse(e);return VO(e._query,t),new CP(e.firestore,e.converter,V_(e._query,t))}},{key:"_parse",value:function(e){var t=eO(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Mb(Db.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){UO(o,a);var u,c=[],l=I(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(FO(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=FO(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||UO(o,a),s=lO(n,"where",o,"in"===a||"not-in"===a);return a_.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(EO);var TO=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return g(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:o_.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=I(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;VO(r,a),r=V_(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new CP(e.firestore,e.converter,V_(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(SO);var LO=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return g(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new n_(t,n);return function(e,t){if(null===D_(e)){var n=M_(e);null!==n&&BO(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new CP(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new P_(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(EO);var NO=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return g(n,[{key:"_apply",value:function(e){return new CP(e.firestore,e.converter,B_(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(EO);var PO=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=RO(e,this.type,this._docOrFields,this._inclusive);return new CP(e.firestore,e.converter,function(e,t){return new P_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(EO);function OO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return PO._create("startAt",t,!0)}function AO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return PO._create("startAfter",t,!1)}var jO=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=RO(e,this.type,this._docOrFields,this._inclusive);return new CP(e.firestore,e.converter,function(e,t){return new P_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(EO);function DO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jO._create("endBefore",t,!1)}function MO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jO._create("endAt",t,!0)}function RO(e,t,n,r){if(n[0]=es(n[0]),n[0]instanceof bO)return function(e,t,n,r,i){if(!r)throw new Mb(Db.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=I(F_(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Fx(t,r.key));else{var c=r.data.field(u.field);if(Sx(c))throw new Mb(Db.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new Xx(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=eO(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Mb(Db.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!R_(e)&&-1!==c.indexOf("/"))throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ew.fromString(c));if(!rw.isDocumentKey(l))throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new rw(l);s.push(Fx(t,f))}else{var h=lO(n,r,c);s.push(h)}}return new Xx(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function FO(e,t,n){if("string"==typeof(n=es(n))){if(""===n)throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R_(t)&&-1!==n.indexOf("/"))throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ew.fromString(n));if(!rw.isDocumentKey(r))throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Fx(e,new rw(r))}if(n instanceof EP)return Fx(e,n._key);throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(kP(n),"."))}function UO(e,t){if(!Array.isArray(e)||0===e.length)throw new Mb(Db.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function VO(e,t){if(t.isInequality()){var n=M_(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=D_(e);null!==i&&BO(e,r,i)}var a=function(e,t){var n,r=I(e);try{for(r.s();!(n=r.n()).done;){var i,a=I(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Mb(Db.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Mb(Db.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function BO(e,t,n){if(!n.isEqual(t))throw new Mb(Db.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var zO=function(){function e(){d(this,e)}return g(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Px(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xx(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_x(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ob()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return cx(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new KP(xx(e.latitude),xx(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ex(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Cx(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=wx(e);return new Yb(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ew.fromString(e);Ab(HE(n));var r=new Tx(n.get(1),n.get(3)),i=new rw(n.popFirst(5));return r.isEqual(t)||Lb("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function qO(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var WO=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new WP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new EP(this.firestore,null,t)}}]),n}(zO);var HO=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return g(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),GO=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return g(n,[{key:"exists",value:function(){return Tu(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new KO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(xO("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(bO),KO=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Tu(b(n.prototype),"data",this).call(this,e)}}]),n}(GO),QO=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new HO(i.hasPendingWrites,i.fromCache),this.query=r}return g(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new KO(n._firestore,n._userDataWriter,r.key,r,new HO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mb(Db.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new KO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new HO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new KO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new HO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:JO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function JO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ob()}}function ZO(e,t){return e instanceof GO&&t instanceof GO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof QO&&t instanceof QO&&e._firestore===t._firestore&&PP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var YO=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new WP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new EP(this.firestore,null,t)}}]),n}(zO);function $O(e){e=bP(e,EP);var t=bP(e.firestore,DP),n=MP(t),r=new YO(t);return function(e,t){var n=new Rb;return e.asyncQueue.enqueueAndForget(It(Et().mark((function r(){return Et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=It(Et().mark((function e(t,n,r){var i,a;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=jb(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Mb(Db.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=kL(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new GO(t,r,e._key,n,new HO(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function XO(e){e=bP(e,CP);var t=bP(e.firestore,DP),n=MP(t),r=new YO(t);return function(e,t){var n=new Rb;return e.asyncQueue.enqueueAndForget(It(Et().mark((function r(){return Et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=It(Et().mark((function e(t,n,r){var i,a,o,s,u;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,JI(t,n,!0);case 3:i=e.sent,a=new UL(n,i.ir),o=a.sc(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=kL(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new QO(t,r,e,n)}))}function eA(e,t,n){e=bP(e,EP);var r=bP(e.firestore,DP),i=qO(e.converter,t,n);return iA(r,[tO(eO(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,CS.none())])}function tA(e,t,n){e=bP(e,EP);for(var r=bP(e.firestore,DP),i=eO(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return iA(r,[("string"==typeof(t=es(t))||t instanceof HP?cO(i,"updateDoc",e._key,t,n,o):uO(i,"updateDoc",e._key,t)).toMutation(e._key,CS.exists(!0))])}function nA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=es(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||AP(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(AP(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof EP)l=bP(e.firestore,DP),f=A_(e._key.path),c={next:function(t){n[u]&&n[u](aA(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=bP(e,CP);l=bP(p.firestore,DP),f=p._query;var v=new YO(l);c={next:function(e){n[u]&&n[u](new QO(l,v,p,e))},error:n[u+1],complete:n[u+2]},_O(e._query)}return function(e,t,n,r){var i=new WN(r),a=new OL(t,i,n);return e.asyncQueue.enqueueAndForget(It(Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=EL,t.next=3,cP(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(It(Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=IL,t.next=3,cP(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(MP(l),f,h,c)}function rA(e,t){return function(e,t){var n=new WN(t);return e.asyncQueue.enqueueAndForget(It(Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){jb(e).ku.add(t),t.next()},t.next=3,cP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(It(Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){jb(e).ku.delete(t)},t.next=3,cP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(MP(e=bP(e,DP)),AP(t)?t:{next:t})}function iA(e,t){return function(e,t){var n=new Rb;return e.asyncQueue.enqueueAndForget(It(Et().mark((function r(){return Et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=JL,r.next=3,sP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(MP(e),t)}function aA(e,t,n){var r=n.docs.get(t._key),i=new YO(e);return new GO(e,i,t._key,r,new HO(n.hasPendingWrites,n.fromCache),t.converter)}var oA={maxAttempts:5},sA=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=eO(t)}return g(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=uA(e,this._firestore),i=qO(r.converter,t,n),a=tO(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,CS.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=uA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=es(t))||t instanceof HP?cO(this._dataReader,"WriteBatch.update",i._key,t,n,o):uO(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,CS.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=uA(e,this._firestore);return this._mutations=this._mutations.concat(new BS(t._key,CS.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Mb(Db.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function uA(e,t){if((e=es(e)).firestore!==t)throw new Mb(Db.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var cA=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return g(n,[{key:"get",value:function(e){var t=this,r=uA(e,this._firestore),i=new YO(this._firestore);return Tu(b(n.prototype),"get",this).call(this,e).then((function(e){return new GO(t._firestore,i,r._key,e._document,new HO(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=eO(t)}return g(e,[{key:"get",value:function(e){var t=this,n=uA(e,this._firestore),r=new WO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ob();var i=e[0];if(i.isFoundDocument())return new bO(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new bO(t._firestore,r,n._key,null,n.converter);throw Ob()}))}},{key:"set",value:function(e,t,n){var r=uA(e,this._firestore),i=qO(r.converter,t,n),a=tO(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=uA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=es(t))||t instanceof HP?cO(this._dataReader,"Transaction.update",i._key,t,n,o):uO(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=uA(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function lA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aO("arrayUnion",t)}function fA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new oO("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Eb=e}(Js),zs(new ts("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new DP(new Bb(e.getProvider("auth-internal")),new Hb(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Mb(Db.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tx(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),tu(_b,"3.12.2",e),tu(_b,"3.12.2","esm2017")}();function hA(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Mb("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function dA(){if("undefined"===typeof Uint8Array)throw new Mb("unimplemented","Uint8Arrays are not available in this environment.")}function pA(){if("undefined"==typeof atob)throw new Mb("unimplemented","Blobs are unavailable in Firestore in this environment.")}var vA=function(){function e(t){d(this,e),this._delegate=t}return g(e,[{key:"toBase64",value:function(){return pA(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return dA(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return pA(),new e(WP.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return dA(),new e(WP.fromUint8Array(t))}}]),e}();function mA(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=I(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var gA=function(){function e(){d(this,e)}return g(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){qP(e=bP(e,DP));var n=MP(e);if(n._uninitializedComponentsProvider)throw new Mb(Db.FAILED_PRECONDITION,"SDK cache is already specified.");Nb("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new zN;return FP(n,i,new VN(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){qP(e=bP(e,DP));var t=MP(e);if(t._uninitializedComponentsProvider)throw new Mb(Db.FAILED_PRECONDITION,"SDK cache is already specified.");Nb("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new zN;return FP(t,r,new BN(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Mb(Db.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Rb;return e._queue.enqueueAndForgetEvenWhileRestricted(It(Et().mark((function n(){return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=It(Et().mark((function e(t){var n;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kw.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,kw.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(jI(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),yA=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Tx||(this._appCompat=t)}return g(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Nb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};SP(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return UP(this._delegate)}},{key:"disableNetwork",value:function(){return VP(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&mP("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Rb;return e.asyncQueue.enqueueAndForget(It(Et().mark((function n(){return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=oN,n.next=3,sP(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(MP(e=bP(e,DP)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return rA(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Mb("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new OA(this,TP(this._delegate,e))}catch(t){throw SA(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new _A(this,LP(this._delegate,e))}catch(t){throw SA(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new LA(this,function(e,t){if(e=bP(e,_P),vP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Mb(Db.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new CP(e,null,function(e){return new P_(ew.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw SA(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=bP(e,DP);var r=Object.assign(Object.assign({},oA),n);return function(e){if(e.maxAttempts<1)throw new Mb(Db.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Rb;return e.asyncQueue.enqueueAndForget(It(Et().mark((function i(){var a;return Et().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,uP(e);case 2:a=i.sent,new KN(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(MP(e),(function(n){return t(new cA(e,n))}),r)}(this._delegate,(function(n){return e(new bA(t,n))}))}},{key:"batch",value:function(){var e=this;return MP(this._delegate),new wA(new sA(this._delegate,(function(t){return iA(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return BP(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return zP(this._delegate,e).then((function(e){return e?new LA(t,e):null}))}}]),e}(),kA=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new vA(new WP(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return _A.forKey(t,this.firestore,null)}}]),n}(zO);var bA=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new kA(t)}return g(e,[{key:"get",value:function(e){var t=this,n=AA(e);return this._delegate.get(n).then((function(e){return new IA(t._firestore,new GO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=AA(e);return n?(hA("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=AA(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=AA(e);return this._delegate.delete(t),this}}]),e}(),wA=function(){function e(t){d(this,e),this._delegate=t}return g(e,[{key:"set",value:function(e,t,n){var r=AA(e);return n?(hA("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=AA(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=AA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),xA=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return g(e,[{key:"fromFirestore",value:function(e,t){var n=new KO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TA(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new kA(t),n),i.set(n,a)),a}}]),e}();xA.INSTANCES=new WeakMap;var _A=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new kA(t)}return g(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new OA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new OA(this.firestore,TP(this._delegate,e))}catch(t){throw SA(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=es(e))instanceof EP&&NP(this._delegate,e)}},{key:"set",value:function(e,t){t=hA("DocumentReference.set",t);try{return t?eA(this._delegate,e,t):eA(this._delegate,e)}catch(n){throw SA(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?tA(this._delegate,e):tA.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw SA(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return iA(bP(e.firestore,DP),[new BS(e._key,CS.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=EA(n),a=CA(n,(function(t){return new IA(e.firestore,new GO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return nA(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?$O(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=bP(e,EP);var t=bP(e.firestore,DP);return fP(MP(t),e._key,{source:"server"}).then((function(n){return aA(t,e,n)}))}(this._delegate):function(e){e=bP(e,EP);var t=bP(e.firestore,DP);return fP(MP(t),e._key).then((function(n){return aA(t,e,n)}))}(this._delegate),t.then((function(e){return new IA(n.firestore,new GO(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(xA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Mb("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new EP(n._delegate,r,new rw(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new EP(n._delegate,r,t))}}]),e}();function SA(e,t,n){return e.message=e.message.replace(t,n),e}function EA(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!mA(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function CA(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=mA(e[0])?e[0]:mA(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var IA=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"ref",get:function(){return new _A(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return ZO(this._delegate,e._delegate)}}]),e}(),TA=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ob()}(void 0!==t),t}}]),n}(IA),LA=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new kA(t)}return g(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,CO(this._delegate,function(e,t,n){var r=t,i=xO("where",e);return IO._create(i,r,n)}(t,n,r)))}catch(i){throw SA(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,CO(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=xO("orderBy",e);return LO._create(n,t)}(t,n)))}catch(r){throw SA(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,CO(this._delegate,function(e){return wP("limit",e),NO._create("limit",e,"F")}(t)))}catch(n){throw SA(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,CO(this._delegate,function(e){return wP("limitToLast",e),NO._create("limitToLast",e,"L")}(t)))}catch(n){throw SA(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,CO(this._delegate,OO.apply(void 0,arguments)))}catch(t){throw SA(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,CO(this._delegate,AO.apply(void 0,arguments)))}catch(t){throw SA(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,CO(this._delegate,DO.apply(void 0,arguments)))}catch(t){throw SA(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,CO(this._delegate,MO.apply(void 0,arguments)))}catch(t){throw SA(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return PP(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?XO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=bP(e,CP);var t=bP(e.firestore,DP),n=MP(t),r=new YO(t);return hP(n,e._query,{source:"server"}).then((function(n){return new QO(t,r,e,n)}))}(this._delegate):function(e){e=bP(e,CP);var t=bP(e.firestore,DP),n=MP(t),r=new YO(t);return _O(e._query),hP(n,e._query).then((function(n){return new QO(t,r,e,n)}))}(this._delegate),t.then((function(e){return new PA(n.firestore,new QO(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=EA(n),a=CA(n,(function(t){return new PA(e.firestore,new QO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return nA(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(xA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),NA=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new TA(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),PA=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"query",get:function(){return new LA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new TA(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new NA(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new TA(n._firestore,r))}))}},{key:"isEqual",value:function(e){return ZO(this._delegate,e._delegate)}}]),e}(),OA=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return g(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new _A(this.firestore,e):null}},{key:"doc",value:function(e){try{return new _A(this.firestore,void 0===e?LP(this._delegate):LP(this._delegate,e))}catch(t){throw SA(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=bP(e.firestore,DP),r=LP(e),i=qO(e.converter,t);return iA(n,[tO(eO(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,CS.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new _A(t.firestore,e)}))}},{key:"isEqual",value:function(e){return NP(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(xA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(LA);function AA(e){return bP(e,EP)}var jA=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(HP,n)}return g(e,[{key:"isEqual",value:function(e){return(e=es(e))instanceof HP&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(nw.keyField().canonicalString())}}]),e}(),DA=function(){function e(t){d(this,e),this._delegate=t}return g(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new iO("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new nO("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=lA.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=fA.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new sO("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),MA={Firestore:yA,GeoPoint:KP,Timestamp:Yb,Blob:vA,Transaction:bA,WriteBatch:wA,DocumentReference:_A,DocumentSnapshot:IA,Query:LA,QueryDocumentSnapshot:TA,QuerySnapshot:PA,CollectionReference:OA,FieldPath:jA,FieldValue:DA,setLogLevel:function(e){!function(e){Cb.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ts("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},MA)))}(e,(function(e,t){return new yA(e,t,new gA)})),e.registerVersion("@firebase/firestore-compat","0.3.11")}(Iu);var RA=function(e){return(0,st.jsxs)("label",{className:"inputText",children:[(0,st.jsx)("span",{children:e.name}),(0,st.jsx)("input",{type:"text",placeholder:e.placeholder,value:e.inputValue&&e.inputValue,onChange:function(t){return e.onChange(t.target.value)}})]})},FA="https://polarpelmeni-api.work-set.eu/",UA=function(){var e=ot(),t=we(),n=(Ye((function(e){return e.user})),l((0,r.useState)("STEP_01"),2)),i=n[0],a=n[1],o=l((0,r.useState)(""),2),s=o[0],u=o[1],c=l((0,r.useState)(""),2),f=c[0],h=c[1],d=l((0,r.useState)(""),2),p=d[0],v=d[1],m=l((0,r.useState)(""),2),g=m[0],y=m[1],k=l((0,r.useState)(null),2),b=k[0],w=k[1],x=l((0,r.useState)(""),2),_=x[0],S=x[1],E=l((0,r.useState)(!0),2),C=E[0],I=E[1];(0,r.useEffect)((function(){var e=s.replace(/\s|[()]/g,"");e.includes("_")?I(!0):I(!1),u(e)}),[s]);var T=function(e){var t=new Iu.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(){}});Iu.auth().signInWithPhoneNumber(s,t).then((function(e){a("STEP_02"),w(e)})).catch((function(e){console.log(e)}))};(0,r.useEffect)((function(){"STEP_02"===i&&(I(!0),6===_.length?I(!1):I(!0))}),[_,i]),(0,r.useEffect)((function(){"STEP_03"===i&&(I(!0),6===_.length?I(!1):I(!0))}),[_,i]);var L=function(){b.confirm(_).then((function(e){console.log("handleVerificationCodeSubmit:",e.user);var t=e.user.multiFactor.user.uid;console.log("accessToken:",t),y(t),N(t)})).catch((function(e){console.error("ERROR:",e)}))},N=function(n){var r={token:n};console.log("AUTH TOKEN in AUTH:",r);var i=JSON.stringify(r);console.log("tokenJSON:",i),kr.post("".concat(FA,"api/auth"),i,{headers:{"Content-Type":"application/json"}}).then((function(n){console.log(n),200===n.status&&(e(Ca({name:n.data.name,phone:n.data.phone,email:n.data.email,token:n.data.token,promocode40:n.data.promocode40})),e(ho({isOpen:!1})),t("/profile/info"))})).catch((function(e){console.error(e),a("STEP_03")}))};(0,r.useEffect)((function(){"STEP_03"===i&&(I(!0),I(""===f||""===p))}),[i,f,p]);return(0,st.jsxs)("div",{className:"singup",children:[(0,st.jsx)("div",{id:"recaptcha-container"}),(0,st.jsx)("div",{className:"singup__content",children:"STEP_01"===i?(0,st.jsxs)(st.Fragment,{children:[(0,st.jsxs)("div",{className:"singup__description",children:[(0,st.jsx)("h3",{className:"singup__title",children:"\u0412\u0445\u0456\u0434 \u043d\u0430 \u0441\u0430\u0439\u0442"}),(0,st.jsx)("p",{className:"singup__text",children:"\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0441\u0432\u0456\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443, \u0449\u043e\u0431 \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043e \u0431\u043e\u043d\u0443\u0441\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438 \u0442\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u043c \u0430\u0434\u0440\u0435\u0441\u0430\u043c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"})]}),(0,st.jsx)(_o,{onChange:function(e){return u(e)}}),(0,st.jsx)(Ya,{name:"\u041f\u0440\u043e\u0434\u043e\u0432\u0436\u0438\u0442\u0438",disabled:C,onClick:T})]}):"STEP_02"===i?(0,st.jsxs)(st.Fragment,{children:[(0,st.jsxs)("div",{className:"singup__description",children:[(0,st.jsx)("h3",{className:"singup__title",children:"\u0412\u0445\u0456\u0434 \u043d\u0430 \u0441\u0430\u0439\u0442"}),(0,st.jsxs)("p",{className:"singup__text",children:["\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0434 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f, \u044f\u043a\u0438\u0439 \u043c\u0438 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u043d\u0430 ",s," ",(0,st.jsx)("span",{className:"singup__text singup__text-action",onClick:function(){return a("STEP_01")},children:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438"})]})]}),(0,st.jsx)("form",{className:"singup__form",children:(0,st.jsx)(So,{onData:function(e){return S(e)}})}),(0,st.jsx)(Ya,{name:"\u041f\u0440\u043e\u0434\u043e\u0432\u0436\u0438\u0442\u0438",disabled:C,onClick:L})]}):"STEP_03"===i?(0,st.jsxs)(st.Fragment,{children:[(0,st.jsxs)("div",{className:"singup__description",children:[(0,st.jsx)("h3",{className:"singup__title",children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"}),(0,st.jsx)("p",{className:"singup__text",children:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0432\u043e\u0457 \u0434\u0430\u043d\u0456"})]}),(0,st.jsxs)("form",{className:"singup__form",children:[(0,st.jsx)(RA,{name:"\u0406\u043c\u2019\u044f",placeholder:"\u0406\u043c\u2019\u044f",onChange:function(e){return h(e)}}),(0,st.jsx)(RA,{name:"\u041f\u043e\u0448\u0442\u0430",placeholder:"xxx@gmail.com",onChange:function(e){return v(e)}})]}),(0,st.jsx)(Ya,{name:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f",disabled:C,onClick:function(){return function(){var n={name:f,email:p,token:g,phone:s},r=JSON.stringify(n);console.log(r),kr.post("".concat(FA,"api/registrate"),r,{headers:{"Content-Type":"application/json"}}).then((function(n){var r=n.data;200===n.status&&(console.log(r),console.log("user data",{name:f,phone:s,email:p,token:g}),e(Ca({name:f,phone:s,email:p,token:g,promocode40:r.promocode40})),e(ho({isOpen:!1})),t("/profile/info"))})).catch((function(e){return console.error(e)}))}()}})]}):void 0})]})},VA=function(){var e=ke(),t=l((0,r.useState)(!1),2),n=t[0],i=t[1],a=l((0,r.useState)(!1),2),o=a[0],s=a[1],u=l((0,r.useState)([]),2),c=u[0],f=u[1],h=we(),d=ot(),p=Ye((function(e){return e.user}));(0,r.useEffect)((function(){"/"!==e.pathname&&(i(!1),s(!1))}),[e]);var v=Ye((function(e){return e.modals.authModal}));return(0,r.useEffect)((function(){kr.get("https://polarpelmeni-api.work-set.eu/api/menu",{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then((function(e){var t=e.data.response.filter((function(e){return e.category_name.startsWith("onlineOrder:")})).map((function(e,t){return{category_name:e.category_name.replace(/onlineOrder: /,""),category_id:e.category_id,category_position_index:t}}));t[13].category_position_index=0,t[12].category_position_index=1,t[11].category_position_index=2,t[8].category_position_index=3,t[10].category_position_index=4,t[9].category_position_index=5,t[2].category_position_index=6,t[3].category_position_index=7,t[0].category_position_index=8,t[6].category_position_index=9,t[4].category_position_index=10,t[7].category_position_index=11,t[1].category_position_index=12,t[5].category_position_index=13,t.sort((function(e,t){return e.category_position_index-t.category_position_index})),f(t)})).catch((function(e){return console.error(e)}))}),[]),"/profile/info"===e.pathname?(0,st.jsxs)(st.Fragment,{children:[v&&(0,st.jsx)(wr,{closeModal:function(){return d(ho({isOpen:!1}))},children:(0,st.jsx)(UA,{})}),(0,st.jsx)("header",{className:"header",children:(0,st.jsxs)(ut,{children:[(0,st.jsxs)("div",{className:"header__content",children:[(0,st.jsxs)("div",{className:"header__left",children:[(0,st.jsx)(kt,{className:"header__logo",to:"/",children:(0,st.jsx)("img",{src:go,alt:"Polar Pelmeni \u2013 \u0430\u0432\u0442\u043e\u0440\u0441\u044c\u043a\u0456 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456"})}),(0,st.jsxs)("div",{className:"header__selectors",children:[(0,st.jsxs)("div",{className:"header__selector header__selector-city",children:[(0,st.jsx)("svg",{width:"12",height:"15",viewBox:"0 0 12 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M10.2427 10.576L6 14.8187L1.75734 10.576C0.918228 9.73687 0.346791 8.66777 0.115286 7.50389C-0.11622 6.34 0.00260456 5.13361 0.456732 4.03726C0.91086 2.9409 1.6799 2.00384 2.66659 1.34455C3.65328 0.685266 4.81332 0.333374 6 0.333374C7.18669 0.333374 8.34672 0.685266 9.33342 1.34455C10.3201 2.00384 11.0891 2.9409 11.5433 4.03726C11.9974 5.13361 12.1162 6.34 11.8847 7.50389C11.6532 8.66777 11.0818 9.73687 10.2427 10.576ZM6 7.66666C6.35362 7.66666 6.69276 7.52618 6.94281 7.27613C7.19286 7.02608 7.33334 6.68694 7.33334 6.33332C7.33334 5.9797 7.19286 5.64056 6.94281 5.39051C6.69276 5.14046 6.35362 4.99999 6 4.99999C5.64638 4.99999 5.30724 5.14046 5.05719 5.39051C4.80715 5.64056 4.66667 5.9797 4.66667 6.33332C4.66667 6.68694 4.80715 7.02608 5.05719 7.27613C5.30724 7.52618 5.64638 7.66666 6 7.66666Z",fill:"#12130F"})}),(0,st.jsx)("span",{children:p.city}),(0,st.jsx)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M5 3.78132L8.3 0.481323L9.24267 1.42399L5 5.66666L0.757332 1.42399L1.7 0.481323L5 3.78132Z",fill:"#12130F"})})]}),(0,st.jsxs)("div",{className:"header__selector header__selector-lang",children:[(0,st.jsx)("span",{children:"UA"}),(0,st.jsx)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M5 3.78132L8.3 0.481323L9.24267 1.42399L5 5.66666L0.757332 1.42399L1.7 0.481323L5 3.78132Z",fill:"#12130F"})})]})]})]}),(0,st.jsxs)("nav",{className:"header__navigation",children:[(0,st.jsx)(kt,{to:"/",children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"}),(0,st.jsx)(kt,{to:"/menu",children:"\u041c\u0435\u043d\u044e"}),(0,st.jsx)(kt,{to:"/about-us",children:"\u041f\u0440\u043e \u043d\u0430\u0441"}),(0,st.jsx)(kt,{to:"/contact",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})]}),(0,st.jsxs)("div",{className:"header__right",children:[(0,st.jsx)(bo,{}),p.isAuthenticated?(0,st.jsxs)("div",{className:"header__profile-btn",onClick:function(){return h("/profile/info")},children:[(0,st.jsx)("div",{className:"header__avatar",children:(0,st.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/552/552721.png",alt:""})}),(0,st.jsx)("span",{className:"header__username",children:p.name}),(0,st.jsx)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M5.00048 3.78132L8.30048 0.481323L9.24315 1.42399L5.00048 5.66666L0.757812 1.42399L1.70048 0.481323L5.00048 3.78132Z",fill:"#12130F"})})]}):(0,st.jsx)(Ya,{name:"\u0423\u0432\u0456\u0439\u0442\u0438",onClick:function(){return d(ho({isOpen:!0}))}}),(0,st.jsx)("div",{className:"header__hamburger ".concat(n&&"header__hamburger--active"),onClick:function(){return i(!n)},children:(0,st.jsx)("span",{})})]})]}),n&&(0,st.jsx)("div",{className:"mobile-menu",children:(0,st.jsxs)("nav",{className:"mobile-menu__navigation",children:[(0,st.jsx)("div",{className:"mobile-menu__auth",children:!0===p.isAuthenticated?(0,st.jsxs)("div",{className:"mobile-menu__profile-btn mobile-menu__profile-btn--profile",onClick:function(){return h("/profile/info")},children:[(0,st.jsx)("div",{className:"mobile-menu__avatar",children:(0,st.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/552/552721.png",alt:"avatar"})}),(0,st.jsxs)("div",{children:[(0,st.jsx)("span",{className:"mobile-menu__username",children:p.name}),(0,st.jsx)("p",{className:"mobile-menu__phone",children:p.phone}),(0,st.jsx)("p",{className:"mobile-menu__bonus",children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e 23 \u0431\u043e\u043d\u0443\u0441\u0438"})]})]}):(0,st.jsx)(Ya,{name:"\u0423\u0432\u0456\u0439\u0442\u0438 \u0432 \u043e\u0441\u043e\u0431\u0438\u0441\u0442\u0438\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442",onClick:function(){return d(ho({isOpen:!0}))}})}),(0,st.jsxs)("ul",{className:"mobile-menu__menu",children:[(0,st.jsx)("li",{className:"mobile-menu__link",children:(0,st.jsx)(kt,{children:"\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f"})}),(0,st.jsx)("li",{className:"mobile-menu__link",children:(0,st.jsx)(kt,{children:"\u0423\u043b\u044e\u0431\u043b\u0435\u043d\u0456 \u0431\u043b\u044e\u0434\u0430"})}),(0,st.jsx)("li",{className:"mobile-menu__link",children:(0,st.jsx)(kt,{children:"\u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0456 \u0430\u0434\u0440\u0435\u0441\u0438"})}),(0,st.jsx)("li",{className:"mobile-menu__link",children:(0,st.jsx)(kt,{children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c"})}),(0,st.jsx)("li",{className:"mobile-menu__link",children:(0,st.jsx)(kt,{children:"\u0411\u043e\u043d\u0443\u0441\u0438"})}),(0,st.jsx)("li",{className:"mobile-menu__link mobile-menu__link--exit",children:(0,st.jsx)(kt,{children:"\u0412\u0438\u0445\u0456\u0434"})})]}),(0,st.jsxs)("ul",{className:"mobile-menu__nav",children:[(0,st.jsx)("li",{children:(0,st.jsx)(kt,{to:"/",children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"})}),(0,st.jsx)("li",{children:(0,st.jsx)(kt,{to:"/menu",children:"\u041c\u0435\u043d\u044e"})}),(0,st.jsx)("li",{children:(0,st.jsx)(kt,{to:"/about-us",children:"\u041f\u0440\u043e \u043d\u0430\u0441"})}),(0,st.jsx)("li",{children:(0,st.jsx)(kt,{to:"/contact",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})})]})]})})]})})]}):(0,st.jsxs)(st.Fragment,{children:[v&&(0,st.jsx)(wr,{closeModal:function(){return d(ho({isOpen:!1}))},children:(0,st.jsx)(UA,{})}),(0,st.jsx)("header",{className:"header ".concat(n&&"header__fh"),children:(0,st.jsxs)(ut,{children:[(0,st.jsxs)("div",{className:"header__content",children:[(0,st.jsxs)("div",{className:"header__left",children:[(0,st.jsx)(kt,{className:"header__logo",to:"/",children:(0,st.jsx)("img",{src:go,alt:"Polar Pelmeni \u2013 \u0430\u0432\u0442\u043e\u0440\u0441\u044c\u043a\u0456 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456"})}),(0,st.jsxs)("div",{className:"header__selectors",children:[(0,st.jsxs)("div",{className:"header__selector header__selector-city",children:[(0,st.jsx)("svg",{width:"12",height:"15",viewBox:"0 0 12 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M10.2427 10.576L6 14.8187L1.75734 10.576C0.918228 9.73687 0.346791 8.66777 0.115286 7.50389C-0.11622 6.34 0.00260456 5.13361 0.456732 4.03726C0.91086 2.9409 1.6799 2.00384 2.66659 1.34455C3.65328 0.685266 4.81332 0.333374 6 0.333374C7.18669 0.333374 8.34672 0.685266 9.33342 1.34455C10.3201 2.00384 11.0891 2.9409 11.5433 4.03726C11.9974 5.13361 12.1162 6.34 11.8847 7.50389C11.6532 8.66777 11.0818 9.73687 10.2427 10.576ZM6 7.66666C6.35362 7.66666 6.69276 7.52618 6.94281 7.27613C7.19286 7.02608 7.33334 6.68694 7.33334 6.33332C7.33334 5.9797 7.19286 5.64056 6.94281 5.39051C6.69276 5.14046 6.35362 4.99999 6 4.99999C5.64638 4.99999 5.30724 5.14046 5.05719 5.39051C4.80715 5.64056 4.66667 5.9797 4.66667 6.33332C4.66667 6.68694 4.80715 7.02608 5.05719 7.27613C5.30724 7.52618 5.64638 7.66666 6 7.66666Z",fill:"#12130F"})}),(0,st.jsx)("span",{children:p.city}),(0,st.jsx)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M5 3.78132L8.3 0.481323L9.24267 1.42399L5 5.66666L0.757332 1.42399L1.7 0.481323L5 3.78132Z",fill:"#12130F"})})]}),(0,st.jsxs)("div",{className:"header__selector header__selector-lang",children:[(0,st.jsx)("span",{children:"UA"}),(0,st.jsx)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M5 3.78132L8.3 0.481323L9.24267 1.42399L5 5.66666L0.757332 1.42399L1.7 0.481323L5 3.78132Z",fill:"#12130F"})})]})]})]}),(0,st.jsxs)("nav",{className:"header__navigation",children:[(0,st.jsx)(kt,{to:"/",children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"}),(0,st.jsx)(kt,{to:"/menu",children:"\u041c\u0435\u043d\u044e"}),(0,st.jsx)(kt,{to:"/about-us",children:"\u041f\u0440\u043e \u043d\u0430\u0441"}),(0,st.jsx)(kt,{to:"/contact",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})]}),(0,st.jsxs)("div",{className:"header__right",children:[(0,st.jsx)(bo,{}),p.isAuthenticated?(0,st.jsxs)("div",{className:"header__profile-btn",onClick:function(){return h("/profile/info")},children:[(0,st.jsx)("div",{className:"header__avatar",children:(0,st.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/552/552721.png",alt:""})}),(0,st.jsx)("span",{className:"header__username",children:p.name}),(0,st.jsx)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M5.00048 3.78132L8.30048 0.481323L9.24315 1.42399L5.00048 5.66666L0.757812 1.42399L1.70048 0.481323L5.00048 3.78132Z",fill:"#12130F"})})]}):(0,st.jsx)(Ya,{name:"\u0423\u0432\u0456\u0439\u0442\u0438",onClick:function(){return d(ho({isOpen:!0}))}}),(0,st.jsx)("div",{className:"header__hamburger ".concat(n&&"header__hamburger--active"),onClick:function(){return i(!n)},children:(0,st.jsx)("span",{})})]})]}),n&&(0,st.jsx)("div",{className:"mobile-menu",children:(0,st.jsxs)("nav",{className:"mobile-menu__navigation",children:[(0,st.jsxs)("ul",{className:"mobile-menu__menu",children:[(0,st.jsx)("li",{className:"mobile-menu__link",children:(0,st.jsx)(kt,{children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"})}),(0,st.jsxs)("li",{className:"mobile-menu__link ",children:[(0,st.jsxs)("div",{className:"mobile-menu__dropdown",onClick:function(){s(!o)},children:[(0,st.jsx)("span",{children:"\u041c\u0435\u043d\u044e"}),(0,st.jsx)("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M5.99959 4.97618L10.1244 0.85141L11.3029 2.02992L5.99959 7.33326L0.696289 2.02992L1.87481 0.85141L5.99959 4.97618Z",fill:"black"})})]}),o&&(0,st.jsx)("ul",{className:"mobile-menu__submenu",children:c.map((function(e){return(0,st.jsx)(kt,{className:"mobile-menu__sublink",to:"menu/".concat(e.category_id),children:e.category_name},e.category_id)}))})]}),(0,st.jsx)("li",{className:"mobile-menu__link",children:(0,st.jsx)(kt,{to:"about-us",children:"\u041f\u0440\u043e \u043d\u0430\u0441"})}),(0,st.jsx)("li",{className:"mobile-menu__link",children:(0,st.jsx)(kt,{to:"contact",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})})]}),(0,st.jsx)("div",{className:"mobile-menu__auth",children:p.isAuthenticated?(0,st.jsxs)("div",{className:"mobile-menu__profile-btn",onClick:function(){return h("/profile/info")},children:[(0,st.jsx)("div",{className:"mobile-menu__avatar",children:(0,st.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/552/552721.png",alt:""})}),(0,st.jsxs)("div",{children:[(0,st.jsx)("span",{className:"mobile-menu__username",children:p.name}),(0,st.jsx)("div",{className:"mobile-menu__goto",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0456\u043b\u044c"})]})]}):(0,st.jsx)(Ya,{name:"\u0423\u0432\u0456\u0439\u0442\u0438 \u0432 \u043e\u0441\u043e\u0431\u0438\u0441\u0442\u0438\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442",onClick:function(){return d(ho({isOpen:!0}))}})})]})})]})})]})};tu("firebase","9.22.2","app");var BA={apiKey:"AIzaSyAZTy2mx9Oje6LQvaiaaCxx0rq0Cm3jGvM",authDomain:"polar-pelmeni.firebaseapp.com",projectId:"polar-pelmeni",storageBucket:"polar-pelmeni.appspot.com",messagingSenderId:"1051342657269",appId:"1:1051342657269:web:4a5d1cc8eb468172dcd7bc"},zA=(Zs(BA),n.p+"static/media/about-1-desc.91b817798bf8b5956683.png"),qA=n.p+"static/media/about-2-desc.92d4c3085097a9bb8178.png",WA=n.p+"static/media/about-3-desc.b5bef9ba9ec67b6c4900.png",HA=n.p+"static/media/hero_preview.33f32bcff4c534ce22a3.png";var GA=n.p+"static/media/sprite.846e26b8e4d965e90cf93dc64c8476cc.svg",KA=function(){return(0,st.jsxs)(ut,{children:[(0,st.jsx)("section",{className:"about__hero",children:(0,st.jsx)("div",{class:"about-container container",children:(0,st.jsxs)("div",{className:"about__hero-content",children:[(0,st.jsx)("h1",{className:"title__h1",children:"\u041d\u0430\u0448\u0430 \u0456\u0441\u0442\u043e\u0440\u0456\u044f"}),(0,st.jsx)("p",{className:"text",children:"\u041a\u043e\u043b\u0438 \u043b\u044e\u0434\u044f\u043c \u0445\u043e\u0447\u0435\u0442\u044c\u0441\u044f \u0448\u0432\u0438\u0434\u043a\u043e \u0456 \u0441\u043c\u0430\u0447\u043d\u043e, \u0432\u043e\u043d\u0438 \u043e\u0431\u0438\u0440\u0430\u044e\u0442\u044c Polar"}),(0,st.jsx)("div",{className:"about__hero-preview",children:(0,st.jsx)("img",{src:HA,alt:""})})]})})}),(0,st.jsx)("section",{class:"about-section",children:(0,st.jsxs)("div",{class:"about-container container",children:[(0,st.jsxs)("div",{class:"about-top-wrap",children:[(0,st.jsxs)("ul",{class:"about-top-list list",children:[(0,st.jsxs)("li",{class:"about-top-item",children:[(0,st.jsx)("p",{class:"about-top-subtitle",children:"\u041d\u0430\u0448\u0430 \u0456\u0441\u0442\u043e\u0440\u0456\u044f"}),(0,st.jsx)("h2",{class:"about-top-title title",children:"\u0417 \u0447\u043e\u0433\u043e \u0432\u0441\u0435 \u043f\u043e\u0447\u0430\u043b\u043e\u0441\u044f?"})]}),(0,st.jsx)("li",{class:"about-top-item",children:(0,st.jsx)("p",{class:"about-top-text text",children:"\u0417\u0430\u0441\u043d\u043e\u0432\u043d\u0438\u043a Polar \u2014 \u0454\u0432\u0440\u043e\u043f\u0435\u0454\u0446\u044c \u0437 \u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0438\u043c \u043a\u043e\u0440\u0456\u043d\u043d\u044f\u043c \u2014 \u043a\u0456\u043b\u044c\u043a\u0430 \u0440\u043e\u043a\u0456\u0432 \u0442\u043e\u043c\u0443 \u0432\u0456\u0434\u0432\u0456\u0434\u0430\u0432 \u0423\u043a\u0440\u0430\u0457\u043d\u0443. \u0410 \u041e\u0434\u0435\u0441\u0443, \u0439\u043e\u0433\u043e \u0436\u0438\u0442\u0435\u043b\u0456\u0432 \u0456 \u043a\u043e\u043b\u043e\u0440\u0438\u0442 \u0432\u0438 \u0437\u043d\u0430\u0454\u0442\u0435 \u2014 \u043d\u0435 \u0437\u0430\u043a\u043e\u0445\u0430\u0442\u0438\u0441\u044f \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e."})}),(0,st.jsx)("li",{class:"about-top-item",children:(0,st.jsx)("p",{class:"about-top-text text",children:"\u0406\u0441\u043a\u0440\u0430, \u0431\u0443\u0440\u044f, \u0431\u043e\u0436\u0435\u0432\u0456\u043b\u043b\u044f, \u0456 \u043e\u0442 \u043d\u0430\u0448 \u041a\u043e\u0441\u0442\u044f \u0432\u0438\u0440\u0456\u0448\u0438\u0432 \u0437\u0430\u043b\u0438\u0448\u0438\u0442\u0438\u0441\u044f \u0432 \u0423\u043a\u0440\u0430\u0457\u043d\u0456, \u0430\u0431\u0438 \u0440\u0430\u0434\u0443\u0432\u0430\u0442\u0438 \u043b\u044e\u0434\u0435\u0439 \u0432\u0438\u0448\u0443\u043a\u0430\u043d\u0438\u043c\u0438 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u044f\u043c\u0438 \u0439 \u043f\u0456\u0434\u043d\u0456\u043c\u0430\u0442\u0438 \u0435\u043a\u043e\u043d\u043e\u043c\u0456\u043a\u0443 \u043d\u0430\u0448\u043e\u0457 \u043a\u0440\u0430\u0457\u043d\u0438."})}),(0,st.jsx)("li",{class:"about-top-item",children:(0,st.jsx)("p",{class:"about-top-text text",children:"\u041f\u0456\u0446\u0430, \u0441\u0443\u0448\u0456, \u0431\u0443\u0440\u0433\u0435\u0440\u0438, \u0440\u0430\u043c\u0435\u043d\u2026 \u0410 \u0434\u0435 \u0436 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456, \u044f\u043a\u0456 \u0442\u043e\u0447\u043d\u043e \u0437\u0430\u0439\u043c\u0430\u044e\u0442\u044c \u043e\u043a\u0440\u0435\u043c\u0435 \u043c\u0456\u0441\u0446\u0435 \u0432 \u0441\u0435\u0440\u0434\u0435\u0447\u043a\u0443 \u043a\u043e\u0436\u043d\u043e\u0433\u043e \u0443\u043a\u0440\u0430\u0457\u043d\u0446\u044f?"})}),(0,st.jsx)("li",{class:"about-top-item",children:(0,st.jsx)("p",{class:"about-top-text text",children:"\u0426\u0435 \u043f\u0438\u0442\u0430\u043d\u043d\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0432 \u0441\u043e\u0431\u0456 \u0437\u0430\u0441\u043d\u043e\u0432\u043d\u0438\u043a Polar, \u044f\u043a\u0438\u0439 \u043d\u0435 \u043f\u043e\u0431\u0430\u0447\u0438\u0432 \u043d\u0430 \u0440\u0438\u043d\u043a\u0443 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0446\u0456\u0454\u0457 \u0441\u0442\u0440\u0430\u0432\u0438 \u0456 \u0441\u043c\u0430\u0447\u043d\u0438\u0445 \u0441\u043e\u0443\u0441\u0456\u0432 \u0434\u043e \u043d\u0435\u0457. \u0406 \u043f\u043e\u043d\u0435\u0441\u043b\u0430\u0441\u044f\u2026"})})]}),(0,st.jsx)("img",{src:zA,alt:"women",class:"about-top-img first"})]}),(0,st.jsx)("svg",{class:"about-icon first",children:(0,st.jsx)("use",{href:"".concat(GA,"#icon-arrow-1")})}),(0,st.jsxs)("div",{class:"about-wrap",children:[(0,st.jsxs)("ul",{class:"about-list list",children:[(0,st.jsx)("li",{class:"about-item",children:(0,st.jsxs)("h2",{class:"about-title title",children:["\u042f\u043a \u0432\u0441\u0435",(0,st.jsx)("br",{}),"\u043f\u0440\u0438\u0437\u0443\u043f\u0438\u043d\u0438\u043b\u043e\u0441\u044f?"]})}),(0,st.jsx)("li",{class:"about-item",children:(0,st.jsx)("p",{class:"about-text text",children:"23 \u043b\u044e\u0442\u043e\u0433\u043e \u0431\u0443\u043b\u0430 \u043f\u0440\u0435-\u043f\u0430\u0442\u0456 \u0434\u0435\u0433\u0443\u0441\u0442\u0430\u0446\u0456\u044f \u0432 \u041e\u0434\u0435\u0441\u0456:\u043b\u044e\u0434\u0438 \u0433\u0456\u0434\u043d\u043e \u043e\u0446\u0456\u043d\u0438\u043b\u0438 \u043d\u0430\u0448\u0456 \u0441\u0442\u0430\u0440\u0430\u043d\u043d\u044f, \u0441\u043c\u0430\u043a \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456\u0432, \u0440\u0456\u0437\u043d\u043e\u043c\u0430\u043d\u0456\u0442\u043d\u0456\u0441\u0442\u044c \u0432\u0438\u0431\u043e\u0440\u0443 \u0456 \u0448\u0432\u0438\u0434\u043a\u0456\u0441\u0442\u044c \u043f\u0440\u0438\u0433\u043e\u0442\u0443\u0432\u0430\u043d\u043d\u044f."})}),(0,st.jsx)("li",{class:"about-item",children:(0,st.jsx)("p",{class:"about-text text",children:"\u041d\u0430\u0441\u0442\u0443\u043f\u043d\u043e\u0433\u043e \u0434\u043d\u044f \u043f\u043e\u0447\u0430\u043b\u0430\u0441\u044f \u0432\u0456\u0439\u043d\u0430."})}),(0,st.jsx)("li",{class:"about-item",children:(0,st.jsx)("p",{class:"about-text text",children:"\u041c\u0438, \u044f\u043a \u0456 \u0431\u0443\u0434\u044c-\u044f\u043a\u0438\u0439 \u0431\u0456\u0437\u043d\u0435\u0441 \u0432 \u0423\u043a\u0440\u0430\u0457\u043d\u0456, \u043d\u0435 \u043c\u043e\u0433\u043b\u0438 \u043f\u0440\u0430\u0446\u044e\u0432\u0430\u0442\u0438 \u044f\u043a \u0440\u0430\u043d\u0456\u0448\u0435."})}),(0,st.jsx)("li",{class:"about-item",children:(0,st.jsx)("p",{class:"about-text text",children:"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 Polar \u043d\u0435 \u0437\u0434\u0430\u043b\u0430\u0441\u044f \u0456 \u043f\u0440\u0438\u0439\u043d\u044f\u043b\u0430 \u0440\u0456\u0448\u0435\u043d\u043d\u044f \u0432\u0456\u0434\u0447\u0438\u043d\u0438\u0442\u0438\u0441\u044f \u0432 \u0431\u0456\u043b\u044c\u0448 \u0431\u0435\u0437\u043f\u0435\u0447\u043d\u043e\u043c\u0443 \u043c\u0456\u0441\u0442\u0456 \u0423\u043a\u0440\u0430\u0457\u043d\u0438 \u2014 \u0423\u0436\u0433\u043e\u0440\u043e\u0434\u0456."})}),(0,st.jsx)("li",{class:"about-item",children:(0,st.jsx)("p",{class:"about-text text",children:"\u0421\u0442\u0432\u043e\u0440\u0438\u043b\u0438 \u0446\u0435\u0445 \u0443 \u0417\u0430\u043a\u0430\u0440\u043f\u0430\u0442\u0442\u0456, \u043f\u043e\u043b\u0456\u043f\u0448\u0438\u043b\u0438 \u0440\u0435\u0446\u0435\u043f\u0442\u0443\u0440\u0443 \u0456 \u0437\u0440\u043e\u0431\u0438\u043b\u0438 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456 \u0449\u0435 \u043a\u0440\u0430\u0449\u0438\u043c\u0438 \u0437 \u0456\u0434\u0435\u0430\u043b\u044c\u043d\u0438\u043c \u0442\u0456\u0441\u0442\u043e\u043c \u0456 \u043d\u0430\u0447\u0438\u043d\u043a\u0430\u043c\u0438!"})})]}),(0,st.jsx)("img",{src:qA,alt:"dishes",class:"about-img second"})]}),(0,st.jsx)("svg",{class:"about-icon second",children:(0,st.jsx)("use",{href:"".concat(GA,"#icon-arrow-2")})}),(0,st.jsxs)("div",{class:"about-bottom-wrap",children:[(0,st.jsxs)("ul",{class:"about-bottom-list list",children:[(0,st.jsx)("li",{class:"about-bottom-item",children:(0,st.jsxs)("h2",{class:"about-bottom-title title",children:["\u041c\u0438 \u043f\u0440\u043e\u0434\u0443\u043c\u0430\u043b\u0438 \u0432\u0441\u0435",(0,st.jsx)("br",{}),"\u0434\u043e \u0434\u0440\u0456\u0431\u043d\u0438\u0446\u044c"]})}),(0,st.jsx)("li",{class:"about-bottom-item",children:(0,st.jsx)("p",{class:"about-bottom-text text",children:"\u0423 \u0442\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e\u043c\u0443 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 (\u043c\u043e\u0432\u0430 \u0436 \u043d\u0435 \u043f\u0440\u043e\u0441\u0442\u043e \u043f\u0440\u043e \u0457\u0436\u0443, \u0430 \u043f\u0440\u043e \u041f\u0415\u041b\u042c\u041c\u0415\u041d\u0406) \u0437\u0456\u0431\u0440\u0430\u043b\u0430\u0441\u044f \u0441\u0438\u043b\u044c\u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u043d\u0430 \u0447\u043e\u043b\u0456 \u0456\u0437 \u0448\u0435\u0444-\u043a\u0443\u0445\u0430\u0440\u0435\u043c."})}),(0,st.jsx)("li",{class:"about-bottom-item",children:(0,st.jsx)("p",{class:"about-bottom-text text",children:"\u0414\u043d\u044f\u043c\u0438 \u0439 \u043d\u043e\u0447\u0430\u043c\u0438 \u043c\u0438 \u0440\u043e\u0437\u0440\u043e\u0431\u043b\u044f\u043b\u0438 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0456\u044e, \u043e\u0441\u043e\u0431\u043b\u0438\u0432\u0443 \u0440\u0435\u0446\u0435\u043f\u0442\u0443\u0440\u0443, \u043a\u043e\u043d\u0446\u0435\u043f\u0446\u0456\u044e \u043c\u0435\u043d\u044e \u0437 \u043f\u0440\u043e\u0444\u0435\u0441\u0456\u043e\u043d\u0430\u043b\u0430\u043c\u0438, \u0449\u043e\u0431\u0438 \u043d\u0430\u0441\u043e\u043b\u043e\u0434\u0436\u0443\u0432\u0430\u0442\u0438\u0441\u044f \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u044f\u043c\u0438 \u043c\u0456\u0433 \u043a\u043e\u0436\u0435\u043d."})}),(0,st.jsx)("li",{class:"about-bottom-item",children:(0,st.jsx)("p",{class:"about-bottom-text text",children:"\u041d\u0435 \u0437\u0430\u043b\u0438\u0448\u0438\u043b\u0438 \u0431\u0435\u0437 \u0443\u0432\u0430\u0433\u0438 \u043d\u0456\u043a\u043e\u0433\u043e."})}),(0,st.jsx)("li",{class:"about-bottom-item",children:(0,st.jsx)("p",{class:"about-bottom-text text",children:"\u0406 \u0432\u0435\u0433\u0435\u0442\u0430\u0440\u0456\u0430\u043d\u0446\u0456, \u0456 \u0432\u0435\u0433\u0430\u043d\u0438, \u0456 \u043f\u0435\u0440\u0435\u043a\u043e\u043d\u0430\u043d\u0456 \u043c\u2019\u044f\u0441\u043e\u0457\u0434\u0438, \u0456 \u043b\u044e\u0431\u0438\u0442\u0435\u043b\u0456 \u0440\u0438\u0431\u043a\u0438, \u043e\u0432\u043e\u0447\u0456\u0432, \u043d\u0430\u0432\u0456\u0442\u044c \u0441\u043e\u043b\u043e\u0434\u043e\u0449\u0456\u0432 \u0442\u043e\u0447\u043d\u043e \u0437\u043d\u0430\u0439\u0434\u0443\u0442\u044c \u043f\u043e\u0440\u0446\u0456\u044e \u0443\u043b\u044e\u0431\u043b\u0435\u043d\u0438\u0445 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456\u0432 \u0434\u043b\u044f \u0441\u0435\u0431\u0435 \u0432 Polar"})})]}),(0,st.jsx)("img",{src:WA,alt:"women",class:"about-bottom-img"})]})]})}),(0,st.jsx)("section",{class:"facts-section",children:(0,st.jsxs)("div",{class:"facts-container container",children:[(0,st.jsx)("h2",{class:"facts-main-title title",children:"\u0412\u0430\u0436\u043b\u0438\u0432\u0456 \u0444\u0430\u043a\u0442\u0438 \u043f\u0440\u043e Polar"}),(0,st.jsx)("div",{class:"facts-list-wrap",children:(0,st.jsxs)("ul",{class:"facts-list list",children:[(0,st.jsxs)("li",{class:"facts-item",children:[(0,st.jsx)("div",{class:"facts-icon-wrap",children:(0,st.jsx)("svg",{class:"facts-icon",children:(0,st.jsx)("use",{href:"".concat(GA,"#icon-facts-1")})})}),(0,st.jsx)("h3",{class:"facts-title",children:"\u041c\u0438 \u0441\u0430\u043c\u0456 \u0432\u0438\u0440\u043e\u0431\u043b\u044f\u0454\u043c\u043e \u0432\u0441\u0435"}),(0,st.jsx)("p",{class:"facts-text",children:"\u0444\u0430\u0440\u0448, \u0431\u0443\u043b\u044c\u0439\u043e\u043d\u0438, \u0441\u043e\u0443\u0441\u0438. \u0406 \u0446\u0435 \u0437 \u043d\u0430\u0439\u044f\u043a\u0456\u0441\u043d\u0456\u0448\u0438\u0445 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432 \u0432\u0456\u0434 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0435\u043d\u0438\u0445 \u043f\u043e\u0441\u0442\u0430\u0447\u0430\u043b\u044c\u043d\u0438\u043a\u0456\u0432. \u0422\u043e\u043c\u0443 \u0449\u043e, \u0445\u043e\u0440\u043e\u0448\u0456 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456 \u043f\u043e\u0447\u0438\u043d\u0430\u044e\u0442\u044c\u0441\u044f \u0437\u0456 \u0441\u0432\u0456\u0436\u0438\u0445 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432"})]}),(0,st.jsxs)("li",{class:"facts-item",children:[(0,st.jsx)("div",{class:"facts-icon-wrap",children:(0,st.jsx)("svg",{class:"facts-icon",children:(0,st.jsx)("use",{href:"".concat(GA,"#icon-facts-2")})})}),(0,st.jsx)("h3",{class:"facts-title",children:"10 \u0432\u0438\u0434\u0456\u0432 \u0440\u0456\u0437\u043d\u0438\u0445 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456\u0432"}),(0,st.jsx)("p",{class:"facts-text",children:"\u0406 \u0432\u0435\u0433\u0435\u0442\u0430\u0440\u0456\u0430\u043d\u0446\u0456, \u0456 \u0432\u0435\u0433\u0430\u043d\u0438, \u0456 \u043f\u0435\u0440\u0435\u043a\u043e\u043d\u0430\u043d\u0456 \u043c\u2019\u044f\u0441\u043e\u0457\u0434\u0438, \u0456 \u043b\u044e\u0431\u0438\u0442\u0435\u043b\u0456 \u0440\u0438\u0431\u043a\u0438, \u043e\u0432\u043e\u0447\u0456\u0432, \u043d\u0430\u0432\u0456\u0442\u044c \u0441\u043e\u043b\u043e\u0434\u043e\u0449\u0456\u0432 \u0442\u043e\u0447\u043d\u043e \u0437\u043d\u0430\u0439\u0434\u0443\u0442\u044c \u043f\u043e\u0440\u0446\u0456\u044e \u0443\u043b\u044e\u0431\u043b\u0435\u043d\u0438\u0445 \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456\u0432"})]}),(0,st.jsxs)("li",{class:"facts-item",children:[(0,st.jsx)("div",{class:"facts-icon-wrap",children:(0,st.jsx)("svg",{class:"facts-icon",children:(0,st.jsx)("use",{href:"".concat(GA,"#icon-facts-3")})})}),(0,st.jsx)("h3",{class:"facts-title",children:"4 \u0445\u0432\u0438\u043b\u0438\u043d\u0438"}),(0,st.jsx)("p",{class:"facts-text",children:"\u041c\u0430\u043b\u043e \u0449\u043e \u043c\u043e\u0436\u043d\u0430 \u0432\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u0438 \u0437\u0440\u043e\u0431\u0438\u0442\u0438 \u0437\u0430 \u0446\u0435\u0439 \u0447\u0430\u0441, \u0430\u043b\u0435 \u043c\u0438 \u0442\u043e\u0447\u043d\u043e \u0437\u043d\u0430\u0454\u043c\u043e, \u0449\u043e \u043f\u0435\u043b\u044c\u043c\u0435\u043d\u0456 \u0432\u0456\u0434 Polar \u0432\u0436\u0435 \u0431\u0443\u0434\u0443\u0442\u044c \u0433\u043e\u0442\u043e\u0432\u0456"})]}),(0,st.jsxs)("li",{class:"facts-item",children:[(0,st.jsx)("div",{class:"facts-icon-wrap",children:(0,st.jsx)("svg",{class:"facts-icon",children:(0,st.jsx)("use",{href:"".concat(GA,"#icon-facts-4")})})}),(0,st.jsx)("h3",{class:"facts-title",children:"Polar \u0437 \u0435\u043a\u043e\u043b\u043e\u0433\u0456\u0454\u044e"}),(0,st.jsx)("p",{class:"facts-text",children:"\u041d\u0430 \u0432\u0441\u0456\u0445 \u0435\u0442\u0430\u043f\u0430\u0445 \u0432\u0438\u0440\u043e\u0431\u043d\u0438\u0446\u0442\u0432\u0430 \u0439 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u043c\u0438 \u043d\u0430\u043c\u0430\u0433\u0430\u0454\u043c\u043e\u0441\u044f \u043c\u0456\u043d\u0456\u043c\u0456\u0437\u0443\u0432\u0430\u0442\u0438 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f \u043f\u043b\u0430\u0441\u0442\u0438\u043a\u0443"})]})]})})]})}),(0,st.jsx)("section",{class:"gallery-section",children:(0,st.jsxs)("div",{class:"gallery-container container",children:[(0,st.jsxs)("picture",{children:[(0,st.jsx)("source",{srcset:"./images/about/about-8-desc.jpg",type:"image/jpeg",media:"(min-width:768px)"}),(0,st.jsx)("img",{src:"./images/about/about-8-mobile.jpg",alt:"",class:"gallery-img"})]}),(0,st.jsxs)("div",{class:"gallery-img-wrap",children:[(0,st.jsxs)("picture",{children:[(0,st.jsx)("source",{srcset:"./images/about/about-7-desc.jpg",type:"image/jpeg",media:"(min-width:768px)"}),(0,st.jsx)("img",{src:"./images/about/about-7-mobile.jpg",alt:"",class:"gallery-img"})]}),(0,st.jsxs)("picture",{children:[(0,st.jsx)("source",{srcset:"./images/about/about-13-desc.jpg",type:"image/jpeg",media:"(min-width:768px)"}),(0,st.jsx)("img",{src:"./images/about/about-13-mobile.jpg",alt:"",class:"gallery-img"})]})]}),(0,st.jsxs)("div",{class:"gallery-img-wrap",children:[(0,st.jsxs)("picture",{children:[(0,st.jsx)("source",{srcset:"./images/about/about-9-desc.jpg",type:"image/jpeg",media:"(min-width:768px)"}),(0,st.jsx)("img",{src:"./images/about/about-9-mobile.jpg",alt:"",class:"gallery-img"})]}),(0,st.jsxs)("picture",{children:[(0,st.jsx)("source",{srcset:"./images/about/about-15-desc.jpg",type:"image/jpeg",media:"(min-width:768px)"}),(0,st.jsx)("img",{src:"./images/about/about-15-mobile.jpg",alt:"",class:"gallery-img"})]})]}),(0,st.jsxs)("div",{class:"gallery-img-wrap",children:[(0,st.jsxs)("picture",{children:[(0,st.jsx)("source",{srcset:"./images/about/about-12-desc.jpg",type:"image/jpeg",media:"(min-width:768px)"}),(0,st.jsx)("img",{src:"./images/about/about-12-mobile.jpg",alt:"",class:"gallery-img"})]}),(0,st.jsxs)("picture",{children:[(0,st.jsx)("source",{srcset:"./images/about/about-14-desc.jpg",type:"image/jpeg",media:"(min-width:768px)"}),(0,st.jsx)("img",{src:"./images/about/about-14-mobile.jpg",alt:"",class:"gallery-img"})]})]}),(0,st.jsxs)("div",{class:"gallery-img-wrap",children:[(0,st.jsxs)("picture",{children:[(0,st.jsx)("source",{srcset:"./images/about/about-11-desc.jpg",type:"image/jpeg",media:"(min-width:768px)"}),(0,st.jsx)("img",{src:"./images/about/about-11-mobile.jpg",alt:"",class:"gallery-img"})]}),(0,st.jsxs)("picture",{children:[(0,st.jsx)("source",{srcset:"./images/about/about-10-desc.jpg",type:"image/jpeg",media:"(min-width:768px)"}),(0,st.jsx)("img",{src:"./images/about/about-10-mobile.jpg",alt:"",class:"gallery-img"})]})]})]})})]})},QA=function(e){var t=new Date;return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+e.split(" - ")[0]+":00"},JA=function(e){var t=0;return e.forEach((function(e){t+=e.totalPrice})),t};var ZA=function(e){var t=e.name,n=e.placeholder,r=e.onChange,i=e.data;return(0,st.jsxs)("label",{className:"inputText",children:[(0,st.jsx)("span",{children:t}),(0,st.jsx)("select",{type:"selector",placeholder:n,onChange:function(e){return r(e.target.value)},children:i.map((function(e){return(0,st.jsx)("option",{value:e.value,children:e.label},e.id)}))})]})},YA=function(e){var t=e.data,n=e.selectedOption,r=e.onOptionChange,i=e.column;return(0,st.jsx)("div",{className:"radio-button ".concat(i&&"radio-button-column"),n:!0,children:t.map((function(e){return(0,st.jsxs)("label",{children:[(0,st.jsxs)("div",{className:"radio-button__flex-content",children:[(0,st.jsx)("input",{type:"radio",value:e.value,checked:n===e.value,onChange:r}),(0,st.jsx)("span",{}),e.label]}),e.info&&(0,st.jsx)("p",{className:"radio-button__info",children:e.info})]},e.id)}))})},$A=function(e){return(0,st.jsxs)("label",{className:"inputTextArea",children:[(0,st.jsx)("span",{children:e.name}),(0,st.jsx)("textarea",{type:"textarea",placeholder:e.placeholder,onChange:function(t){return e.onChange(t.target.value)}})]})},XA=function(e){var t=e.isChecked,n=e.onCheckboxChange,r=e.label;return(0,st.jsxs)("label",{className:"checkbox-container",children:[(0,st.jsx)("input",{type:"checkbox",checked:t,onChange:function(){n(!t)}}),(0,st.jsx)("span",{className:"checkmark"}),(0,st.jsx)("span",{className:"checkbox-label",children:r})]})},ej=function(e){return(0,st.jsxs)("button",{className:"btn btn-secondary ".concat(!0===e.fullWide&&"btn-secondary-fw"," "),onClick:e.onClick,disabled:e.disabled,children:[e.name,e.arrow&&(0,st.jsx)("svg",{width:"17",height:"20",viewBox:"0 0 17 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M9.16645 11.7814L12.7425 8.20535L13.6851 9.14802L8.49979 14.3334L3.31445 9.14802L4.25712 8.20535L7.83312 11.7814V3.66669H9.16645V11.7814Z",fill:"#12130F"})})]})},tj=function(e){var t=e.orderId,n=e.deliveryTime,r=we();return(0,st.jsx)("div",{children:(0,st.jsx)("div",{className:"thanks",children:(0,st.jsxs)("div",{className:"thanks__content",children:[(0,st.jsx)("div",{className:"thanks__ico",children:(0,st.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M11.602 13.7599L13.014 15.1719L21.4795 6.7063L22.8938 8.12051L13.014 18.0003L6.65 11.6363L8.06421 10.2221L10.189 12.3469L11.602 13.7599ZM11.6037 10.9322L16.5563 5.97949L17.9666 7.38977L13.014 12.3424L11.6037 10.9322ZM8.77698 16.5873L7.36396 18.0003L1 11.6363L2.41421 10.2221L3.82723 11.6352L3.82604 11.6363L8.77698 16.5873Z",fill:"#DF643A"})})}),(0,st.jsx)("h4",{className:"title__h4",children:"\u0414\u044f\u043a\u0443\u0454\u043c\u043e"}),(0,st.jsxs)("p",{className:"thanks__text",children:["\u041d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u043e\u0433\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u2116",t]}),(0,st.jsx)("div",{className:"thanks__delivery-time",children:(0,st.jsxs)("p",{children:["\u041e\u0440\u0456\u0454\u043d\u0442\u043e\u0432\u043d\u0438\u0439 \u0447\u0430\u0441 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u044f: ",(0,st.jsx)("b",{children:n})]})}),(0,st.jsx)(ej,{name:"\u0417\u0432\u2019\u044f\u0437\u0430\u0442\u0438\u0441\u044f \u0437 \u043d\u0430\u043c\u0438",onClick:function(){return r("/contact")},fullWide:!0})]})})})},nj=sa({name:"order",initialState:{paymentData:null,orderData:null,posterOrder:null,promocode:!1},reducers:{setPaymentData:function(e,t){e.paymentData=t.payload.paymentData,localStorage.setItem("user_payment_data",JSON.stringify(t.payload.paymentData))},setOrderData:function(e,t){e.orderData=t.payload.orderData,localStorage.setItem("user_order_data",JSON.stringify(t.payload.orderData))},setPosterResponsea:function(e,t){e.posterOrder=t.payload.posterOrder,localStorage.setItem("poster_order",JSON.stringify(t.payload.posterOrder))},usedPromocode:function(e){e.promocode=!e.promocode}}}),rj=nj.actions,ij=rj.setPaymentData,aj=rj.setOrderData,oj=rj.setPosterResponsea,sj=rj.usedPromocode,uj=nj.reducer,cj=[{id:1,label:"12:00 - 12:30",value:"12:00 - 12:30"},{id:2,label:"12:30 - 13:00",value:"12:30 - 13:00"},{id:3,label:"13:00 - 13:30",value:"13:00 - 13:30"},{id:4,label:"13:30 - 14:00",value:"13:30 - 14:00"},{id:5,label:"14:00 - 14:30",value:"14:00 - 14:30"},{id:6,label:"14:30 - 15:00",value:"14:30 - 15:00"},{id:7,label:"15:00 - 15:30",value:"15:00 - 15:30"},{id:8,label:"15:30 - 16:00",value:"15:30 - 16:00"},{id:9,label:"16:00 - 16:30",value:"16:00 - 16:30"},{id:10,label:"16:30 - 17:00",value:"16:30 - 17:00"},{id:11,label:"17:00 - 17:30",value:"17:00 - 17:30"},{id:12,label:"17:30 - 18:00",value:"17:30 - 18:00"},{id:13,label:"18:00 - 18:30",value:"18:00 - 18:30"},{id:14,label:"18:30 - 19:00",value:"18:30 - 19:00"},{id:15,label:"19:00 - 19:30",value:"19:00 - 19:30"},{id:16,label:"19:30 - 20:00",value:"19:30 - 20:00"},{id:17,label:"22:00 - 22:30",value:"22:00 - 22:30"},{id:16,label:"23:00 - 23:30",value:"23:00 - 23:30"}],lj=function(){var e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()+5).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r," ").concat(i,":").concat(a,":").concat(o)},fj=function(){var e="https://polarpelmeni-api.work-set.eu/api",t={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},n=l((0,r.useState)(!1),2),i=n[0],a=n[1],o=l((0,r.useState)(!1),2),s=o[0],u=o[1],c=l((0,r.useState)(null),2),f=c[0],h=c[1],d=l((0,r.useState)({status:!1,currentError:""}),2),p=d[0],v=d[1],m=l((0,r.useState)(!1),2),g=m[0],y=m[1],k=ke(),b=ot(),w=we(),x=Ye((function(e){return e.shoppingCart.products})),_=x.map((function(e){return{product_id:e.id,count:e.count}})),S=Ye((function(e){return e.modals})),E=Ye((function(e){return e.user})),C=(Ye((function(e){return e.order})),function(e){var t=new Date,n=t.getHours(),r=t.getMinutes(),i="".concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"));return e.filter((function(e){return e.label.split(" - ")[0]>=i}))}(cj)),I=l((0,r.useState)({spot_id:1,name:"",number:"",selectedAddress:"",street:"",houseNumber:"",deliveryTime:"",howToReciveOrder:"",entrance:"",apartment:"",buildingCode:"",floor:"",selectedTime:lj(),promoCode:"",bonus:"",paymentMethod:1,change:"",withoutDevices:!1,personCount:1,comment:"",doNotCall:!1}),2),T=I[0],L=I[1],N={spot_id:1,first_name:T.name,phone:T.number,products:_,client_address:{address1:"\u0412\u0443\u043b\u0438\u0446\u044f: ".concat(T.street,", \u0414\u0456\u043c: ").concat(T.houseNumber),address2:"\u041f\u0430\u0440\u0430\u0434\u043d\u0430\u044f: ".concat(T.entrance,", \u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430: ").concat(T.apartment,", \u041a\u043e\u0434: ").concat(T.buildingCode,", \u041f\u043e\u0432\u0435\u0440\u0445: ").concat(T.floor,", ")},service_mode:"\u0421\u0430\u043c\u043e\u0432\u0438\u0432\u0456\u0437"===T.howToReciveOrder?2:3,delivery_time:"".concat("\u041d\u0430 \u0437\u0430\u0440\u0430\u0437"===T.deliveryTime?lj():QA(T.selectedTime)),payment:{type:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430"===T.paymentMethod?0:1,sum:i?.6*JA(x):JA(x),currency:"UAH"},promotion:i?{id:"2",involved_products:_}:"",comment:"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 !!!\n    \u041a\u043e\u043b-\u0432\u043e \u043f\u0435\u0440\u0441\u043e\u043d: ".concat(T.personCount,",\n      ").concat(T.comment&&" ".concat(T.comment),", ").concat(T.withoutDevices&&"\u0411\u0435\u0437 \u043f\u0440\u0438\u0431\u043e\u0440\u043e\u0432",",").concat(T.doNotCall&&"\u041d\u0435 \u043f\u0435\u0440\u0435\u0437\u0432\u0430\u043d\u0438\u0432\u0430\u0442\u044c",", ").concat(2===T.howToReciveOrder&&"\u0421\u0410\u041c\u041e\u0412\u042b\u0412\u041e\u0417"," ").concat(i&&"\u0421\u041a\u0418\u0414\u041a\u0410 40%")},P=function(e,t){L((function(n){return Nt(Nt({},n),{},Tt({},e,t))}))},O=function(){var n=JSON.parse(localStorage.getItem("user_payment_data")).order_id,r=JSON.parse(localStorage.getItem("user_order_data"));kr.post(e+"/createOrder",{order_id:n,data:r},{headers:t}).then((function(n){var r=n.data;console.log("createOrder:",r),b(oj({posterOrder:r.response})),y(!0),i&&kr.post(e+"/promocode",{token:E.token},{headers:t}).then((function(e){var t=e.data;console.log("usagePromotion:",t)})).catch((function(e){return console.error(e)}))})).catch((function(e){return console.error(e)}))},A=function(){""===N.phone?v({status:!0,currentError:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u043f\u043e\u043b\u0435 \u043d\u043e\u043c\u0435\u0440\u0443 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443"}):""===T.howToReciveOrder?v({status:!0,currentError:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0431\u0435\u0440\u0456\u0442\u044c \u0441\u043f\u043e\u0441\u0456\u0431 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}):JA(x)<=200?(v({status:!0,currentError:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f 200 \u20b4"}),setTimeout((function(){v({status:!1,currentError:""})}),3e3)):(b(aj({orderData:N})),1===N.payment.type?function(n){var r={amount:n};kr.post(e+"/pay",r,{headers:t}).then((function(e){var t=e.data,n="https://liqpay.ua/api/3/checkout?data=".concat(t.data,"&signature=").concat(t.signature);b(ij({paymentData:t})),console.log("createTransaction:",t,n),window.location.replace(n)})).catch((function(e){return console.error(e)}))}(i?.6*JA(x):JA(x)):O())};return(0,r.useEffect)((function(){"checkout"===new URLSearchParams(k.search).get("status")&&function(){var n={order_id:JSON.parse(localStorage.getItem("user_payment_data")).order_id};kr.post(e+"/getStatus",n,{headers:t}).then((function(e){var t=e.data;console.log("checkTransactionStatus:",t),"success"===t?u(!0):"unpaid"===t&&(v({status:!0,currentError:"\u041e\u043f\u043b\u0430\u0442\u0430 \u043d\u0435 \u0432\u0434\u0430\u043b\u0430"}),localStorage.removeItem("user_payment_data"),w("/order"))})).catch((function(e){return console.error(e)}))}()}),[]),(0,r.useEffect)((function(){s&&O()}),[s]),(0,r.useEffect)((function(){g&&(h(JSON.parse(localStorage.getItem("poster_order"))),setTimeout((function(){w("/"),localStorage.removeItem("posterOrder"),localStorage.removeItem("user_payment_data"),localStorage.removeItem("user_order_data")}),5e3))}),[g]),(0,r.useEffect)((function(){null!==f&&(console.log("posterOrder",f),b(vo({isOpen:!0})))}),[f]),(0,r.useEffect)((function(){E.isAuthenticated&&(P("name",E.name),P("number",E.phone),T.name=E.name,T.number=E.phone)}),[E]),(0,st.jsxs)(st.Fragment,{children:[S.thanksModal&&(0,st.jsx)(wr,{closeModal:function(){b(vo({isOpen:!1}))},children:(0,st.jsx)(tj,{orderId:f.incoming_order_id,deliveryTime:f.delivery_time})}),!0===p.status&&(0,st.jsx)(ko,{action:p.currentError,onClick:function(){return v({status:!1,currentError:""})},error:!0}),(0,st.jsxs)("section",{className:"order-page__form",children:[(0,st.jsxs)("section",{className:"order-page__section",children:[(0,st.jsx)("h3",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"}),(0,st.jsxs)("div",{className:"order-page__section-inputs",children:[(0,st.jsx)(RA,{name:"\u0412\u0430\u0448\u0435 \u0456\u043c\u2019\u044f",placeholder:"\u0412\u0430\u0448\u0435 \u0456\u043c\u2019\u044f",inputValue:T.name,value:T.name,onChange:function(e){return P("name",e)}}),(0,st.jsx)(_o,{value:T.number,inputValue:T.number,onChange:function(e){return P("number",e)}})]})]}),(0,st.jsxs)("section",{className:"order-page__section",children:[(0,st.jsx)("h3",{children:"\u0421\u043f\u043e\u0441\u0456\u0431 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,st.jsx)("section",{className:"order-page__section-inputs",children:(0,st.jsx)(ZA,{name:"\u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0456 \u0430\u0434\u0440\u0435\u0441\u0438",data:[{id:1,label:"\u041d\u0435\u043c\u0430\u0454",value:"\u041d\u0435\u043c\u0430\u0454"}],placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0430\u0434\u0440\u0435\u0441\u0443",value:T.selectedAddress,onChange:function(e){return P("selectedAddress",e)}})}),(0,st.jsxs)("section",{className:"order-page__section-inputs order-page__section-inputs-row",children:[(0,st.jsx)(RA,{name:"\u0412\u0443\u043b\u0438\u0446\u044f",placeholder:"\u0412\u0443\u043b\u0438\u0446\u044f",value:T.street,onChange:function(e){return P("street",e)}}),(0,st.jsx)(RA,{name:"\u2116 \u0411\u0443\u0434\u0438\u043d\u043a\u0443",placeholder:"\u2116 \u0411\u0443\u0434\u0438\u043d\u043a\u0443",value:T.houseNumber,onChange:function(e){return P("houseNumber",e)}})]}),(0,st.jsx)("section",{className:"order-page__section-inputs",children:(0,st.jsx)(YA,{data:[{id:1,value:"\u0414\u043e \u0434\u0432\u0435\u0440\u0435\u0439",label:"\u0414\u043e \u0434\u0432\u0435\u0440\u0435\u0439"},{id:2,value:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0438\u0439 \u0431\u0443\u0434\u0438\u043d\u043e\u043a",label:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0438\u0439 \u0431\u0443\u0434\u0438\u043d\u043e\u043a"},{id:4,value:"\u0412\u0438\u0439\u0434\u0443 \u0434\u043e \u043c\u0430\u0448\u0438\u043d\u0438",label:"\u0412\u0438\u0439\u0434\u0443 \u0434\u043e \u043c\u0430\u0448\u0438\u043d\u0438"},{id:3,value:"\u0421\u0430\u043c\u043e\u0432\u0438\u0432\u0456\u0437",label:"\u0421\u0430\u043c\u043e\u0432\u0438\u0432\u0456\u0437",info:"(\u041e\u0434\u0435\u0441\u0430, \u0432\u0443\u043b. \u041b\u0435\u0439\u0442\u0435\u043d\u0430\u043d\u0442\u0430 \u0428\u043c\u0456\u0434\u0442\u0430 25)"}],selectedOption:T.howToReciveOrder,onOptionChange:function(e){return P("howToReciveOrder",e.target.value)}})}),"\u0414\u043e \u0434\u0432\u0435\u0440\u0435\u0439"===T.howToReciveOrder&&(0,st.jsxs)("section",{className:"order-page__section-inputs order-page__section-inputs-row",children:[(0,st.jsx)(RA,{name:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430",placeholder:"\u2116 \u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0438",value:T.apartment,onChange:function(e){return P("apartment",e)}}),(0,st.jsx)(RA,{name:"\u041f\u0430\u0440\u0430\u0434\u043d\u0430",placeholder:"\u2116 \u041f\u0430\u0440\u0430\u0434\u043d\u043e\u0457",value:T.entrance,onChange:function(e){return P("entrance",e)}}),(0,st.jsx)(RA,{name:"\u041a\u043e\u0434",placeholder:"\u041a\u043e\u0434",value:T.buildingCode,onChange:function(e){return P("buildingCode",e)}}),(0,st.jsx)(RA,{name:"\u041f\u043e\u0432\u0435\u0440\u0445",placeholder:"\u041f\u043e\u0432\u0435\u0440\u0445",value:T.floor,onChange:function(e){return P("floor",e)}})]})]}),(0,st.jsxs)("section",{className:"order-page__section",children:[(0,st.jsx)("h3",{children:"\u0427\u0430\u0441 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u044f"}),(0,st.jsxs)("section",{className:"order-page__section-inputs",children:[(0,st.jsx)(YA,{data:[{id:1,value:"\u041d\u0430 \u0437\u0430\u0440\u0430\u0437",label:"\u041d\u0430 \u0437\u0430\u0440\u0430\u0437"},{id:2,value:"\u0412\u043a\u0430\u0437\u0430\u0442\u0438 \u0442\u043e\u0447\u043d\u0438\u0439 \u0447\u0430\u0441",label:"\u0412\u043a\u0430\u0437\u0430\u0442\u0438 \u0442\u043e\u0447\u043d\u0438\u0439 \u0447\u0430\u0441"}],selectedOption:T.deliveryTime,onOptionChange:function(e){return P("deliveryTime",e.target.value)},column:!0}),"\u0412\u043a\u0430\u0437\u0430\u0442\u0438 \u0442\u043e\u0447\u043d\u0438\u0439 \u0447\u0430\u0441"===T.deliveryTime&&(0,st.jsx)(ZA,{name:"\u0427\u0430\u0441",placeholder:"\u0427\u0430\u0441",data:C,value:T.selectedTime,onChange:function(e){return P("selectedTime",e)}})]})]}),(0,st.jsxs)("section",{className:"order-page__section",children:[(0,st.jsx)("h3",{children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434"}),(0,st.jsxs)("section",{className:"order-page__section-inputs order-page__section-inputs-row",children:[(0,st.jsx)(ZA,{name:"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434",placeholder:"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434",data:E.isAuthenticated&&E.promocode40?[{id:0,label:"40%",value:"40%"}]:[],value:T.paymentMethod,onChange:function(e){return P("promoCode",e)}}),(0,st.jsx)(Ya,{name:"\u0417\u0430\u0441\u0442\u043e\u0441\u0443\u0432\u0430\u0442\u0438",onClick:function(){a(!0),b(sj())},disabled:i})]}),E.isAuthenticated&&E.promocode40&&(0,st.jsxs)("div",{className:"order-page__have-promocode",children:[(0,st.jsx)("span",{children:"\u0423 \u0412\u0410\u0421 \u0415 \u041f\u0420\u041e\u041c\u041e\u041a\u041e\u0414 \u041d\u0410 \u0421\u041a\u0418\u0414\u041a\u0423 40%"}),(0,st.jsx)("div",{className:"order-page__arrow",children:(0,st.jsx)("svg",{width:"17",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,st.jsx)("path",{d:"M9.16645 11.7814L12.7425 8.20535L13.6851 9.14802L8.49979 14.3334L3.31445 9.14802L4.25712 8.20535L7.83312 11.7814V3.66669H9.16645V11.7814Z",fill:"#12130F"})})})]})]}),(0,st.jsxs)("section",{className:"order-page__section",children:[(0,st.jsx)("h3",{children:"\u0421\u043f\u043e\u0441\u0456\u0431 \u043e\u043f\u043b\u0430\u0442\u0438"}),(0,st.jsx)("div",{className:"order-page__section-inputs",children:(0,st.jsx)(RA,{name:"\u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u0442\u0438 \u0431\u043e\u043d\u0443\u0441\u0438",placeholder:"0",value:T.bonus,onChange:function(e){return P("bonus",e)}})}),(0,st.jsxs)("div",{className:"order-page__section-inputs order-page__section-inputs-row",children:[(0,st.jsx)(ZA,{name:"\u041e\u043f\u043b\u0430\u0442\u0430",placeholder:"\u041e\u043d\u043b\u0430\u0439\u043d",data:[{id:0,label:"\u041e\u043d\u043b\u0430\u0439\u043d",value:"\u041e\u043d\u043b\u0430\u0439\u043d"},{id:1,label:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430",value:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430"}],value:T.paymentMethod,onChange:function(e){return P("paymentMethod",e)}}),(0,st.jsx)(RA,{name:"\u0421\u0434\u0430\u0447\u0430 \u0441",placeholder:"500",value:T.change,onChange:function(e){return P("change",e)}})]})]}),(0,st.jsxs)("section",{className:"order-page__section",children:[(0,st.jsx)("h3",{children:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u043e"}),(0,st.jsxs)("section",{className:"order-page__section-inputs order-page__section-inputs-row",children:[(0,st.jsxs)("div",{className:"order-page__block",children:[(0,st.jsx)("span",{children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d:"}),(0,st.jsx)(XA,{isChecked:T.withoutDevices,onCheckboxChange:function(){return P("withoutDevices",!T.withoutDevices)},label:"\u0411\u0435\u0437 \u043f\u0440\u0438\u0431\u043e\u0440\u0456\u0432"})]}),(0,st.jsxs)("div",{className:"order-page__block",children:[(0,st.jsx)("span",{children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d:"}),(0,st.jsxs)("div",{className:"counter",children:[(0,st.jsx)("div",{className:"counter__btn",onClick:function(){T.personCount>1&&P("personCount",T.personCount-1)},children:"-"}),(0,st.jsx)("div",{className:"counter__value",children:T.personCount}),(0,st.jsx)("div",{className:"counter__btn",onClick:function(){return P("personCount",T.personCount+1)},children:"+"})]})]})]}),(0,st.jsx)("section",{className:"order-page__section-inputs",children:(0,st.jsx)($A,{name:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0434\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",placeholder:"\u041c\u043e\u0436\u0435\u0442\u0435 \u0442\u0443\u0442 \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u0438 \u0431\u0443\u0434\u044c-\u0449\u043e:)",value:T.comment,onChange:function(e){return P("comment",e)}})}),(0,st.jsx)("section",{className:"order-page__section-inputs",children:(0,st.jsx)("div",{className:"order-page__block",children:(0,st.jsx)(XA,{isChecked:T.doNotCall,onCheckboxChange:function(){return P("doNotCall",!T.doNotCall)},label:"\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0437\u0432\u043e\u043d\u044e\u0432\u0430\u0442\u0438 \u043c\u0435\u043d\u0456"})})})]}),(0,st.jsx)(Ya,{name:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",fullWide:!0,onClick:function(){return A()}})]})]})},hj=function(){ot();var e=Ye((function(e){return e.shoppingCart})),t=(Ye((function(e){return e.modals})),Ye((function(e){return e.order}))),n=function(e){var t=0;return e.forEach((function(e){t+=e.totalPrice})),t};return(0,r.useEffect)((function(){console.log(e.promocode)}),[e.promocode]),(0,st.jsx)(st.Fragment,{children:(0,st.jsx)(ut,{children:(0,st.jsx)("div",{className:"order-page",children:(0,st.jsxs)("div",{className:"order-page__content",children:[(0,st.jsx)(fj,{}),(0,st.jsx)("div",{className:"checkout",children:(0,st.jsxs)("div",{className:"checkout__content",children:[(0,st.jsx)("h3",{className:"title__h3 text__color--secondary",children:"\u0412\u0430\u0448\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,st.jsx)("ul",{className:"checkout__list",children:e.products.map((function(e){return(0,st.jsxs)("li",{className:"checkout__item",children:[(0,st.jsxs)("div",{className:"checkout__row",children:[(0,st.jsxs)("p",{className:"checkout__item-name",children:[" ",e.name]}),(0,st.jsxs)("p",{className:"checkout__item-count",children:[" x",e.count]})]}),(0,st.jsxs)("div",{className:"checkout__row",children:[(0,st.jsxs)("p",{className:"checkout__item-weight",children:[e.weight,"\u0433"]}),(0,st.jsxs)("p",{className:"checkout__item-price",children:[e.totalPrice," \u20b4"]})]})]})}))}),(0,st.jsxs)("div",{className:"checkout__total",children:[(0,st.jsxs)("div",{className:"checkout__row",children:[(0,st.jsx)("p",{className:"checkout__text",children:"\u0421\u0443\u043c\u0430 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f:"}),(0,st.jsxs)("p",{className:"checkout__text",children:[n(e.products)," \u20b4"]})]}),(0,st.jsxs)("div",{className:"checkout__row checkout__row-delivery",children:[(0,st.jsx)("p",{className:"checkout__text",children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430:"}),(0,st.jsx)("p",{className:"checkout__text",children:e.products.reduce((function(e,t){return e+t.totalPrice}),0)<500?"\u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e \u0442\u0430\u043a\u0441\u0456 (\u043e\u043f\u043b\u0430\u0447\u0443\u0454\u0442\u044c\u0441\u044f \u043e\u043a\u0440\u0435\u043c\u043e)":"\u0411\u0435\u0437\u043a\u043e\u0448\u0442\u043e\u0432\u043d\u0430"})]}),t.promocode&&(0,st.jsxs)("div",{className:"checkout__row",children:[(0,st.jsx)("p",{className:"checkout__text",children:"\u0421\u043a\u0438\u0434\u043a\u0430:"}),(0,st.jsxs)("p",{className:"checkout__text",children:[n(e.products)-.6*n(e.products)," \u20b4"]})]}),(0,st.jsxs)("div",{className:"checkout__row",children:[(0,st.jsx)("p",{className:"checkout__text checkout__text-bold",children:"\u0412\u0441\u044c\u043e\u0433\u043e \u0434\u043e \u0441\u043f\u043b\u0430\u0442\u0438:"}),(0,st.jsxs)("p",{className:"checkout__text-bold",children:[t.promocode?.6*n(e.products):n(e.products)," \u20b4"]})]})]})]})})]})})})})},dj=n.p+"static/media/logo.66639dc3934ecf41123d.png",pj=function(){var e=l((0,r.useState)(null),2),t=(e[0],e[1]),n=l((0,r.useState)([]),2),i=n[0],a=n[1];return(0,r.useEffect)((function(){kr.get("https://polarpelmeni-api.work-set.eu/api/menu",{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then((function(e){var n=e.data.response.filter((function(e){return e.category_name.startsWith("onlineOrder:")})).map((function(e,t){return{category_name:e.category_name.replace(/onlineOrder: /,""),category_id:e.category_id,category_position_index:t}}));n[13].category_position_index=0,n[12].category_position_index=1,n[11].category_position_index=2,n[8].category_position_index=3,n[10].category_position_index=4,n[9].category_position_index=5,n[2].category_position_index=6,n[3].category_position_index=7,n[0].category_position_index=8,n[6].category_position_index=9,n[4].category_position_index=10,n[7].category_position_index=11,n[1].category_position_index=12,n[5].category_position_index=13,n.sort((function(e,t){return e.category_position_index-t.category_position_index})),t(n[0].category_id),a(n)})).catch((function(e){return console.error(e)}))}),[]),(0,st.jsx)("footer",{className:"footer",children:(0,st.jsx)(ut,{children:(0,st.jsxs)("div",{className:"footer__content",children:[(0,st.jsxs)("div",{className:"footer__top",children:[(0,st.jsx)("div",{className:"footer__logo",children:(0,st.jsx)("img",{src:dj,alt:""})}),(0,st.jsxs)("nav",{className:"footer__column",children:[(0,st.jsx)("p",{className:"footer__title",children:"\u041c\u0435\u043d\u044e:"}),(0,st.jsx)("ul",{className:"footer__menu",children:i&&i.map((function(e,t){return(0,st.jsx)("li",{className:"footer__link",children:(0,st.jsx)(kt,{to:"/menu/".concat(e.category_id),children:e.category_name})},t)}))})]}),(0,st.jsxs)("div",{className:"footer__column",children:[(0,st.jsxs)("div",{className:"footer__contact",children:[(0,st.jsx)("p",{className:"footer__title",children:"\u041e\u0434\u0435\u0441\u0430:"}),(0,st.jsxs)("ul",{className:"footer__contacts",children:[(0,st.jsx)("a",{href:"tel:+380987271991",children:"+380 (98) 727-19-91"}),(0,st.jsx)("p",{children:"\u0432\u0443\u043b. \u041b\u0435\u043d\u0442\u0435\u0439\u043d\u0430\u043d\u0442\u0430 \u0428\u043c\u0456\u0434\u0442\u0430 25"})]})]}),(0,st.jsxs)("div",{className:"footer__contact",children:[(0,st.jsx)("p",{className:"footer__title",children:"\u0423\u0436\u0433\u043e\u0440\u043e\u0434:"}),(0,st.jsxs)("ul",{className:"footer__contacts",children:[(0,st.jsx)("a",{href:"tel:+380677149659",children:"+380 (67) 714-96-59"}),(0,st.jsx)("p",{children:"\u0432\u0443\u043b. \u041a\u0430\u043f\u0443\u0448\u0430\u043d\u0441\u044c\u043a\u0430, 7\u0430"})]})]}),(0,st.jsx)("p",{className:"footer__title"})]})]}),(0,st.jsxs)("div",{className:"footer__bottom",children:[(0,st.jsxs)("ul",{className:"footer__bottom-nav",children:[(0,st.jsx)("li",{children:(0,st.jsx)(kt,{children:"\xa9 2023 Polar Pelmeni"})}),(0,st.jsx)("li",{children:(0,st.jsx)(kt,{children:"\u041f\u0440\u043e \u043d\u0430\u0441"})}),(0,st.jsx)("li",{children:(0,st.jsx)(kt,{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})}),(0,st.jsx)("li",{children:(0,st.jsx)(kt,{children:"\u041f\u043e\u043b\u0456\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0456\u0434\u0435\u043d\u0446\u0456\u0439\u043d\u043e\u0441\u0442\u0456"})})]}),(0,st.jsxs)("div",{className:"footer__bottom-contacts",children:[(0,st.jsx)("a",{href:"mailto:support@polarpelmeni.com",children:"support@polarpelmeni.com"}),(0,st.jsxs)("div",{className:"footer__social-icons",children:[(0,st.jsx)("a",{href:"",className:"footer__social",children:(0,st.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,st.jsx)("g",{opacity:"0.8",clipPath:"url(#clip0_588_31750)",children:(0,st.jsx)("path",{d:"M7.99908 6.18163C7.51687 6.18163 7.05441 6.37319 6.71343 6.71417C6.37246 7.05514 6.1809 7.5176 6.1809 7.99982C6.1809 8.48203 6.37246 8.94449 6.71343 9.28546C7.05441 9.62644 7.51687 9.818 7.99908 9.818C8.48129 9.818 8.94376 9.62644 9.28473 9.28546C9.62571 8.94449 9.81726 8.48203 9.81726 7.99982C9.81726 7.5176 9.62571 7.05514 9.28473 6.71417C8.94376 6.37319 8.48129 6.18163 7.99908 6.18163ZM7.99908 4.96951C8.80277 4.96951 9.57354 5.28878 10.1418 5.85707C10.7101 6.42536 11.0294 7.19613 11.0294 7.99982C11.0294 8.8035 10.7101 9.57427 10.1418 10.1426C9.57354 10.7109 8.80277 11.0301 7.99908 11.0301C7.1954 11.0301 6.42463 10.7109 5.85633 10.1426C5.28804 9.57427 4.96878 8.8035 4.96878 7.99982C4.96878 7.19613 5.28804 6.42536 5.85633 5.85707C6.42463 5.28878 7.1954 4.96951 7.99908 4.96951ZM11.9385 4.818C11.9385 5.01892 11.8587 5.21161 11.7166 5.35368C11.5745 5.49576 11.3818 5.57557 11.1809 5.57557C10.98 5.57557 10.7873 5.49576 10.6452 5.35368C10.5031 5.21161 10.4233 5.01892 10.4233 4.818C10.4233 4.61708 10.5031 4.42438 10.6452 4.28231C10.7873 4.14024 10.98 4.06042 11.1809 4.06042C11.3818 4.06042 11.5745 4.14024 11.7166 4.28231C11.8587 4.42438 11.9385 4.61708 11.9385 4.818ZM7.99908 3.15133C6.49969 3.15133 6.25484 3.15557 5.55726 3.18648C5.08211 3.20891 4.76333 3.27254 4.46757 3.38769C4.20454 3.48951 4.01484 3.61133 3.81302 3.81375C3.62333 3.99703 3.47748 4.22077 3.38636 4.4683C3.2712 4.76527 3.20757 5.08345 3.18575 5.558C3.15423 6.22709 3.1506 6.46103 3.1506 7.99982C3.1506 9.49921 3.15484 9.74406 3.18575 10.4416C3.20817 10.9162 3.27181 11.2356 3.38636 11.5307C3.48939 11.7944 3.6106 11.9841 3.81181 12.1853C4.01605 12.3889 4.20575 12.5107 4.46636 12.6113C4.76575 12.7271 5.08454 12.7913 5.55726 12.8131C6.22636 12.8447 6.46029 12.8483 7.99908 12.8483C9.49848 12.8483 9.74332 12.8441 10.4409 12.8131C10.9148 12.7907 11.2342 12.7271 11.53 12.6125C11.7924 12.5101 11.9833 12.3883 12.1845 12.1871C12.3888 11.9828 12.5106 11.7931 12.6112 11.5325C12.7264 11.2338 12.7906 10.9144 12.8124 10.4416C12.8439 9.77254 12.8476 9.5386 12.8476 7.99982C12.8476 6.50042 12.8433 6.25557 12.8124 5.558C12.79 5.08406 12.7264 4.76406 12.6112 4.4683C12.5199 4.22103 12.3743 3.99737 12.1851 3.81375C12.002 3.62396 11.7782 3.4781 11.5306 3.38709C11.2336 3.27194 10.9148 3.2083 10.4409 3.18648C9.77181 3.15497 9.53787 3.15133 7.99908 3.15133ZM7.99908 1.93921C9.64575 1.93921 9.8512 1.94527 10.4973 1.97557C11.1427 2.00588 11.5821 2.10709 11.9688 2.25739C12.3688 2.41133 12.7057 2.61982 13.0427 2.95618C13.3509 3.25915 13.5894 3.62563 13.7415 4.03012C13.8912 4.41618 13.993 4.85618 14.0233 5.50163C14.0518 6.14769 14.0597 6.35315 14.0597 7.99982C14.0597 9.64648 14.0536 9.85194 14.0233 10.498C13.993 11.1435 13.8912 11.5828 13.7415 11.9695C13.5898 12.3742 13.3513 12.7408 13.0427 13.0435C12.7397 13.3515 12.3732 13.59 11.9688 13.7422C11.5827 13.8919 11.1427 13.9938 10.4973 14.0241C9.8512 14.0525 9.64575 14.0604 7.99908 14.0604C6.35242 14.0604 6.14696 14.0544 5.5009 14.0241C4.85545 13.9938 4.41605 13.8919 4.02939 13.7422C3.62473 13.5904 3.25819 13.3519 2.95545 13.0435C2.64721 12.7405 2.40874 12.374 2.25666 11.9695C2.10636 11.5835 2.00514 11.1435 1.97484 10.498C1.94636 9.85194 1.93848 9.64648 1.93848 7.99982C1.93848 6.35315 1.94454 6.14769 1.97484 5.50163C2.00514 4.85557 2.10636 4.41678 2.25666 4.03012C2.40832 3.62538 2.64684 3.2588 2.95545 2.95618C3.25828 2.64783 3.6248 2.40935 4.02939 2.25739C4.41605 2.10709 4.85484 2.00588 5.5009 1.97557C6.14696 1.94709 6.35242 1.93921 7.99908 1.93921Z",fill:"#DF643A"})}),(0,st.jsx)("defs",{children:(0,st.jsx)("clipPath",{id:"clip0_588_31750",children:(0,st.jsx)("rect",{width:"14.5455",height:"14.5455",fill:"white",transform:"translate(0.727539 0.727539)"})})})]})}),(0,st.jsx)("a",{href:"",className:"footer__social",children:(0,st.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,st.jsx)("g",{clipPath:"url(#clip0_588_31755)",children:(0,st.jsx)("path",{d:"M7.99908 1.93921C4.65181 1.93921 1.93848 4.65254 1.93848 7.99981C1.93848 11.0247 4.15484 13.5319 7.05242 13.9871V9.75133H5.51302V7.99981H7.05242V6.66466C7.05242 5.14588 7.95666 4.30709 9.34151 4.30709C10.0045 4.30709 10.6979 4.42527 10.6979 4.42527V5.91618H9.93423C9.1809 5.91618 8.94636 6.38345 8.94636 6.86285V7.99981H10.627L10.3585 9.75133H8.94636V13.9871C11.8433 13.5325 14.0597 11.0241 14.0597 7.99981C14.0597 4.65254 11.3464 1.93921 7.99908 1.93921Z",fill:"#DF643A"})}),(0,st.jsx)("defs",{children:(0,st.jsx)("clipPath",{id:"clip0_588_31755",children:(0,st.jsx)("rect",{width:"14.5455",height:"14.5455",fill:"white",transform:"translate(0.727539 0.727539)"})})})]})})]}),(0,st.jsx)("li",{className:"pp-mob",children:(0,st.jsx)(kt,{children:"\xa9 2023 Polar Pelmeni"})})]})]})]})})})},vj=function(){var e=ot();return(0,st.jsx)("div",{className:"select-city",children:(0,st.jsxs)("div",{className:"select-city__content",children:[(0,st.jsxs)("svg",{width:"65",height:"65",viewBox:"0 0 65 65",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,st.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",fill:"#DF643A",fillOpacity:"0.1"}),(0,st.jsx)("path",{d:"M39.364 37.364L33 43.7279L26.636 37.364C23.1213 33.8492 23.1213 28.1508 26.636 24.636C30.1508 21.1213 35.8492 21.1213 39.364 24.636C42.8787 28.1508 42.8787 33.8492 39.364 37.364ZM33 33C34.1046 33 35 32.1046 35 31C35 29.8954 34.1046 29 33 29C31.8954 29 31 29.8954 31 31C31 32.1046 31.8954 33 33 33Z",fill:"#DF643A"})]}),(0,st.jsx)("h4",{className:"title__h4",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0441\u0432\u043e\u0454 \u043c\u0456\u0441\u0442\u043e"}),(0,st.jsxs)("div",{className:"select-city__buttons",children:[(0,st.jsx)("button",{className:"select-city__btn",onClick:function(){e(Ta({city:"\u041e\u0434\u0435\u0441\u0430"})),e(po({state:!1}))},children:"\u041e\u0434\u0435\u0441\u0430"}),(0,st.jsx)("button",{className:"select-city__btn",onClick:function(){e(Ta({city:"\u0423\u0436\u0433\u043e\u0440\u043e\u0434"})),e(po({state:!1}))},disabled:!0,children:"\u0423\u0436\u0433\u043e\u0440\u043e\u0434"})]})]})})},mj=function(){return(0,st.jsxs)(st.Fragment,{children:[(0,st.jsx)("div",{className:"slider__container",children:(0,st.jsx)(ao,{})}),(0,st.jsx)(ut,{children:(0,st.jsx)(oo,{})})]})},gj=function(){return(0,st.jsx)(ut,{children:(0,st.jsx)(oo,{})})},yj=("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self,function(e,t,n,r,i,a,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}),kj=(0,r.createContext)(null);function bj(e,t,n,r){var i={};return function(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}(e,(function(e,a){var o=n[a];o!==t[a]&&(i[a]=o,e(r,o))})),i}function wj(e,t,n){var r=function(e,t,n){return Object.keys(e).reduce((function(n,r){return t(n,e[r],r)}),n)}(n,(function(n,r,i){return"function"===typeof e[i]&&n.push(google.maps.event.addListener(t,r,e[i])),n}),[]);return r}function xj(e){google.maps.event.removeListener(e)}function _j(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(xj)}function Sj(e){var t=e.updaterMap,n=e.eventMap,r=e.prevProps,i=e.nextProps,a=e.instance,o=wj(i,a,n);return bj(t,r,i,a),o}var Ej={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},Cj={extraMapTypes:function(e,t){t.forEach((function(t,n){e.mapTypes.set(String(n),t)}))},center:function(e,t){e.setCenter(t)},clickableIcons:function(e,t){e.setClickableIcons(t)},heading:function(e,t){e.setHeading(t)},mapTypeId:function(e,t){e.setMapTypeId(t)},options:function(e,t){e.setOptions(t)},streetView:function(e,t){e.setStreetView(t)},tilt:function(e,t){e.setTilt(t)},zoom:function(e,t){e.setZoom(t)}};(0,r.memo)((function(e){var t=e.children,n=e.options,i=e.id,a=e.mapContainerStyle,o=e.mapContainerClassName,s=e.center,u=e.onClick,c=e.onDblClick,f=e.onDrag,h=e.onDragEnd,d=e.onDragStart,p=e.onMouseMove,v=e.onMouseOut,m=e.onMouseOver,g=e.onMouseDown,y=e.onMouseUp,k=e.onRightClick,b=e.onCenterChanged,w=e.onLoad,x=e.onUnmount,_=l((0,r.useState)(null),2),S=_[0],E=_[1],C=(0,r.useRef)(null),I=l((0,r.useState)(null),2),T=I[0],L=I[1],N=l((0,r.useState)(null),2),P=N[0],O=N[1],A=l((0,r.useState)(null),2),j=A[0],D=A[1],M=l((0,r.useState)(null),2),R=M[0],F=M[1],U=l((0,r.useState)(null),2),V=U[0],B=U[1],z=l((0,r.useState)(null),2),q=z[0],W=z[1],H=l((0,r.useState)(null),2),G=H[0],K=H[1],Q=l((0,r.useState)(null),2),J=Q[0],Z=Q[1],Y=l((0,r.useState)(null),2),$=Y[0],X=Y[1],ee=l((0,r.useState)(null),2),te=ee[0],ne=ee[1],re=l((0,r.useState)(null),2),ie=re[0],ae=re[1],oe=l((0,r.useState)(null),2),se=oe[0],ue=oe[1];return(0,r.useEffect)((function(){n&&null!==S&&S.setOptions(n)}),[S,n]),(0,r.useEffect)((function(){null!==S&&"undefined"!==typeof s&&S.setCenter(s)}),[S,s]),(0,r.useEffect)((function(){S&&c&&(null!==P&&google.maps.event.removeListener(P),O(google.maps.event.addListener(S,"dblclick",c)))}),[c]),(0,r.useEffect)((function(){S&&h&&(null!==j&&google.maps.event.removeListener(j),D(google.maps.event.addListener(S,"dragend",h)))}),[h]),(0,r.useEffect)((function(){S&&d&&(null!==R&&google.maps.event.removeListener(R),F(google.maps.event.addListener(S,"dragstart",d)))}),[d]),(0,r.useEffect)((function(){S&&g&&(null!==V&&google.maps.event.removeListener(V),B(google.maps.event.addListener(S,"mousedown",g)))}),[g]),(0,r.useEffect)((function(){S&&p&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(S,"mousemove",p)))}),[p]),(0,r.useEffect)((function(){S&&v&&(null!==G&&google.maps.event.removeListener(G),K(google.maps.event.addListener(S,"mouseout",v)))}),[v]),(0,r.useEffect)((function(){S&&m&&(null!==J&&google.maps.event.removeListener(J),Z(google.maps.event.addListener(S,"mouseover",m)))}),[m]),(0,r.useEffect)((function(){S&&y&&(null!==$&&google.maps.event.removeListener($),X(google.maps.event.addListener(S,"mouseup",y)))}),[y]),(0,r.useEffect)((function(){S&&k&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(S,"rightclick",k)))}),[k]),(0,r.useEffect)((function(){S&&u&&(null!==ie&&google.maps.event.removeListener(ie),ae(google.maps.event.addListener(S,"click",u)))}),[u]),(0,r.useEffect)((function(){S&&f&&(null!==se&&google.maps.event.removeListener(se),ue(google.maps.event.addListener(S,"drag",f)))}),[f]),(0,r.useEffect)((function(){S&&b&&(null!==T&&google.maps.event.removeListener(T),L(google.maps.event.addListener(S,"center_changed",b)))}),[u]),(0,r.useEffect)((function(){var e=null===C.current?null:new google.maps.Map(C.current,n);return E(e),null!==e&&w&&w(e),function(){null!==e&&x&&x(e)}}),[]),(0,st.jsx)("div",Object.assign({id:i,ref:C,style:a,className:o},{children:(0,st.jsx)(kj.Provider,Object.assign({value:S},{children:null!==S?t:(0,st.jsx)(st.Fragment,{})}))}))}));var Ij=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).state={map:null},e.registeredEvents=[],e.mapRef=null,e.getInstance=function(){return null===e.mapRef?null:new google.maps.Map(e.mapRef,e.props.options)},e.panTo=function(t){var n=e.getInstance();n&&n.panTo(t)},e.setMapCallback=function(){null!==e.state.map&&e.props.onLoad&&e.props.onLoad(e.state.map)},e.getRef=function(t){e.mapRef=t},e}return g(n,[{key:"componentDidMount",value:function(){var e=this.getInstance();this.registeredEvents=Sj({updaterMap:Cj,eventMap:Ej,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{map:e}}),this.setMapCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.map&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:Cj,eventMap:Ej,prevProps:e,nextProps:this.props,instance:this.state.map}))}},{key:"componentWillUnmount",value:function(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),_j(this.registeredEvents))}},{key:"render",value:function(){return(0,st.jsx)("div",Object.assign({id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName},{children:(0,st.jsx)(kj.Provider,Object.assign({value:this.state.map},{children:null!==this.state.map?this.props.children:(0,st.jsx)(st.Fragment,{})}))}))}}]),n}(r.PureComponent);function Tj(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Lj(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}var Nj="undefined"!==typeof document;function Pj(e){var t=e.url,n=e.id,r=e.nonce;return Nj?new Promise((function(e,i){var a=document.getElementById(n),o=window;if(a){var s=a.getAttribute("data-state");if(a.src===t&&"error"!==s){if("ready"===s)return e(n);var u=o.initMap,c=a.onerror;return o.initMap=function(){u&&u(),e(n)},void(a.onerror=function(e){c&&c(e),i(e)})}a.remove()}var l=document.createElement("script");l.type="text/javascript",l.src=t,l.id=n,l.async=!0,l.nonce=r,l.onerror=function(e){l.setAttribute("data-state","error"),i(e)},o.initMap=function(){l.setAttribute("data-state","ready"),e(n)},document.head.appendChild(l)})).catch((function(e){throw console.error("injectScript error: ",e),e})):Promise.reject(new Error("document is undefined"))}function Oj(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function Aj(){var e=document.getElementsByTagName("head")[0],t=e.insertBefore.bind(e);e.insertBefore=function(n,r){Oj(n)||Reflect.apply(t,e,[n,r])};var n=e.appendChild.bind(e);e.appendChild=function(t){Oj(t)||Reflect.apply(n,e,[t])}}function jj(e){var t=e.googleMapsApiKey,n=e.googleMapsClientId,r=e.version,i=void 0===r?"weekly":r,a=e.language,o=e.region,s=e.libraries,u=e.channel,c=e.mapIds,l=e.authReferrerPolicy,f=[];return yj(t&&n||!(t&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?f.push("key=".concat(t)):n&&f.push("client=".concat(n)),i&&f.push("v=".concat(i)),a&&f.push("language=".concat(a)),o&&f.push("region=".concat(o)),s&&s.length&&f.push("libraries=".concat(s.sort().join(","))),u&&f.push("channel=".concat(u)),c&&c.length&&f.push("map_ids=".concat(c.join(","))),l&&f.push("auth_referrer_policy=".concat(l)),f.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(f.join("&"))}var Dj=!1;function Mj(){return(0,st.jsx)("div",{children:"Loading..."})}var Rj,Fj={id:"script-loader",version:"weekly"},Uj=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).check=(0,r.createRef)(),e.state={loaded:!1},e.cleanupCallback=function(){delete window.google.maps,e.injectScript()},e.isCleaningUp=function(){return Lj(x(e),void 0,void 0,Et().mark((function e(){var t;return Et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){if(Dj){if(Nj)var t=window.setInterval((function(){Dj||(window.clearInterval(t),e())}),1)}else e()},e.abrupt("return",new Promise(t));case 2:case"end":return e.stop()}}),e)})))},e.cleanup=function(){Dj=!0;var t=document.getElementById(e.props.id);t&&t.parentNode&&t.parentNode.removeChild(t),Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(e){return"string"===typeof e.src&&e.src.includes("maps.googleapis")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("link")).filter((function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("style")).filter((function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},e.injectScript=function(){e.props.preventGoogleFontsLoading&&Aj(),yj(!!e.props.id,'LoadScript requires "id" prop to be a string: %s',e.props.id),Pj({id:e.props.id,nonce:e.props.nonce,url:jj(e.props)}).then((function(){e.props.onLoad&&e.props.onLoad(),e.setState((function(){return{loaded:!0}}))})).catch((function(t){e.props.onError&&e.props.onError(t),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(e.props.googleMapsApiKey||"-",") or Client ID (").concat(e.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))}))},e}return g(n,[{key:"componentDidMount",value:function(){if(Nj){if(window.google&&window.google.maps&&!Dj)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch((function(e){console.error("Error at injecting script after cleaning up: ",e)}))}}},{key:"componentDidUpdate",value:function(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Nj&&e.language!==this.props.language&&(this.cleanup(),this.setState((function(){return{loaded:!1}}),this.cleanupCallback))}},{key:"componentWillUnmount",value:function(){var e=this;if(Nj){this.cleanup();window.setTimeout((function(){e.check.current||(delete window.google,Dj=!1)}),1),this.props.onUnmount&&this.props.onUnmount()}}},{key:"render",value:function(){return(0,st.jsxs)(st.Fragment,{children:[(0,st.jsx)("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||(0,st.jsx)(Mj,{})]})}}]),n}(r.PureComponent);Uj.defaultProps=Fj;var Vj=(0,st.jsx)(Mj,{});var Bj;(0,r.memo)((function(e){var t=e.loadingElement,n=e.onLoad,i=e.onError,a=e.onUnmount,o=e.children,s=function(e){var t=e.id,n=void 0===t?Fj.id:t,i=e.version,a=void 0===i?Fj.version:i,o=e.nonce,s=e.googleMapsApiKey,u=e.googleMapsClientId,c=e.language,f=e.region,h=e.libraries,d=e.preventGoogleFontsLoading,p=e.channel,v=e.mapIds,m=e.authReferrerPolicy,g=(0,r.useRef)(!1),y=l((0,r.useState)(!1),2),k=y[0],b=y[1],w=l((0,r.useState)(void 0),2),x=w[0],_=w[1];(0,r.useEffect)((function(){return g.current=!0,function(){g.current=!1}}),[]),(0,r.useEffect)((function(){Nj&&d&&Aj()}),[d]),(0,r.useEffect)((function(){k&&yj(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")}),[k]);var S=jj({version:a,googleMapsApiKey:s,googleMapsClientId:u,language:c,region:f,libraries:h,channel:p,mapIds:v,authReferrerPolicy:m});(0,r.useEffect)((function(){function e(){g.current&&(b(!0),Rj=S)}Nj&&(window.google&&window.google.maps&&Rj===S?e():Pj({id:n,url:S,nonce:o}).then(e).catch((function(e){g.current&&_(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(s||"-",") or Client ID (").concat(u||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)})))}),[n,S,o]);var E=(0,r.useRef)();return(0,r.useEffect)((function(){E.current&&h!==E.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),E.current=h}),[h]),{isLoaded:k,loadError:x,url:S}}(Tj(e,["loadingElement","onLoad","onError","onUnmount","children"])),u=s.isLoaded,c=s.loadError;return(0,r.useEffect)((function(){u&&"function"===typeof n&&n()}),[u,n]),(0,r.useEffect)((function(){c&&"function"===typeof i&&i(c)}),[c,i]),(0,r.useEffect)((function(){return function(){a&&a()}}),[a]),u?o:t||Vj}));!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(Bj||(Bj={}));var zj={},qj={options:function(e,t){e.setOptions(t)}};(0,r.memo)((function(e){var t=e.options,n=e.onLoad,i=e.onUnmount,a=(0,r.useContext)(kj),o=l((0,r.useState)(null),2),s=o[0],u=o[1];return(0,r.useEffect)((function(){null!==s&&s.setMap(a)}),[a]),(0,r.useEffect)((function(){t&&null!==s&&s.setOptions(t)}),[s,t]),(0,r.useEffect)((function(){var e=new google.maps.TrafficLayer(Object.assign(Object.assign({},t||{}),{map:a}));return u(e),n&&n(e),function(){null!==s&&(i&&i(s),s.setMap(null))}}),[]),null}));var Wj=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).state={trafficLayer:null},e.setTrafficLayerCallback=function(){null!==e.state.trafficLayer&&e.props.onLoad&&e.props.onLoad(e.state.trafficLayer)},e.registeredEvents=[],e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.TrafficLayer(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=Sj({updaterMap:qj,eventMap:zj,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{trafficLayer:e}}),this.setTrafficLayerCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.trafficLayer&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:qj,eventMap:zj,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),_j(this.registeredEvents),this.state.trafficLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);Wj.contextType=kj;(0,r.memo)((function(e){var t=e.onLoad,n=e.onUnmount,i=(0,r.useContext)(kj),a=l((0,r.useState)(null),2),o=a[0],s=a[1];return(0,r.useEffect)((function(){null!==o&&o.setMap(i)}),[i]),(0,r.useEffect)((function(){var e=new google.maps.BicyclingLayer;return s(e),e.setMap(i),t&&t(e),function(){null!==e&&(n&&n(e),e.setMap(null))}}),[]),null}));var Hj=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).state={bicyclingLayer:null},e.setBicyclingLayerCallback=function(){null!==e.state.bicyclingLayer&&(e.state.bicyclingLayer.setMap(e.context),e.props.onLoad&&e.props.onLoad(e.state.bicyclingLayer))},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.BicyclingLayer;this.setState((function(){return{bicyclingLayer:e}}),this.setBicyclingLayerCallback)}},{key:"componentWillUnmount",value:function(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);Hj.contextType=kj;(0,r.memo)((function(e){var t=this,n=e.onLoad,i=e.onUnmount,a=(0,r.useContext)(kj),o=l((0,r.useState)(null),2),s=o[0],u=o[1];return(0,r.useEffect)((function(){null!==s&&s.setMap(a)}),[a]),(0,r.useEffect)((function(){var e=new google.maps.TransitLayer;return u(e),e.setMap(a),n&&n(e),function(){null!==s&&(i&&i(s),t.state.transitLayer.setMap(null))}}),[]),null}));var Gj=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).state={transitLayer:null},e.setTransitLayerCallback=function(){null!==e.state.transitLayer&&(e.state.transitLayer.setMap(e.context),e.props.onLoad&&e.props.onLoad(e.state.transitLayer))},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.TransitLayer;this.setState((function(){return{transitLayer:e}}),this.setTransitLayerCallback)}},{key:"componentWillUnmount",value:function(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);Gj.contextType=kj;var Kj={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},Qj={drawingMode:function(e,t){e.setDrawingMode(t)},options:function(e,t){e.setOptions(t)}};(0,r.memo)((function(e){var t=e.options,n=e.drawingMode,i=e.onCircleComplete,a=e.onMarkerComplete,o=e.onOverlayComplete,s=e.onPolygonComplete,u=e.onPolylineComplete,c=e.onRectangleComplete,f=e.onLoad,h=e.onUnmount,d=(0,r.useContext)(kj),p=l((0,r.useState)(null),2),v=p[0],m=p[1],g=l((0,r.useState)(null),2),y=g[0],k=g[1],b=l((0,r.useState)(null),2),w=b[0],x=b[1],_=l((0,r.useState)(null),2),S=_[0],E=_[1],C=l((0,r.useState)(null),2),I=C[0],T=C[1],L=l((0,r.useState)(null),2),N=L[0],P=L[1],O=l((0,r.useState)(null),2),A=O[0],j=O[1];return(0,r.useEffect)((function(){null!==v&&v.setMap(d)}),[d]),(0,r.useEffect)((function(){t&&null!==v&&v.setOptions(t)}),[v,t]),(0,r.useEffect)((function(){n&&null!==v&&v.setDrawingMode(n)}),[v,n]),(0,r.useEffect)((function(){v&&i&&(null!==y&&google.maps.event.removeListener(y),k(google.maps.event.addListener(v,"circlecomplete",i)))}),[v,i]),(0,r.useEffect)((function(){v&&a&&(null!==w&&google.maps.event.removeListener(w),x(google.maps.event.addListener(v,"markercomplete",a)))}),[v,a]),(0,r.useEffect)((function(){v&&o&&(null!==S&&google.maps.event.removeListener(S),E(google.maps.event.addListener(v,"overlaycomplete",o)))}),[v,o]),(0,r.useEffect)((function(){v&&s&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(v,"polygoncomplete",s)))}),[v,s]),(0,r.useEffect)((function(){v&&u&&(null!==N&&google.maps.event.removeListener(N),P(google.maps.event.addListener(v,"polylinecomplete",u)))}),[v,u]),(0,r.useEffect)((function(){v&&c&&(null!==A&&google.maps.event.removeListener(A),j(google.maps.event.addListener(v,"rectanglecomplete",c)))}),[v,c]),(0,r.useEffect)((function(){yj(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(Object.assign(Object.assign({},t||{}),{map:d}));return n&&e.setDrawingMode(n),i&&k(google.maps.event.addListener(e,"circlecomplete",i)),a&&x(google.maps.event.addListener(e,"markercomplete",a)),o&&E(google.maps.event.addListener(e,"overlaycomplete",o)),s&&T(google.maps.event.addListener(e,"polygoncomplete",s)),u&&P(google.maps.event.addListener(e,"polylinecomplete",u)),c&&j(google.maps.event.addListener(e,"rectanglecomplete",c)),m(e),f&&f(e),function(){null!==v&&(y&&google.maps.event.removeListener(y),w&&google.maps.event.removeListener(w),S&&google.maps.event.removeListener(S),I&&google.maps.event.removeListener(I),N&&google.maps.event.removeListener(N),A&&google.maps.event.removeListener(A),h&&h(v),v.setMap(null))}}),[]),null}));(function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).registeredEvents=[],r.state={drawingManager:null},r.setDrawingManagerCallback=function(){null!==r.state.drawingManager&&r.props.onLoad&&r.props.onLoad(r.state.drawingManager)},yj(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing),r}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.drawing.DrawingManager(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=Sj({updaterMap:Qj,eventMap:Kj,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{drawingManager:e}}),this.setDrawingManagerCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.drawingManager&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:Qj,eventMap:Kj,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}},{key:"componentWillUnmount",value:function(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),_j(this.registeredEvents),this.state.drawingManager.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent)).contextType=kj;var Jj={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Zj={animation:function(e,t){e.setAnimation(t)},clickable:function(e,t){e.setClickable(t)},cursor:function(e,t){e.setCursor(t)},draggable:function(e,t){e.setDraggable(t)},icon:function(e,t){e.setIcon(t)},label:function(e,t){e.setLabel(t)},map:function(e,t){e.setMap(t)},opacity:function(e,t){e.setOpacity(t)},options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},shape:function(e,t){e.setShape(t)},title:function(e,t){e.setTitle(t)},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},Yj={};var $j=(0,r.memo)((function(e){var t=e.position,n=e.options,i=e.clusterer,a=e.noClustererRedraw,o=e.children,s=e.draggable,u=e.visible,c=e.animation,f=e.clickable,h=e.cursor,d=e.icon,p=e.label,v=e.opacity,m=e.shape,g=e.title,y=e.zIndex,k=e.onClick,b=e.onDblClick,w=e.onDrag,x=e.onDragEnd,_=e.onDragStart,S=e.onMouseOut,E=e.onMouseOver,C=e.onMouseUp,I=e.onMouseDown,T=e.onRightClick,L=e.onClickableChanged,N=e.onCursorChanged,P=e.onAnimationChanged,O=e.onDraggableChanged,A=e.onFlatChanged,j=e.onIconChanged,D=e.onPositionChanged,M=e.onShapeChanged,R=e.onTitleChanged,F=e.onVisibleChanged,U=e.onZindexChanged,V=e.onLoad,B=e.onUnmount,z=(0,r.useContext)(kj),q=l((0,r.useState)(null),2),W=q[0],H=q[1],G=l((0,r.useState)(null),2),K=G[0],Q=G[1],J=l((0,r.useState)(null),2),Z=J[0],Y=J[1],$=l((0,r.useState)(null),2),X=$[0],ee=$[1],te=l((0,r.useState)(null),2),ne=te[0],re=te[1],ie=l((0,r.useState)(null),2),ae=ie[0],oe=ie[1],se=l((0,r.useState)(null),2),ue=se[0],ce=se[1],le=l((0,r.useState)(null),2),fe=le[0],he=le[1],de=l((0,r.useState)(null),2),pe=de[0],ve=de[1],me=l((0,r.useState)(null),2),ge=me[0],ye=me[1],ke=l((0,r.useState)(null),2),be=ke[0],we=ke[1],xe=l((0,r.useState)(null),2),_e=xe[0],Se=xe[1],Ee=l((0,r.useState)(null),2),Ce=Ee[0],Ie=Ee[1],Te=l((0,r.useState)(null),2),Le=Te[0],Ne=Te[1],Pe=l((0,r.useState)(null),2),Oe=Pe[0],Ae=Pe[1],je=l((0,r.useState)(null),2),De=je[0],Me=je[1],Re=l((0,r.useState)(null),2),Fe=Re[0],Ue=Re[1],Ve=l((0,r.useState)(null),2),Be=Ve[0],ze=Ve[1],qe=l((0,r.useState)(null),2),We=qe[0],He=qe[1],Ge=l((0,r.useState)(null),2),Ke=Ge[0],Qe=Ge[1],Je=l((0,r.useState)(null),2),Ze=Je[0],Ye=Je[1],$e=l((0,r.useState)(null),2),Xe=$e[0],et=$e[1];(0,r.useEffect)((function(){null!==W&&W.setMap(z)}),[z]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==W&&W.setOptions(n)}),[W,n]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==W&&W.setDraggable(s)}),[W,s]),(0,r.useEffect)((function(){t&&null!==W&&W.setPosition(t)}),[W,t]),(0,r.useEffect)((function(){"undefined"!==typeof u&&null!==W&&W.setVisible(u)}),[W,u]),(0,r.useEffect)((function(){c&&null!==W&&W.setAnimation(c)}),[W,c]),(0,r.useEffect)((function(){W&&b&&(null!==K&&google.maps.event.removeListener(K),Q(google.maps.event.addListener(W,"dblclick",b)))}),[b]),(0,r.useEffect)((function(){W&&x&&(null!==Z&&google.maps.event.removeListener(Z),Y(google.maps.event.addListener(W,"dragend",x)))}),[x]),(0,r.useEffect)((function(){W&&_&&(null!==X&&google.maps.event.removeListener(X),ee(google.maps.event.addListener(W,"dragstart",_)))}),[_]),(0,r.useEffect)((function(){W&&I&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(W,"mousedown",I)))}),[I]),(0,r.useEffect)((function(){W&&S&&(null!==ae&&google.maps.event.removeListener(ae),oe(google.maps.event.addListener(W,"mouseout",S)))}),[S]),(0,r.useEffect)((function(){W&&E&&(null!==ue&&google.maps.event.removeListener(ue),ce(google.maps.event.addListener(W,"mouseover",E)))}),[E]),(0,r.useEffect)((function(){W&&C&&(null!==fe&&google.maps.event.removeListener(fe),he(google.maps.event.addListener(W,"mouseup",C)))}),[C]),(0,r.useEffect)((function(){W&&T&&(null!==pe&&google.maps.event.removeListener(pe),ve(google.maps.event.addListener(W,"rightclick",T)))}),[T]),(0,r.useEffect)((function(){W&&k&&(null!==ge&&google.maps.event.removeListener(ge),ye(google.maps.event.addListener(W,"click",k)))}),[k]),(0,r.useEffect)((function(){W&&w&&(null!==be&&google.maps.event.removeListener(be),we(google.maps.event.addListener(W,"drag",w)))}),[w]),(0,r.useEffect)((function(){W&&L&&(null!==_e&&google.maps.event.removeListener(_e),Se(google.maps.event.addListener(W,"clickable_changed",L)))}),[L]),(0,r.useEffect)((function(){W&&N&&(null!==Ce&&google.maps.event.removeListener(Ce),Ie(google.maps.event.addListener(W,"cursor_changed",N)))}),[N]),(0,r.useEffect)((function(){W&&P&&(null!==Le&&google.maps.event.removeListener(Le),Ne(google.maps.event.addListener(W,"animation_changed",P)))}),[P]),(0,r.useEffect)((function(){W&&O&&(null!==Oe&&google.maps.event.removeListener(Oe),Ae(google.maps.event.addListener(W,"draggable_changed",O)))}),[O]),(0,r.useEffect)((function(){W&&A&&(null!==De&&google.maps.event.removeListener(De),Me(google.maps.event.addListener(W,"flat_changed",A)))}),[A]),(0,r.useEffect)((function(){W&&j&&(null!==Fe&&google.maps.event.removeListener(Fe),Ue(google.maps.event.addListener(W,"icon_changed",j)))}),[j]),(0,r.useEffect)((function(){W&&D&&(null!==Be&&google.maps.event.removeListener(Be),ze(google.maps.event.addListener(W,"position_changed",D)))}),[D]),(0,r.useEffect)((function(){W&&M&&(null!==We&&google.maps.event.removeListener(We),He(google.maps.event.addListener(W,"shape_changed",M)))}),[M]),(0,r.useEffect)((function(){W&&R&&(null!==Ke&&google.maps.event.removeListener(Ke),Qe(google.maps.event.addListener(W,"title_changed",R)))}),[R]),(0,r.useEffect)((function(){W&&F&&(null!==Ze&&google.maps.event.removeListener(Ze),Ye(google.maps.event.addListener(W,"visible_changed",F)))}),[F]),(0,r.useEffect)((function(){W&&U&&(null!==Xe&&google.maps.event.removeListener(Xe),et(google.maps.event.addListener(W,"zindex_changed",U)))}),[U]),(0,r.useEffect)((function(){var e=Object.assign(Object.assign(Object.assign({},n||Yj),i?Yj:{map:z}),{position:t}),r=new google.maps.Marker(e);return i?i.addMarker(r,!!a):r.setMap(z),t&&r.setPosition(t),"undefined"!==typeof u&&r.setVisible(u),"undefined"!==typeof s&&r.setDraggable(s),"undefined"!==typeof f&&r.setClickable(f),"string"===typeof h&&r.setCursor(h),d&&r.setIcon(d),"undefined"!==typeof p&&r.setLabel(p),"undefined"!==typeof v&&r.setOpacity(v),m&&r.setShape(m),"string"===typeof g&&r.setTitle(g),"number"===typeof y&&r.setZIndex(y),b&&Q(google.maps.event.addListener(r,"dblclick",b)),x&&Y(google.maps.event.addListener(r,"dragend",x)),_&&ee(google.maps.event.addListener(r,"dragstart",_)),I&&re(google.maps.event.addListener(r,"mousedown",I)),S&&oe(google.maps.event.addListener(r,"mouseout",S)),E&&ce(google.maps.event.addListener(r,"mouseover",E)),C&&he(google.maps.event.addListener(r,"mouseup",C)),T&&ve(google.maps.event.addListener(r,"rightclick",T)),k&&ye(google.maps.event.addListener(r,"click",k)),w&&we(google.maps.event.addListener(r,"drag",w)),L&&Se(google.maps.event.addListener(r,"clickable_changed",L)),N&&Ie(google.maps.event.addListener(r,"cursor_changed",N)),P&&Ne(google.maps.event.addListener(r,"animation_changed",P)),O&&Ae(google.maps.event.addListener(r,"draggable_changed",O)),A&&Me(google.maps.event.addListener(r,"flat_changed",A)),j&&Ue(google.maps.event.addListener(r,"icon_changed",j)),D&&ze(google.maps.event.addListener(r,"position_changed",D)),M&&He(google.maps.event.addListener(r,"shape_changed",M)),R&&Qe(google.maps.event.addListener(r,"title_changed",R)),F&&Ye(google.maps.event.addListener(r,"visible_changed",F)),U&&et(google.maps.event.addListener(r,"zindex_changed",U)),H(r),V&&V(r),function(){null!==K&&google.maps.event.removeListener(K),null!==Z&&google.maps.event.removeListener(Z),null!==X&&google.maps.event.removeListener(X),null!==ne&&google.maps.event.removeListener(ne),null!==ae&&google.maps.event.removeListener(ae),null!==ue&&google.maps.event.removeListener(ue),null!==fe&&google.maps.event.removeListener(fe),null!==pe&&google.maps.event.removeListener(pe),null!==ge&&google.maps.event.removeListener(ge),null!==_e&&google.maps.event.removeListener(_e),null!==Ce&&google.maps.event.removeListener(Ce),null!==Le&&google.maps.event.removeListener(Le),null!==Oe&&google.maps.event.removeListener(Oe),null!==De&&google.maps.event.removeListener(De),null!==Fe&&google.maps.event.removeListener(Fe),null!==Be&&google.maps.event.removeListener(Be),null!==Ke&&google.maps.event.removeListener(Ke),null!==Ze&&google.maps.event.removeListener(Ze),null!==Xe&&google.maps.event.removeListener(Xe),B&&B(r),i?i.removeMarker(r,!!a):r&&r.setMap(null)}}),[]);var tt=(0,r.useMemo)((function(){return o?r.Children.map(o,(function(e){if(!(0,r.isValidElement)(e))return e;var t=e;return(0,r.cloneElement)(t,{anchor:W})})):null}),[o,W]);return(0,st.jsx)(st.Fragment,{children:tt})||null})),Xj=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e}return g(n,[{key:"componentDidMount",value:function(){var e=Object.assign(Object.assign(Object.assign({},this.props.options||Yj),this.props.clusterer?Yj:{map:this.context}),{position:this.props.position});this.marker=new google.maps.Marker(e),this.props.clusterer?this.props.clusterer.addMarker(this.marker,!!this.props.noClustererRedraw):this.marker.setMap(this.context),this.registeredEvents=Sj({updaterMap:Zj,eventMap:Jj,prevProps:{},nextProps:this.props,instance:this.marker}),this.props.onLoad&&this.props.onLoad(this.marker)}},{key:"componentDidUpdate",value:function(e){this.marker&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:Zj,eventMap:Jj,prevProps:e,nextProps:this.props,instance:this.marker}))}},{key:"componentWillUnmount",value:function(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),_j(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}},{key:"render",value:function(){var e=this,t=null;return this.props.children&&(t=r.Children.map(this.props.children,(function(t){if(!(0,r.isValidElement)(t))return t;var n=t;return(0,r.cloneElement)(n,{anchor:e.marker})}))),t||null}}]),n}(r.PureComponent);Xj.contextType=kj;var eD=function(){function e(t,n){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var n=t.getMaxZoom(),r=this.cluster.getBounds(),i=t.getMap();null!==i&&"fitBounds"in i&&i.fitBounds(r),this.timeOut=window.setTimeout((function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(r);var i=e.getZoom()||0;null!==n&&i>n&&e.setZoom(n+1)}}),100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,n,r;if(this.div&&this.center){var i=null===this.sums||"undefined"===typeof this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,a=this.backgroundPosition.split(" "),o=parseInt(a[0].replace(/^\s+|\s+$/g,""),10),s=parseInt(a[1].replace(/^\s+|\s+$/g,""),10),u=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==u?"".concat(u.y,"px"):"0","; left: ").concat(null!==u?"".concat(u.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var c=document.createElement("img");c.alt=i,c.src=this.url,c.width=this.width,c.height=this.height,c.setAttribute("style","position: absolute; top: ".concat(s,"px; left: ").concat(o,"px")),this.cluster.getClusterer().enableRetinaIcons||(c.style.clip="rect(-".concat(s,"px, -").concat(o+this.width,"px, -").concat(s+this.height,", -").concat(o,")"));var l=document.createElement("div");l.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(e=this.sums)||void 0===e?void 0:e.text)&&(l.innerText="".concat(null===(t=this.sums)||void 0===t?void 0:t.text)),(null===(n=this.sums)||void 0===n?void 0:n.html)&&(l.innerHTML="".concat(null===(r=this.sums)||void 0===r?void 0:r.html)),this.div.innerHTML="",this.div.appendChild(c),this.div.appendChild(l),this.div.title=i,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),n=t[Math.min(t.length-1,Math.max(0,e.index-1))];this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0"},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),tD=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new eD(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=this.getMarkers(),n=0;n<t.length;n++){var r=t[n].getPosition();r&&e.extend(r)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(n=e.getPosition())){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+n.lat())/r,(this.center.lng()*(r-1)+n.lng())/r),this.calculateBounds()}}else(n=e.getPosition())&&(this.center=n,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var i=this.markers.length,a=this.markerClusterer.getMaxZoom(),o=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==a&&"undefined"!==typeof o&&o>a)e.getMap()!==this.map&&e.setMap(this.map);else if(i<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(i===this.minClusterSize)for(var s=0;s<i;s++)this.markers[s].setMap(null);else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,n=this.markerClusterer.getMaxZoom(),r=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==n&&"undefined"!==typeof r&&r>n||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function nD(e,t){var n=e.length,r=n.toString().length,i=Math.min(r,t);return{text:n.toString(),index:i,title:""}}var rD=[53,56,66,78,90],iD=function(){function e(t,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.extend=this.extend.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||rD,this.calculator=r.calculator||nD,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0;e<this.markers.length;e++)this.markers[e].getMap()!==this.activeMap&&this.markers[e].setMap(this.activeMap);for(e=0;e<this.clusters.length;e++)this.clusters[e].remove();this.clusters=[];for(e=0;e<this.listeners.length;e++)google.maps.event.removeListener(this.listeners[e]);this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e],width:this.imageSizes[e]})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,n=0;n<e.length;n++){var r=e[n].getPosition();r&&t.extend(r)}var i=this.getMap();null!==i&&"fitBounds"in i&&i.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.pushMarkerTo(e[n]);t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",(function(){t.ready&&(e.isAdded=!1,t.repaint())})),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){t=n;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n&&this.repaint(),n},e.prototype.removeMarkers=function(e,t){for(var n=!1,r=0;r<e.length;r++)n=n||this.removeMarker_(e[r]);return!t&&n&&this.repaint(),n},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout((function(){for(var t=0;t<e.length;t++)e[t].remove()}),0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==n&&(n.x+=this.gridSize,n.y-=this.gridSize);var r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==r&&(r.x-=this.gridSize,r.y+=this.gridSize),null!==n){var i=t.fromDivPixelToLatLng(n);null!==i&&e.extend(i)}if(null!==r){var a=t.fromDivPixelToLatLng(r);null!==a&&e.extend(a)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0;t<this.clusters.length;t++)this.clusters[t].remove();this.clusters=[];for(t=0;t<this.markers.length;t++){var n=this.markers[t];n.isAdded=!1,e&&n.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var n=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},e.prototype.isMarkerInBounds=function(e,t){var n=e.getPosition();return!!n&&t.contains(n)},e.prototype.addToClosestCluster=function(e){for(var t,n=4e4,r=null,i=0;i<this.clusters.length;i++){var a=(t=this.clusters[i]).getCenter(),o=e.getPosition();if(a&&o){var s=this.distanceBetweenPoints(a,o);s<n&&(n=s,r=t)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((t=new tD(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),r=(null!==n&&"getBounds"in n?n.getBounds():null),i=((null===n||void 0===n?void 0:n.getZoom())||0)>3?new google.maps.LatLngBounds(null===r||void 0===r?void 0:r.getSouthWest(),null===r||void 0===r?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),a=this.getExtendedBounds(i),o=Math.min(e+this.batchSize,this.markers.length),s=e;s<o;s++){var u=this.markers[s];!u.isAdded&&this.isMarkerInBounds(u,a)&&(!this.ignoreHidden||this.ignoreHidden&&u.getVisible())&&this.addToClosestCluster(u)}if(o<this.markers.length)this.timerRefStatic=window.setTimeout((function(){t.createClusters(o)}),0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(s=0;s<this.clusters.length;s++)this.clusters[s].updateIcon()}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},e}(),aD={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},oD={averageCenter:function(e,t){e.setAverageCenter(t)},batchSizeIE:function(e,t){e.setBatchSizeIE(t)},calculator:function(e,t){e.setCalculator(t)},clusterClass:function(e,t){e.setClusterClass(t)},enableRetinaIcons:function(e,t){e.setEnableRetinaIcons(t)},gridSize:function(e,t){e.setGridSize(t)},ignoreHidden:function(e,t){e.setIgnoreHidden(t)},imageExtension:function(e,t){e.setImageExtension(t)},imagePath:function(e,t){e.setImagePath(t)},imageSizes:function(e,t){e.setImageSizes(t)},maxZoom:function(e,t){e.setMaxZoom(t)},minimumClusterSize:function(e,t){e.setMinimumClusterSize(t)},styles:function(e,t){e.setStyles(t)},title:function(e,t){e.setTitle(t)},zoomOnClick:function(e,t){e.setZoomOnClick(t)}},sD={};(0,r.memo)((function(e){var t=e.children,n=e.options,i=e.averageCenter,a=e.batchSizeIE,o=e.calculator,s=e.clusterClass,u=e.enableRetinaIcons,c=e.gridSize,f=e.ignoreHidden,h=e.imageExtension,d=e.imagePath,p=e.imageSizes,v=e.maxZoom,m=e.minimumClusterSize,g=e.styles,y=e.title,k=e.zoomOnClick,b=e.onClick,w=e.onClusteringBegin,x=e.onClusteringEnd,_=e.onMouseOver,S=e.onMouseOut,E=e.onLoad,C=e.onUnmount,I=l((0,r.useState)(null),2),T=I[0],L=I[1],N=(0,r.useContext)(kj),P=l((0,r.useState)(null),2),O=P[0],A=P[1],j=l((0,r.useState)(null),2),D=j[0],M=j[1],R=l((0,r.useState)(null),2),F=R[0],U=R[1],V=l((0,r.useState)(null),2),B=V[0],z=V[1],q=l((0,r.useState)(null),2),W=q[0],H=q[1];return(0,r.useEffect)((function(){T&&S&&(null!==B&&google.maps.event.removeListener(B),z(google.maps.event.addListener(T,aD.onMouseOut,S)))}),[S]),(0,r.useEffect)((function(){T&&_&&(null!==W&&google.maps.event.removeListener(W),H(google.maps.event.addListener(T,aD.onMouseOver,_)))}),[_]),(0,r.useEffect)((function(){T&&b&&(null!==O&&google.maps.event.removeListener(O),A(google.maps.event.addListener(T,aD.onClick,b)))}),[b]),(0,r.useEffect)((function(){T&&w&&(null!==D&&google.maps.event.removeListener(D),M(google.maps.event.addListener(T,aD.onClusteringBegin,w)))}),[w]),(0,r.useEffect)((function(){T&&x&&(null!==F&&google.maps.event.removeListener(F),M(google.maps.event.addListener(T,aD.onClusteringEnd,x)))}),[x]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==T&&oD.averageCenter(T,i)}),[T,i]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==T&&oD.batchSizeIE(T,a)}),[T,a]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==T&&oD.calculator(T,o)}),[T,o]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==T&&oD.clusterClass(T,s)}),[T,s]),(0,r.useEffect)((function(){"undefined"!==typeof u&&null!==T&&oD.enableRetinaIcons(T,u)}),[T,u]),(0,r.useEffect)((function(){"undefined"!==typeof c&&null!==T&&oD.gridSize(T,c)}),[T,c]),(0,r.useEffect)((function(){"undefined"!==typeof f&&null!==T&&oD.ignoreHidden(T,f)}),[T,f]),(0,r.useEffect)((function(){"undefined"!==typeof h&&null!==T&&oD.imageExtension(T,h)}),[T,h]),(0,r.useEffect)((function(){"undefined"!==typeof d&&null!==T&&oD.imagePath(T,d)}),[T,d]),(0,r.useEffect)((function(){"undefined"!==typeof p&&null!==T&&oD.imageSizes(T,p)}),[T,p]),(0,r.useEffect)((function(){"undefined"!==typeof v&&null!==T&&oD.maxZoom(T,v)}),[T,v]),(0,r.useEffect)((function(){"undefined"!==typeof m&&null!==T&&oD.minimumClusterSize(T,m)}),[T,m]),(0,r.useEffect)((function(){"undefined"!==typeof g&&null!==T&&oD.styles(T,g)}),[T,g]),(0,r.useEffect)((function(){"undefined"!==typeof y&&null!==T&&oD.title(T,y)}),[T,y]),(0,r.useEffect)((function(){"undefined"!==typeof k&&null!==T&&oD.zoomOnClick(T,k)}),[T,k]),(0,r.useEffect)((function(){if(N){var e=Object.assign({},n||sD),t=new iD(N,[],e);return i&&oD.averageCenter(t,i),a&&oD.batchSizeIE(t,a),o&&oD.calculator(t,o),s&&oD.clusterClass(t,s),u&&oD.enableRetinaIcons(t,u),c&&oD.gridSize(t,c),f&&oD.ignoreHidden(t,f),h&&oD.imageExtension(t,h),d&&oD.imagePath(t,d),p&&oD.imageSizes(t,p),v&&oD.maxZoom(t,v),m&&oD.minimumClusterSize(t,m),g&&oD.styles(t,g),y&&oD.title(t,y),k&&oD.zoomOnClick(t,k),S&&z(google.maps.event.addListener(t,aD.onMouseOut,S)),_&&H(google.maps.event.addListener(t,aD.onMouseOver,_)),b&&A(google.maps.event.addListener(t,aD.onClick,b)),w&&M(google.maps.event.addListener(t,aD.onClusteringBegin,w)),x&&U(google.maps.event.addListener(t,aD.onClusteringEnd,x)),L(t),E&&E(t),function(){null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==O&&google.maps.event.removeListener(O),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),C&&C(t)}}}),[]),null!==T&&t(T)||null}));var uD=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={markerClusterer:null},e.setClustererCallback=function(){null!==e.state.markerClusterer&&e.props.onLoad&&e.props.onLoad(e.state.markerClusterer)},e}return g(n,[{key:"componentDidMount",value:function(){if(this.context){var e=new iD(this.context,[],this.props.options);this.registeredEvents=Sj({updaterMap:oD,eventMap:aD,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{markerClusterer:e}}),this.setClustererCallback)}}},{key:"componentDidUpdate",value:function(e){this.state.markerClusterer&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:oD,eventMap:aD,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),_j(this.registeredEvents),this.state.markerClusterer.setMap(null))}},{key:"render",value:function(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null}}]),n}(r.PureComponent);function cD(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}uD.contextType=kj;var lD=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"===typeof t.visible&&("undefined"===typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"===typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var n=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-n.left-n.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],i=0;i<r.length;i++)this.eventListeners.push(google.maps.event.addListener(this.div,r[i],cD));this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",(function(){e.div&&(e.div.style.cursor="default")})))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",(function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||cD(t)})),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var n=0,r=0,i=t.getBounds();i&&!i.contains(this.position)&&t.setCenter(this.position);var a=t.getDiv(),o=a.offsetWidth,s=a.offsetHeight,u=this.pixelOffset.width,c=this.pixelOffset.height,l=this.div.offsetWidth,f=this.div.offsetHeight,h=this.infoBoxClearance.width,d=this.infoBoxClearance.height,p=this.getProjection().fromLatLngToContainerPixel(this.position);null!==p&&(p.x<-u+h?n=p.x+u-h:p.x+l+u+h>o&&(n=p.x+l+u+h-o),this.alignBottom?p.y<-c+d+f?r=p.y+c-d-f:p.y+c+d>s&&(r=p.y+c+d-s):p.y<-c+d?r=p.y+c-d:p.y+f+c+d>s&&(r=p.y+f+c+d-s)),0===n&&0===r||t.panBy(n,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)","undefined"!==typeof this.div.style.opacity&&""!==this.div.style.opacity){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*n+')"',this.div.style.filter="alpha(opacity="+100*n+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,n=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),"undefined"!==typeof e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),"undefined"!==typeof e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),"undefined"!==typeof e.content&&this.setContent(e.content),"undefined"!==typeof e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),"undefined"!==typeof e.maxWidth&&(this.maxWidth=e.maxWidth),"undefined"!==typeof e.pixelOffset&&(this.pixelOffset=e.pixelOffset),"undefined"!==typeof e.alignBottom&&(this.alignBottom=e.alignBottom),"undefined"!==typeof e.position&&this.setPosition(e.position),"undefined"!==typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!==typeof e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),"undefined"!==typeof e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),"undefined"!==typeof e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),"undefined"!==typeof e.isHidden&&(this.isHidden=e.isHidden),"undefined"!==typeof e.visible&&(this.isHidden=!e.visible),"undefined"!==typeof e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return"undefined"!==typeof e&&null!==e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var n=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",(function(){var e=t.getPosition();n.setPosition(e)})),this.mapListener=google.maps.event.addListener(t,"map_changed",(function(){n.setMap(t.map)}))),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0;e<this.eventListeners.length;e++)google.maps.event.removeListener(this.eventListeners[e]);this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),fD={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},hD={options:function(e,t){e.setOptions(t)},position:function(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},dD={};(0,r.memo)((function(e){var t=e.children,n=e.anchor,i=e.options,a=e.position,o=e.zIndex,s=e.onCloseClick,u=e.onDomReady,c=e.onContentChanged,f=e.onPositionChanged,h=e.onZindexChanged,d=e.onLoad,p=e.onUnmount,v=(0,r.useContext)(kj),m=l((0,r.useState)(null),2),g=m[0],y=m[1],k=l((0,r.useState)(null),2),b=k[0],w=k[1],x=l((0,r.useState)(null),2),_=x[0],S=x[1],E=l((0,r.useState)(null),2),C=E[0],I=E[1],T=l((0,r.useState)(null),2),L=T[0],N=T[1],P=l((0,r.useState)(null),2),O=P[0],A=P[1],j=(0,r.useRef)(null);return(0,r.useEffect)((function(){v&&null!==g&&(g.close(),n?g.open(v,n):g.getPosition()&&g.open(v))}),[v,g,n]),(0,r.useEffect)((function(){i&&null!==g&&g.setOptions(i)}),[g,i]),(0,r.useEffect)((function(){if(a&&null!==g){var e=a instanceof google.maps.LatLng?a:new google.maps.LatLng(a.lat,a.lng);g.setPosition(e)}}),[a]),(0,r.useEffect)((function(){"number"===typeof o&&null!==g&&g.setZIndex(o)}),[o]),(0,r.useEffect)((function(){g&&s&&(null!==b&&google.maps.event.removeListener(b),w(google.maps.event.addListener(g,"closeclick",s)))}),[s]),(0,r.useEffect)((function(){g&&u&&(null!==_&&google.maps.event.removeListener(_),S(google.maps.event.addListener(g,"domready",u)))}),[u]),(0,r.useEffect)((function(){g&&c&&(null!==C&&google.maps.event.removeListener(C),I(google.maps.event.addListener(g,"content_changed",c)))}),[c]),(0,r.useEffect)((function(){g&&f&&(null!==L&&google.maps.event.removeListener(L),N(google.maps.event.addListener(g,"position_changed",f)))}),[f]),(0,r.useEffect)((function(){g&&h&&(null!==O&&google.maps.event.removeListener(O),A(google.maps.event.addListener(g,"zindex_changed",h)))}),[h]),(0,r.useEffect)((function(){if(v){var e,t=i||dD,r=t.position,a=Tj(t,["position"]);!r||r instanceof google.maps.LatLng||(e=new google.maps.LatLng(r.lat,r.lng));var o=new lD(Object.assign(Object.assign({},a),e?{position:e}:{}));j.current=document.createElement("div"),y(o),s&&w(google.maps.event.addListener(o,"closeclick",s)),u&&S(google.maps.event.addListener(o,"domready",u)),c&&I(google.maps.event.addListener(o,"content_changed",c)),f&&N(google.maps.event.addListener(o,"position_changed",f)),h&&A(google.maps.event.addListener(o,"zindex_changed",h)),o.setContent(j.current),n?o.open(v,n):o.getPosition()?o.open(v):yj(!1,"You must provide either an anchor or a position prop for <InfoBox>."),d&&d(o)}return function(){null!==g&&(b&&google.maps.event.removeListener(b),C&&google.maps.event.removeListener(C),_&&google.maps.event.removeListener(_),L&&google.maps.event.removeListener(L),O&&google.maps.event.removeListener(O),p&&p(g),g.close())}}),[]),j.current?(0,qe.createPortal)(r.Children.only(t),j.current):null}));var pD=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.containerElement=null,e.state={infoBox:null},e.open=function(t,n){n?t.open(e.context,n):t.getPosition()?t.open(e.context):yj(!1,"You must provide either an anchor or a position prop for <InfoBox>.")},e.setInfoBoxCallback=function(){null!==e.state.infoBox&&null!==e.containerElement&&(e.state.infoBox.setContent(e.containerElement),e.open(e.state.infoBox,e.props.anchor),e.props.onLoad&&e.props.onLoad(e.state.infoBox))},e}return g(n,[{key:"componentDidMount",value:function(){var e,t=this.props.options||{},n=t.position,r=Tj(t,["position"]);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var i=new lD(Object.assign(Object.assign({},r),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Sj({updaterMap:hD,eventMap:fD,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)}},{key:"componentDidUpdate",value:function(e){var t=this.state.infoBox;null!==t&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:hD,eventMap:fD,prevProps:e,nextProps:this.props,instance:t}))}},{key:"componentWillUnmount",value:function(){var e=this.props.onUnmount,t=this.state.infoBox;null!==t&&(e&&e(t),_j(this.registeredEvents),t.close())}},{key:"render",value:function(){return this.containerElement?(0,qe.createPortal)(r.Children.only(this.props.children),this.containerElement):null}}]),n}(r.PureComponent);pD.contextType=kj;var vD=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!==i--;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n},mD={exports:{}};mD.exports=function(){function e(n,r,i,a,o,s){if(!(o-a<=i)){var u=a+o>>1;t(n,r,u,a,o,s%2),e(n,r,i,a,u-1,s+1),e(n,r,i,u+1,o,s+1)}}function t(e,r,i,a,o,s){for(;o>a;){if(o-a>600){var u=o-a+1,c=i-a+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1);t(e,r,i,Math.max(a,Math.floor(i-c*f/u+h)),Math.min(o,Math.floor(i+(u-c)*f/u+h)),s)}var d=r[2*i+s],p=a,v=o;for(n(e,r,a,i),r[2*o+s]>d&&n(e,r,a,o);p<v;){for(n(e,r,p,v),p++,v--;r[2*p+s]<d;)p++;for(;r[2*v+s]>d;)v--}r[2*a+s]===d?n(e,r,a,v):n(e,r,++v,o),v<=i&&(a=v+1),i<=v&&(o=v-1)}}function n(e,t,n,i){r(e,n,i),r(t,2*n,2*i),r(t,2*n+1,2*i+1)}function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function i(e,t,n,r,i,a,o){for(var s,u,c=[0,e.length-1,0],l=[];c.length;){var f=c.pop(),h=c.pop(),d=c.pop();if(h-d<=o)for(var p=d;p<=h;p++)s=t[2*p],u=t[2*p+1],s>=n&&s<=i&&u>=r&&u<=a&&l.push(e[p]);else{var v=Math.floor((d+h)/2);s=t[2*v],u=t[2*v+1],s>=n&&s<=i&&u>=r&&u<=a&&l.push(e[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(d),c.push(v-1),c.push(m)),(0===f?i>=s:a>=u)&&(c.push(v+1),c.push(h),c.push(m))}}return l}function a(e,t,n,r,i,a){for(var s=[0,e.length-1,0],u=[],c=i*i;s.length;){var l=s.pop(),f=s.pop(),h=s.pop();if(f-h<=a)for(var d=h;d<=f;d++)o(t[2*d],t[2*d+1],n,r)<=c&&u.push(e[d]);else{var p=Math.floor((h+f)/2),v=t[2*p],m=t[2*p+1];o(v,m,n,r)<=c&&u.push(e[p]);var g=(l+1)%2;(0===l?n-i<=v:r-i<=m)&&(s.push(h),s.push(p-1),s.push(g)),(0===l?n+i>=v:r+i>=m)&&(s.push(p+1),s.push(f),s.push(g))}}return u}function o(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}var s=function(e){return e[0]},u=function(e){return e[1]},c=function(t,n,r,i,a){void 0===n&&(n=s),void 0===r&&(r=u),void 0===i&&(i=64),void 0===a&&(a=Float64Array),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,c=this.ids=new o(t.length),l=this.coords=new a(2*t.length),f=0;f<t.length;f++)c[f]=f,l[2*f]=n(t[f]),l[2*f+1]=r(t[f]);e(c,l,i,0,c.length-1,0)};return c.prototype.range=function(e,t,n,r){return i(this.ids,this.coords,e,t,n,r,this.nodeSize)},c.prototype.within=function(e,t,n){return a(this.ids,this.coords,e,t,n,this.nodeSize)},c}();var gD,yD=mD.exports,kD={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},bD=Math.fround||(gD=new Float32Array(1),function(e){return gD[0]=+e,gD[0]}),wD=function(){function e(t){d(this,e),this.options=ND(Object.create(kD),t),this.trees=new Array(this.options.maxZoom+1)}return g(e,[{key:"load",value:function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,a=t.nodeSize;n&&console.time("total time");var o="prepare ".concat(e.length," points");n&&console.time(o),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(_D(e[u],u));this.trees[i+1]=new yD(s,PD,OD,a,Float32Array),n&&console.timeEnd(o);for(var c=i;c>=r;c--){var l=+Date.now();s=this._cluster(s,c),this.trees[c]=new yD(s,PD,OD,a,Float32Array),n&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-l)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var o=this.getClusters([n,r,180,a],t),s=this.getClusters([-180,r,i,a],t);return o.concat(s)}var u,c=this.trees[this._limitZoom(t)],l=[],f=I(c.range(CD(n),ID(a),CD(i),ID(r)));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=c.points[h];l.push(d.numPoints?SD(d):this.points[d.index])}}catch(p){f.e(p)}finally{f.f()}return l}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var a=i.points[t];if(!a)throw new Error(r);var o,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),u=[],c=I(i.within(a.x,a.y,s));try{for(c.s();!(o=c.n()).done;){var l=o.value,f=i.points[l];f.parentId===e&&u.push(f.numPoints?SD(f):this.points[f.index])}}catch(h){c.e(h)}finally{c.f()}if(0===u.length)throw new Error(r);return u}},{key:"getLeaves",value:function(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r}},{key:"getTile",value:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options,o=a.extent,s=a.radius/o,u=(n-s)/i,c=(n+1+s)/i,l={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,c),r.points,t,n,i,l),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,c),r.points,i,n,i,l),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,c),r.points,-1,n,i,l),l.features.length?l:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,n,r,i){var a,o=I(this.getChildren(t));try{for(o.s();!(a=o.n()).done;){var s=a.value,u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}}catch(c){o.e(c)}finally{o.f()}return i}},{key:"_addTileFeatures",value:function(e,t,n,r,i,a){var o,s=I(e);try{for(s.s();!(o=s.n()).done;){var u=t[o.value],c=u.numPoints,l=void 0,f=void 0,h=void 0;if(c)l=ED(u),f=u.x,h=u.y;else{var d=this.points[u.index];l=d.properties,f=CD(d.geometry.coordinates[0]),h=ID(d.geometry.coordinates[1])}var p={type:1,geometry:[[Math.round(this.options.extent*(f*i-n)),Math.round(this.options.extent*(h*i-r))]],tags:l},v=void 0;c?v=u.id:this.options.generateId?v=u.index:this.points[u.index].id&&(v=this.points[u.index].id),void 0!==v&&(p.id=v),a.features.push(p)}}catch(m){s.e(m)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var n=[],r=this.options,i=r.radius,a=r.extent,o=r.reduce,s=r.minPoints,u=i/(a*Math.pow(2,t)),c=0;c<e.length;c++){var l=e[c];if(!(l.zoom<=t)){l.zoom=t;var f,h=this.trees[t+1],d=h.within(l.x,l.y,u),p=l.numPoints||1,v=p,m=I(d);try{for(m.s();!(f=m.n()).done;){var g=f.value,y=h.points[g];y.zoom>t&&(v+=y.numPoints||1)}}catch(A){m.e(A)}finally{m.f()}if(v>p&&v>=s){var k,b=l.x*p,w=l.y*p,x=o&&p>1?this._map(l,!0):null,_=(c<<5)+(t+1)+this.points.length,S=I(d);try{for(S.s();!(k=S.n()).done;){var E=k.value,C=h.points[E];if(!(C.zoom<=t)){C.zoom=t;var T=C.numPoints||1;b+=C.x*T,w+=C.y*T,C.parentId=_,o&&(x||(x=this._map(l,!0)),o(x,this._map(C)))}}}catch(A){S.e(A)}finally{S.f()}l.parentId=_,n.push(xD(b/v,w/v,_,v,x))}else if(n.push(l),v>1){var L,N=I(d);try{for(N.s();!(L=N.n()).done;){var P=L.value,O=h.points[P];O.zoom<=t||(O.zoom=t,n.push(O))}}catch(A){N.e(A)}finally{N.f()}}}}return n}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?ND({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?ND({},r):r}}]),e}();function xD(e,t,n,r,i){return{x:bD(e),y:bD(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function _D(e,t){var n=l(e.geometry.coordinates,2),r=n[0],i=n[1];return{x:bD(CD(r)),y:bD(ID(i)),zoom:1/0,index:t,parentId:-1}}function SD(e){return{type:"Feature",id:e.id,properties:ED(e),geometry:{type:"Point",coordinates:[TD(e.x),LD(e.y)]}}}function ED(e){var t=e.numPoints,n=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?"".concat(Math.round(t/100)/10,"k"):t;return ND(ND({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function CD(e){return e/360+.5}function ID(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function TD(e){return 360*(e-.5)}function LD(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function ND(e,t){for(var n in t)e[n]=t[n];return e}function PD(e){return e.x}function OD(e){return e.y}function AD(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var jD=function(){function e(t){var n=t.markers,r=t.position;d(this,e),this.markers=n,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}return g(e,[{key:"bounds",get:function(){if(0!==this.markers.length||this._position)return this.markers.reduce((function(e,t){return e.extend(t.getPosition())}),new google.maps.LatLngBounds(this._position,this._position))}},{key:"position",get:function(){return this._position||this.bounds.getCenter()}},{key:"count",get:function(){return this.markers.filter((function(e){return e.getVisible()})).length}},{key:"push",value:function(e){this.markers.push(e)}},{key:"delete",value:function(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}]),e}(),DD=function(){function e(t){var n=t.maxZoom,r=void 0===n?16:n;d(this,e),this.maxZoom=r}return g(e,[{key:"noop",value:function(e){var t=e.markers;return MD(t)}}]),e}(),MD=function(e){return e.map((function(e){return new jD({position:e.getPosition(),markers:[e]})}))},RD=function(e){k(n,e);var t=_(n);function n(e){var r;d(this,n);var i=e.maxZoom,a=e.radius,o=void 0===a?60:a,s=AD(e,["maxZoom","radius"]);return(r=t.call(this,{maxZoom:i})).superCluster=new wD(Object.assign({maxZoom:r.maxZoom,radius:o},s)),r.state={zoom:null},r}return g(n,[{key:"calculate",value:function(e){var t=!1;if(!vD(e.markers,this.markers)){t=!0,this.markers=h(e.markers);var n=this.markers.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.getPosition().lng(),e.getPosition().lat()]},properties:{marker:e}}}));this.superCluster.load(n)}var r={zoom:e.map.getZoom()};return t||this.state.zoom>this.maxZoom&&r.zoom>this.maxZoom||(t=t||!vD(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}},{key:"cluster",value:function(e){var t=e.map;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(this.transformCluster.bind(this))}},{key:"transformCluster",value:function(e){var t=l(e.geometry.coordinates,2),n=t[0],r=t[1],i=e.properties;if(i.cluster)return new jD({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map((function(e){return e.properties.marker})),position:new google.maps.LatLng({lat:r,lng:n})});var a=i.marker;return new jD({markers:[a],position:a.getPosition()})}}]),n}(DD),FD=g((function e(t,n){d(this,e),this.markers={sum:t.length};var r=n.map((function(e){return e.count})),i=r.reduce((function(e,t){return e+t}),0);this.clusters={count:n.length,markers:{mean:i/n.length,sum:i,min:Math.min.apply(Math,h(r)),max:Math.max.apply(Math,h(r))}}})),UD=function(){function e(){d(this,e)}return g(e,[{key:"render",value:function(e,t){var n=e.count,r=e.position,i=n>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",a=window.btoa('\n  <svg fill="'.concat(i,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>'));return new google.maps.Marker({position:r,icon:{url:"data:image/svg+xml;base64,".concat(a),scaledSize:new google.maps.Size(45,45)},label:{text:String(n),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:"Cluster of ".concat(n," markers"),zIndex:Number(google.maps.Marker.MAX_ZINDEX)+n})}}]),e}();var VD,BD=g((function e(){d(this,e),function(e,t){for(var n in t.prototype)e.prototype[n]=t.prototype[n]}(e,google.maps.OverlayView)}));!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(VD||(VD={}));var zD=function(e,t,n){n.fitBounds(t.bounds)},qD=function(e){k(n,e);var t=_(n);function n(e){var r,i=e.map,a=e.markers,o=void 0===a?[]:a,s=e.algorithm,u=void 0===s?new RD({}):s,c=e.renderer,l=void 0===c?new UD:c,f=e.onClusterClick,p=void 0===f?zD:f;return d(this,n),(r=t.call(this)).markers=h(o),r.clusters=[],r.algorithm=u,r.renderer=l,r.onClusterClick=p,i&&r.setMap(i),r}return g(n,[{key:"addMarker",value:function(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}},{key:"addMarkers",value:function(e,t){var n=this;e.forEach((function(e){n.addMarker(e,!0)})),t||this.render()}},{key:"removeMarker",value:function(e,t){var n=this.markers.indexOf(e);return-1!==n&&(e.setMap(null),this.markers.splice(n,1),t||this.render(),!0)}},{key:"removeMarkers",value:function(e,t){var n=this,r=!1;return e.forEach((function(e){r=n.removeMarker(e,!0)||r})),r&&!t&&this.render(),r}},{key:"clearMarkers",value:function(e){this.markers.length=0,e||this.render()}},{key:"render",value:function(){var e=this.getMap();if(e instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,VD.CLUSTERING_BEGIN,this);var t=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()}),n=t.clusters,r=t.changed;(r||void 0==r)&&(this.reset(),this.clusters=n,this.renderClusters()),google.maps.event.trigger(this,VD.CLUSTERING_END,this)}}},{key:"onAdd",value:function(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}},{key:"onRemove",value:function(){google.maps.event.removeListener(this.idleListener),this.reset()}},{key:"reset",value:function(){this.markers.forEach((function(e){return e.setMap(null)})),this.clusters.forEach((function(e){return e.delete()})),this.clusters=[]}},{key:"renderClusters",value:function(){var e=this,t=new FD(this.markers,this.clusters),n=this.getMap();this.clusters.forEach((function(r){1===r.markers.length?r.marker=r.markers[0]:(r.marker=e.renderer.render(r,t),e.onClusterClick&&r.marker.addListener("click",(function(t){google.maps.event.trigger(e,VD.CLUSTER_CLICK,r),e.onClusterClick(t,r,n)}))),r.marker.setMap(n)}))}}]),n}(BD);function WD(e){var t=function(){yj(!!r.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=(0,r.useContext)(kj);return yj(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),n=l((0,r.useState)(null),2),i=n[0],a=n[1];return(0,r.useEffect)((function(){if(t&&null===i){var n=new qD(Object.assign(Object.assign({},e),{map:t}));a(n)}}),[t]),i}(0,r.memo)((function(e){var t=e.children,n=WD(e.options);return null!==n?t(n):null}));var HD={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},GD={options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},zIndex:function(e,t){e.setZIndex(t)}};(0,r.memo)((function(e){var t=e.children,n=e.anchor,i=e.options,a=e.position,o=e.zIndex,s=e.onCloseClick,u=e.onDomReady,c=e.onContentChanged,f=e.onPositionChanged,h=e.onZindexChanged,d=e.onLoad,p=e.onUnmount,v=(0,r.useContext)(kj),m=l((0,r.useState)(null),2),g=m[0],y=m[1],k=l((0,r.useState)(null),2),b=k[0],w=k[1],x=l((0,r.useState)(null),2),_=x[0],S=x[1],E=l((0,r.useState)(null),2),C=E[0],I=E[1],T=l((0,r.useState)(null),2),L=T[0],N=T[1],P=l((0,r.useState)(null),2),O=P[0],A=P[1],j=(0,r.useRef)(null);return(0,r.useEffect)((function(){null!==g&&(g.close(),n?g.open(v,n):g.getPosition()&&g.open(v))}),[v,g,n]),(0,r.useEffect)((function(){i&&null!==g&&g.setOptions(i)}),[g,i]),(0,r.useEffect)((function(){a&&null!==g&&g.setPosition(a)}),[a]),(0,r.useEffect)((function(){"number"===typeof o&&null!==g&&g.setZIndex(o)}),[o]),(0,r.useEffect)((function(){g&&s&&(null!==b&&google.maps.event.removeListener(b),w(google.maps.event.addListener(g,"closeclick",s)))}),[s]),(0,r.useEffect)((function(){g&&u&&(null!==_&&google.maps.event.removeListener(_),S(google.maps.event.addListener(g,"domready",u)))}),[u]),(0,r.useEffect)((function(){g&&c&&(null!==C&&google.maps.event.removeListener(C),I(google.maps.event.addListener(g,"content_changed",c)))}),[c]),(0,r.useEffect)((function(){g&&f&&(null!==L&&google.maps.event.removeListener(L),N(google.maps.event.addListener(g,"position_changed",f)))}),[f]),(0,r.useEffect)((function(){g&&h&&(null!==O&&google.maps.event.removeListener(O),A(google.maps.event.addListener(g,"zindex_changed",h)))}),[h]),(0,r.useEffect)((function(){var e=new google.maps.InfoWindow(Object.assign({},i||{}));return y(e),j.current=document.createElement("div"),s&&w(google.maps.event.addListener(e,"closeclick",s)),u&&S(google.maps.event.addListener(e,"domready",u)),c&&I(google.maps.event.addListener(e,"content_changed",c)),f&&N(google.maps.event.addListener(e,"position_changed",f)),h&&A(google.maps.event.addListener(e,"zindex_changed",h)),e.setContent(j.current),a&&e.setPosition(a),o&&e.setZIndex(o),n?e.open(v,n):e.getPosition()?e.open(v):yj(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),d&&d(e),function(){b&&google.maps.event.removeListener(b),C&&google.maps.event.removeListener(C),_&&google.maps.event.removeListener(_),L&&google.maps.event.removeListener(L),O&&google.maps.event.removeListener(O),p&&p(e),e.close()}}),[]),j.current?(0,qe.createPortal)(r.Children.only(t),j.current):null}));var KD=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.containerElement=null,e.state={infoWindow:null},e.open=function(t,n){n?t.open(e.context,n):t.getPosition()?t.open(e.context):yj(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")},e.setInfoWindowCallback=function(){null!==e.state.infoWindow&&null!==e.containerElement&&(e.state.infoWindow.setContent(e.containerElement),e.open(e.state.infoWindow,e.props.anchor),e.props.onLoad&&e.props.onLoad(e.state.infoWindow))},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.InfoWindow(Object.assign({},this.props.options||{}));this.containerElement=document.createElement("div"),this.registeredEvents=Sj({updaterMap:GD,eventMap:HD,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{infoWindow:e}}),this.setInfoWindowCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.infoWindow&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:GD,eventMap:HD,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}},{key:"componentWillUnmount",value:function(){null!==this.state.infoWindow&&(_j(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}},{key:"render",value:function(){return this.containerElement?(0,qe.createPortal)(r.Children.only(this.props.children),this.containerElement):null}}]),n}(r.PureComponent);KD.contextType=kj;var QD={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},JD={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},visible:function(e,t){e.setVisible(t)}},ZD={};(0,r.memo)((function(e){var t=e.options,n=e.draggable,i=e.editable,a=e.visible,o=e.path,s=e.onDblClick,u=e.onDragEnd,c=e.onDragStart,f=e.onMouseDown,h=e.onMouseMove,d=e.onMouseOut,p=e.onMouseOver,v=e.onMouseUp,m=e.onRightClick,g=e.onClick,y=e.onDrag,k=e.onLoad,b=e.onUnmount,w=(0,r.useContext)(kj),x=l((0,r.useState)(null),2),_=x[0],S=x[1],E=l((0,r.useState)(null),2),C=E[0],I=E[1],T=l((0,r.useState)(null),2),L=T[0],N=T[1],P=l((0,r.useState)(null),2),O=P[0],A=P[1],j=l((0,r.useState)(null),2),D=j[0],M=j[1],R=l((0,r.useState)(null),2),F=R[0],U=R[1],V=l((0,r.useState)(null),2),B=V[0],z=V[1],q=l((0,r.useState)(null),2),W=q[0],H=q[1],G=l((0,r.useState)(null),2),K=G[0],Q=G[1],J=l((0,r.useState)(null),2),Z=J[0],Y=J[1],$=l((0,r.useState)(null),2),X=$[0],ee=$[1],te=l((0,r.useState)(null),2),ne=te[0],re=te[1];return(0,r.useEffect)((function(){null!==_&&_.setMap(w)}),[w]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==_&&_.setOptions(t)}),[_,t]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==_&&_.setDraggable(n)}),[_,n]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==_&&_.setEditable(i)}),[_,i]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==_&&_.setVisible(a)}),[_,a]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==_&&_.setPath(o)}),[_,o]),(0,r.useEffect)((function(){_&&s&&(null!==C&&google.maps.event.removeListener(C),I(google.maps.event.addListener(_,"dblclick",s)))}),[s]),(0,r.useEffect)((function(){_&&u&&(null!==L&&google.maps.event.removeListener(L),N(google.maps.event.addListener(_,"dragend",u)))}),[u]),(0,r.useEffect)((function(){_&&c&&(null!==O&&google.maps.event.removeListener(O),A(google.maps.event.addListener(_,"dragstart",c)))}),[c]),(0,r.useEffect)((function(){_&&f&&(null!==D&&google.maps.event.removeListener(D),M(google.maps.event.addListener(_,"mousedown",f)))}),[f]),(0,r.useEffect)((function(){_&&h&&(null!==F&&google.maps.event.removeListener(F),U(google.maps.event.addListener(_,"mousemove",h)))}),[h]),(0,r.useEffect)((function(){_&&d&&(null!==B&&google.maps.event.removeListener(B),z(google.maps.event.addListener(_,"mouseout",d)))}),[d]),(0,r.useEffect)((function(){_&&p&&(null!==W&&google.maps.event.removeListener(W),H(google.maps.event.addListener(_,"mouseover",p)))}),[p]),(0,r.useEffect)((function(){_&&v&&(null!==K&&google.maps.event.removeListener(K),Q(google.maps.event.addListener(_,"mouseup",v)))}),[v]),(0,r.useEffect)((function(){_&&m&&(null!==Z&&google.maps.event.removeListener(Z),Y(google.maps.event.addListener(_,"rightclick",m)))}),[m]),(0,r.useEffect)((function(){_&&g&&(null!==X&&google.maps.event.removeListener(X),ee(google.maps.event.addListener(_,"click",g)))}),[g]),(0,r.useEffect)((function(){_&&y&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(_,"drag",y)))}),[y]),(0,r.useEffect)((function(){var e=new google.maps.Polyline(Object.assign(Object.assign({},t||ZD),{map:w}));return o&&e.setPath(o),"undefined"!==typeof a&&e.setVisible(a),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof n&&e.setDraggable(n),s&&I(google.maps.event.addListener(e,"dblclick",s)),u&&N(google.maps.event.addListener(e,"dragend",u)),c&&A(google.maps.event.addListener(e,"dragstart",c)),f&&M(google.maps.event.addListener(e,"mousedown",f)),h&&U(google.maps.event.addListener(e,"mousemove",h)),d&&z(google.maps.event.addListener(e,"mouseout",d)),p&&H(google.maps.event.addListener(e,"mouseover",p)),v&&Q(google.maps.event.addListener(e,"mouseup",v)),m&&Y(google.maps.event.addListener(e,"rightclick",m)),g&&ee(google.maps.event.addListener(e,"click",g)),y&&re(google.maps.event.addListener(e,"drag",y)),S(e),k&&k(e),function(){null!==C&&google.maps.event.removeListener(C),null!==L&&google.maps.event.removeListener(L),null!==O&&google.maps.event.removeListener(O),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==K&&google.maps.event.removeListener(K),null!==Z&&google.maps.event.removeListener(Z),null!==X&&google.maps.event.removeListener(X),b&&b(e),e.setMap(null)}}),[]),null}));var YD=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={polyline:null},e.setPolylineCallback=function(){null!==e.state.polyline&&e.props.onLoad&&e.props.onLoad(e.state.polyline)},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.Polyline(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=Sj({updaterMap:JD,eventMap:QD,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polyline:e}}),this.setPolylineCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.polyline&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:JD,eventMap:QD,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}},{key:"componentWillUnmount",value:function(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),_j(this.registeredEvents),this.state.polyline.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);YD.contextType=kj;var $D={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},XD={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},paths:function(e,t){e.setPaths(t)},visible:function(e,t){e.setVisible(t)}};(0,r.memo)((function(e){var t=e.options,n=e.draggable,i=e.editable,a=e.visible,o=e.path,s=e.paths,u=e.onDblClick,c=e.onDragEnd,f=e.onDragStart,h=e.onMouseDown,d=e.onMouseMove,p=e.onMouseOut,v=e.onMouseOver,m=e.onMouseUp,g=e.onRightClick,y=e.onClick,k=e.onDrag,b=e.onLoad,w=e.onUnmount,x=(0,r.useContext)(kj),_=l((0,r.useState)(null),2),S=_[0],E=_[1],C=l((0,r.useState)(null),2),I=C[0],T=C[1],L=l((0,r.useState)(null),2),N=L[0],P=L[1],O=l((0,r.useState)(null),2),A=O[0],j=O[1],D=l((0,r.useState)(null),2),M=D[0],R=D[1],F=l((0,r.useState)(null),2),U=F[0],V=F[1],B=l((0,r.useState)(null),2),z=B[0],q=B[1],W=l((0,r.useState)(null),2),H=W[0],G=W[1],K=l((0,r.useState)(null),2),Q=K[0],J=K[1],Z=l((0,r.useState)(null),2),Y=Z[0],$=Z[1],X=l((0,r.useState)(null),2),ee=X[0],te=X[1],ne=l((0,r.useState)(null),2),re=ne[0],ie=ne[1];return(0,r.useEffect)((function(){null!==S&&S.setMap(x)}),[x]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==S&&S.setOptions(t)}),[S,t]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==S&&S.setDraggable(n)}),[S,n]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==S&&S.setEditable(i)}),[S,i]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==S&&S.setVisible(a)}),[S,a]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==S&&S.setPath(o)}),[S,o]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==S&&S.setPaths(s)}),[S,s]),(0,r.useEffect)((function(){S&&u&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(S,"dblclick",u)))}),[u]),(0,r.useEffect)((function(){S&&c&&(null!==N&&google.maps.event.removeListener(N),P(google.maps.event.addListener(S,"dragend",c)))}),[c]),(0,r.useEffect)((function(){S&&f&&(null!==A&&google.maps.event.removeListener(A),j(google.maps.event.addListener(S,"dragstart",f)))}),[f]),(0,r.useEffect)((function(){S&&h&&(null!==M&&google.maps.event.removeListener(M),R(google.maps.event.addListener(S,"mousedown",h)))}),[h]),(0,r.useEffect)((function(){S&&d&&(null!==U&&google.maps.event.removeListener(U),V(google.maps.event.addListener(S,"mousemove",d)))}),[d]),(0,r.useEffect)((function(){S&&p&&(null!==z&&google.maps.event.removeListener(z),q(google.maps.event.addListener(S,"mouseout",p)))}),[p]),(0,r.useEffect)((function(){S&&v&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(S,"mouseover",v)))}),[v]),(0,r.useEffect)((function(){S&&m&&(null!==Q&&google.maps.event.removeListener(Q),J(google.maps.event.addListener(S,"mouseup",m)))}),[m]),(0,r.useEffect)((function(){S&&g&&(null!==Y&&google.maps.event.removeListener(Y),$(google.maps.event.addListener(S,"rightclick",g)))}),[g]),(0,r.useEffect)((function(){S&&y&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(S,"click",y)))}),[y]),(0,r.useEffect)((function(){S&&k&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(S,"drag",k)))}),[k]),(0,r.useEffect)((function(){var e=new google.maps.Polygon(Object.assign(Object.assign({},t||{}),{map:x}));return o&&e.setPath(o),s&&e.setPaths(s),"undefined"!==typeof a&&e.setVisible(a),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof n&&e.setDraggable(n),u&&T(google.maps.event.addListener(e,"dblclick",u)),c&&P(google.maps.event.addListener(e,"dragend",c)),f&&j(google.maps.event.addListener(e,"dragstart",f)),h&&R(google.maps.event.addListener(e,"mousedown",h)),d&&V(google.maps.event.addListener(e,"mousemove",d)),p&&q(google.maps.event.addListener(e,"mouseout",p)),v&&G(google.maps.event.addListener(e,"mouseover",v)),m&&J(google.maps.event.addListener(e,"mouseup",m)),g&&$(google.maps.event.addListener(e,"rightclick",g)),y&&te(google.maps.event.addListener(e,"click",y)),k&&ie(google.maps.event.addListener(e,"drag",k)),E(e),b&&b(e),function(){null!==I&&google.maps.event.removeListener(I),null!==N&&google.maps.event.removeListener(N),null!==A&&google.maps.event.removeListener(A),null!==M&&google.maps.event.removeListener(M),null!==U&&google.maps.event.removeListener(U),null!==z&&google.maps.event.removeListener(z),null!==H&&google.maps.event.removeListener(H),null!==Q&&google.maps.event.removeListener(Q),null!==Y&&google.maps.event.removeListener(Y),null!==ee&&google.maps.event.removeListener(ee),w&&w(e),e.setMap(null)}}),[]),null}));var eM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={polygon:null},e.setPolygonCallback=function(){null!==e.state.polygon&&e.props.onLoad&&e.props.onLoad(e.state.polygon)},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.Polygon(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=Sj({updaterMap:XD,eventMap:$D,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polygon:e}}),this.setPolygonCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.polygon&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:XD,eventMap:$D,prevProps:e,nextProps:this.props,instance:this.state.polygon}))}},{key:"componentWillUnmount",value:function(){null!==this.state.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.state.polygon),_j(this.registeredEvents),this.state.polygon&&this.state.polygon.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);eM.contextType=kj;var tM={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},nM={bounds:function(e,t){e.setBounds(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},visible:function(e,t){e.setVisible(t)}};(0,r.memo)((function(e){var t=e.options,n=e.bounds,i=e.draggable,a=e.editable,o=e.visible,s=e.onDblClick,u=e.onDragEnd,c=e.onDragStart,f=e.onMouseDown,h=e.onMouseMove,d=e.onMouseOut,p=e.onMouseOver,v=e.onMouseUp,m=e.onRightClick,g=e.onClick,y=e.onDrag,k=e.onBoundsChanged,b=e.onLoad,w=e.onUnmount,x=(0,r.useContext)(kj),_=l((0,r.useState)(null),2),S=_[0],E=_[1],C=l((0,r.useState)(null),2),I=C[0],T=C[1],L=l((0,r.useState)(null),2),N=L[0],P=L[1],O=l((0,r.useState)(null),2),A=O[0],j=O[1],D=l((0,r.useState)(null),2),M=D[0],R=D[1],F=l((0,r.useState)(null),2),U=F[0],V=F[1],B=l((0,r.useState)(null),2),z=B[0],q=B[1],W=l((0,r.useState)(null),2),H=W[0],G=W[1],K=l((0,r.useState)(null),2),Q=K[0],J=K[1],Z=l((0,r.useState)(null),2),Y=Z[0],$=Z[1],X=l((0,r.useState)(null),2),ee=X[0],te=X[1],ne=l((0,r.useState)(null),2),re=ne[0],ie=ne[1],ae=l((0,r.useState)(null),2),oe=ae[0],se=ae[1];return(0,r.useEffect)((function(){null!==S&&S.setMap(x)}),[x]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==S&&S.setOptions(t)}),[S,t]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==S&&S.setDraggable(i)}),[S,i]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==S&&S.setEditable(a)}),[S,a]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==S&&S.setVisible(o)}),[S,o]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==S&&S.setBounds(n)}),[S,n]),(0,r.useEffect)((function(){S&&s&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(S,"dblclick",s)))}),[s]),(0,r.useEffect)((function(){S&&u&&(null!==N&&google.maps.event.removeListener(N),P(google.maps.event.addListener(S,"dragend",u)))}),[u]),(0,r.useEffect)((function(){S&&c&&(null!==A&&google.maps.event.removeListener(A),j(google.maps.event.addListener(S,"dragstart",c)))}),[c]),(0,r.useEffect)((function(){S&&f&&(null!==M&&google.maps.event.removeListener(M),R(google.maps.event.addListener(S,"mousedown",f)))}),[f]),(0,r.useEffect)((function(){S&&h&&(null!==U&&google.maps.event.removeListener(U),V(google.maps.event.addListener(S,"mousemove",h)))}),[h]),(0,r.useEffect)((function(){S&&d&&(null!==z&&google.maps.event.removeListener(z),q(google.maps.event.addListener(S,"mouseout",d)))}),[d]),(0,r.useEffect)((function(){S&&p&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(S,"mouseover",p)))}),[p]),(0,r.useEffect)((function(){S&&v&&(null!==Q&&google.maps.event.removeListener(Q),J(google.maps.event.addListener(S,"mouseup",v)))}),[v]),(0,r.useEffect)((function(){S&&m&&(null!==Y&&google.maps.event.removeListener(Y),$(google.maps.event.addListener(S,"rightclick",m)))}),[m]),(0,r.useEffect)((function(){S&&g&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(S,"click",g)))}),[g]),(0,r.useEffect)((function(){S&&y&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(S,"drag",y)))}),[y]),(0,r.useEffect)((function(){S&&k&&(null!==oe&&google.maps.event.removeListener(oe),se(google.maps.event.addListener(S,"bounds_changed",k)))}),[k]),(0,r.useEffect)((function(){var e=new google.maps.Rectangle(Object.assign(Object.assign({},t||{}),{map:x}));return"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof a&&e.setEditable(a),"undefined"!==typeof i&&e.setDraggable(i),"undefined"!==typeof n&&e.setBounds(n),s&&T(google.maps.event.addListener(e,"dblclick",s)),u&&P(google.maps.event.addListener(e,"dragend",u)),c&&j(google.maps.event.addListener(e,"dragstart",c)),f&&R(google.maps.event.addListener(e,"mousedown",f)),h&&V(google.maps.event.addListener(e,"mousemove",h)),d&&q(google.maps.event.addListener(e,"mouseout",d)),p&&G(google.maps.event.addListener(e,"mouseover",p)),v&&J(google.maps.event.addListener(e,"mouseup",v)),m&&$(google.maps.event.addListener(e,"rightclick",m)),g&&te(google.maps.event.addListener(e,"click",g)),y&&ie(google.maps.event.addListener(e,"drag",y)),k&&se(google.maps.event.addListener(e,"bounds_changed",k)),E(e),b&&b(e),function(){null!==I&&google.maps.event.removeListener(I),null!==N&&google.maps.event.removeListener(N),null!==A&&google.maps.event.removeListener(A),null!==M&&google.maps.event.removeListener(M),null!==U&&google.maps.event.removeListener(U),null!==z&&google.maps.event.removeListener(z),null!==H&&google.maps.event.removeListener(H),null!==Q&&google.maps.event.removeListener(Q),null!==Y&&google.maps.event.removeListener(Y),null!==ee&&google.maps.event.removeListener(ee),null!==re&&google.maps.event.removeListener(re),null!==oe&&google.maps.event.removeListener(oe),w&&w(e),e.setMap(null)}}),[]),null}));var rM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={rectangle:null},e.setRectangleCallback=function(){null!==e.state.rectangle&&e.props.onLoad&&e.props.onLoad(e.state.rectangle)},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.Rectangle(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=Sj({updaterMap:nM,eventMap:tM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{rectangle:e}}),this.setRectangleCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.rectangle&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:nM,eventMap:tM,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}},{key:"componentWillUnmount",value:function(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),_j(this.registeredEvents),this.state.rectangle.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);rM.contextType=kj;var iM={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},aM={center:function(e,t){e.setCenter(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},radius:function(e,t){e.setRadius(t)},visible:function(e,t){e.setVisible(t)}},oM={};(0,r.memo)((function(e){var t=e.options,n=e.center,i=e.radius,a=e.draggable,o=e.editable,s=e.visible,u=e.onDblClick,c=e.onDragEnd,f=e.onDragStart,h=e.onMouseDown,d=e.onMouseMove,p=e.onMouseOut,v=e.onMouseOver,m=e.onMouseUp,g=e.onRightClick,y=e.onClick,k=e.onDrag,b=e.onCenterChanged,w=e.onRadiusChanged,x=e.onLoad,_=e.onUnmount,S=(0,r.useContext)(kj),E=l((0,r.useState)(null),2),C=E[0],I=E[1],T=l((0,r.useState)(null),2),L=T[0],N=T[1],P=l((0,r.useState)(null),2),O=P[0],A=P[1],j=l((0,r.useState)(null),2),D=j[0],M=j[1],R=l((0,r.useState)(null),2),F=R[0],U=R[1],V=l((0,r.useState)(null),2),B=V[0],z=V[1],q=l((0,r.useState)(null),2),W=q[0],H=q[1],G=l((0,r.useState)(null),2),K=G[0],Q=G[1],J=l((0,r.useState)(null),2),Z=J[0],Y=J[1],$=l((0,r.useState)(null),2),X=$[0],ee=$[1],te=l((0,r.useState)(null),2),ne=te[0],re=te[1],ie=l((0,r.useState)(null),2),ae=ie[0],oe=ie[1],se=l((0,r.useState)(null),2),ue=se[0],ce=se[1],le=l((0,r.useState)(null),2),fe=le[0],he=le[1];return(0,r.useEffect)((function(){null!==C&&C.setMap(S)}),[S]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==C&&C.setOptions(t)}),[C,t]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==C&&C.setDraggable(a)}),[C,a]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==C&&C.setEditable(o)}),[C,o]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==C&&C.setVisible(s)}),[C,s]),(0,r.useEffect)((function(){"number"===typeof i&&null!==C&&C.setRadius(i)}),[C,i]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==C&&C.setCenter(n)}),[C,n]),(0,r.useEffect)((function(){C&&u&&(null!==L&&google.maps.event.removeListener(L),N(google.maps.event.addListener(C,"dblclick",u)))}),[u]),(0,r.useEffect)((function(){C&&c&&(null!==O&&google.maps.event.removeListener(O),A(google.maps.event.addListener(C,"dragend",c)))}),[c]),(0,r.useEffect)((function(){C&&f&&(null!==D&&google.maps.event.removeListener(D),M(google.maps.event.addListener(C,"dragstart",f)))}),[f]),(0,r.useEffect)((function(){C&&h&&(null!==F&&google.maps.event.removeListener(F),U(google.maps.event.addListener(C,"mousedown",h)))}),[h]),(0,r.useEffect)((function(){C&&d&&(null!==B&&google.maps.event.removeListener(B),z(google.maps.event.addListener(C,"mousemove",d)))}),[d]),(0,r.useEffect)((function(){C&&p&&(null!==W&&google.maps.event.removeListener(W),H(google.maps.event.addListener(C,"mouseout",p)))}),[p]),(0,r.useEffect)((function(){C&&v&&(null!==K&&google.maps.event.removeListener(K),Q(google.maps.event.addListener(C,"mouseover",v)))}),[v]),(0,r.useEffect)((function(){C&&m&&(null!==Z&&google.maps.event.removeListener(Z),Y(google.maps.event.addListener(C,"mouseup",m)))}),[m]),(0,r.useEffect)((function(){C&&g&&(null!==X&&google.maps.event.removeListener(X),ee(google.maps.event.addListener(C,"rightclick",g)))}),[g]),(0,r.useEffect)((function(){C&&y&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(C,"click",y)))}),[y]),(0,r.useEffect)((function(){C&&k&&(null!==ae&&google.maps.event.removeListener(ae),oe(google.maps.event.addListener(C,"drag",k)))}),[k]),(0,r.useEffect)((function(){C&&b&&(null!==ue&&google.maps.event.removeListener(ue),ce(google.maps.event.addListener(C,"center_changed",b)))}),[y]),(0,r.useEffect)((function(){C&&w&&(null!==fe&&google.maps.event.removeListener(fe),he(google.maps.event.addListener(C,"radius_changed",w)))}),[w]),(0,r.useEffect)((function(){var e=new google.maps.Circle(Object.assign(Object.assign({},t||oM),{map:S}));return"number"===typeof i&&e.setRadius(i),"undefined"!==typeof n&&e.setCenter(n),"number"===typeof i&&e.setRadius(i),"undefined"!==typeof s&&e.setVisible(s),"undefined"!==typeof o&&e.setEditable(o),"undefined"!==typeof a&&e.setDraggable(a),u&&N(google.maps.event.addListener(e,"dblclick",u)),c&&A(google.maps.event.addListener(e,"dragend",c)),f&&M(google.maps.event.addListener(e,"dragstart",f)),h&&U(google.maps.event.addListener(e,"mousedown",h)),d&&z(google.maps.event.addListener(e,"mousemove",d)),p&&H(google.maps.event.addListener(e,"mouseout",p)),v&&Q(google.maps.event.addListener(e,"mouseover",v)),m&&Y(google.maps.event.addListener(e,"mouseup",m)),g&&ee(google.maps.event.addListener(e,"rightclick",g)),y&&re(google.maps.event.addListener(e,"click",y)),k&&oe(google.maps.event.addListener(e,"drag",k)),b&&ce(google.maps.event.addListener(e,"center_changed",b)),w&&he(google.maps.event.addListener(e,"radius_changed",w)),I(e),x&&x(e),function(){null!==L&&google.maps.event.removeListener(L),null!==O&&google.maps.event.removeListener(O),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==K&&google.maps.event.removeListener(K),null!==Z&&google.maps.event.removeListener(Z),null!==X&&google.maps.event.removeListener(X),null!==ne&&google.maps.event.removeListener(ne),null!==ue&&google.maps.event.removeListener(ue),null!==fe&&google.maps.event.removeListener(fe),_&&_(e),e.setMap(null)}}),[]),null}));var sM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={circle:null},e.setCircleCallback=function(){null!==e.state.circle&&e.props.onLoad&&e.props.onLoad(e.state.circle)},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.Circle(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=Sj({updaterMap:aM,eventMap:iM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{circle:e}}),this.setCircleCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.circle&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:aM,eventMap:iM,prevProps:e,nextProps:this.props,instance:this.state.circle}))}},{key:"componentWillUnmount",value:function(){null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),_j(this.registeredEvents),this.state.circle&&this.state.circle.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);sM.contextType=kj;var uM={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},cM={add:function(e,t){e.add(t)},addgeojson:function(e,t,n){e.addGeoJson(t,n)},contains:function(e,t){e.contains(t)},foreach:function(e,t){e.forEach(t)},loadgeojson:function(e,t,n,r){e.loadGeoJson(t,n,r)},overridestyle:function(e,t,n){e.overrideStyle(t,n)},remove:function(e,t){e.remove(t)},revertstyle:function(e,t){e.revertStyle(t)},controlposition:function(e,t){e.setControlPosition(t)},controls:function(e,t){e.setControls(t)},drawingmode:function(e,t){e.setDrawingMode(t)},map:function(e,t){e.setMap(t)},style:function(e,t){e.setStyle(t)},togeojson:function(e,t){e.toGeoJson(t)}};(0,r.memo)((function(e){var t=e.options,n=e.onClick,i=e.onDblClick,a=e.onMouseDown,o=e.onMouseMove,s=e.onMouseOut,u=e.onMouseOver,c=e.onMouseUp,f=e.onRightClick,h=e.onAddFeature,d=e.onRemoveFeature,p=e.onRemoveProperty,v=e.onSetGeometry,m=e.onSetProperty,g=e.onLoad,y=e.onUnmount,k=(0,r.useContext)(kj),b=l((0,r.useState)(null),2),w=b[0],x=b[1],_=l((0,r.useState)(null),2),S=_[0],E=_[1],C=l((0,r.useState)(null),2),I=C[0],T=C[1],L=l((0,r.useState)(null),2),N=L[0],P=L[1],O=l((0,r.useState)(null),2),A=O[0],j=O[1],D=l((0,r.useState)(null),2),M=D[0],R=D[1],F=l((0,r.useState)(null),2),U=F[0],V=F[1],B=l((0,r.useState)(null),2),z=B[0],q=B[1],W=l((0,r.useState)(null),2),H=W[0],G=W[1],K=l((0,r.useState)(null),2),Q=K[0],J=K[1],Z=l((0,r.useState)(null),2),Y=Z[0],$=Z[1],X=l((0,r.useState)(null),2),ee=X[0],te=X[1],ne=l((0,r.useState)(null),2),re=ne[0],ie=ne[1],ae=l((0,r.useState)(null),2),oe=ae[0],se=ae[1];return(0,r.useEffect)((function(){null!==w&&w.setMap(k)}),[k]),(0,r.useEffect)((function(){w&&i&&(null!==S&&google.maps.event.removeListener(S),E(google.maps.event.addListener(w,"dblclick",i)))}),[i]),(0,r.useEffect)((function(){w&&a&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(w,"mousedown",a)))}),[a]),(0,r.useEffect)((function(){w&&o&&(null!==N&&google.maps.event.removeListener(N),P(google.maps.event.addListener(w,"mousemove",o)))}),[o]),(0,r.useEffect)((function(){w&&s&&(null!==A&&google.maps.event.removeListener(A),j(google.maps.event.addListener(w,"mouseout",s)))}),[s]),(0,r.useEffect)((function(){w&&u&&(null!==M&&google.maps.event.removeListener(M),R(google.maps.event.addListener(w,"mouseover",u)))}),[u]),(0,r.useEffect)((function(){w&&c&&(null!==U&&google.maps.event.removeListener(U),V(google.maps.event.addListener(w,"mouseup",c)))}),[c]),(0,r.useEffect)((function(){w&&f&&(null!==z&&google.maps.event.removeListener(z),q(google.maps.event.addListener(w,"rightclick",f)))}),[f]),(0,r.useEffect)((function(){w&&n&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(w,"click",n)))}),[n]),(0,r.useEffect)((function(){w&&h&&(null!==Q&&google.maps.event.removeListener(Q),J(google.maps.event.addListener(w,"addfeature",h)))}),[h]),(0,r.useEffect)((function(){w&&d&&(null!==Y&&google.maps.event.removeListener(Y),$(google.maps.event.addListener(w,"removefeature",d)))}),[d]),(0,r.useEffect)((function(){w&&p&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(w,"removeproperty",p)))}),[p]),(0,r.useEffect)((function(){w&&v&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(w,"setgeometry",v)))}),[v]),(0,r.useEffect)((function(){w&&m&&(null!==oe&&google.maps.event.removeListener(oe),se(google.maps.event.addListener(w,"setproperty",m)))}),[m]),(0,r.useEffect)((function(){if(null!==k){var e=new google.maps.Data(Object.assign(Object.assign({},t||{}),{map:k}));i&&E(google.maps.event.addListener(e,"dblclick",i)),a&&T(google.maps.event.addListener(e,"mousedown",a)),o&&P(google.maps.event.addListener(e,"mousemove",o)),s&&j(google.maps.event.addListener(e,"mouseout",s)),u&&R(google.maps.event.addListener(e,"mouseover",u)),c&&V(google.maps.event.addListener(e,"mouseup",c)),f&&q(google.maps.event.addListener(e,"rightclick",f)),n&&G(google.maps.event.addListener(e,"click",n)),h&&J(google.maps.event.addListener(e,"addfeature",h)),d&&$(google.maps.event.addListener(e,"removefeature",d)),p&&te(google.maps.event.addListener(e,"removeproperty",p)),v&&ie(google.maps.event.addListener(e,"setgeometry",v)),m&&se(google.maps.event.addListener(e,"setproperty",m)),x(e),g&&g(e)}return function(){w&&(null!==S&&google.maps.event.removeListener(S),null!==I&&google.maps.event.removeListener(I),null!==N&&google.maps.event.removeListener(N),null!==A&&google.maps.event.removeListener(A),null!==M&&google.maps.event.removeListener(M),null!==U&&google.maps.event.removeListener(U),null!==z&&google.maps.event.removeListener(z),null!==H&&google.maps.event.removeListener(H),null!==Q&&google.maps.event.removeListener(Q),null!==Y&&google.maps.event.removeListener(Y),null!==ee&&google.maps.event.removeListener(ee),null!==re&&google.maps.event.removeListener(re),null!==oe&&google.maps.event.removeListener(oe),y&&y(w),w.setMap(null))}}),[]),null}));var lM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={data:null},e.setDataCallback=function(){null!==e.state.data&&e.props.onLoad&&e.props.onLoad(e.state.data)},e}return g(n,[{key:"componentDidMount",value:function(){if(null!==this.context){var e=new google.maps.Data(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=Sj({updaterMap:cM,eventMap:uM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{data:e}}),this.setDataCallback)}}},{key:"componentDidUpdate",value:function(e){null!==this.state.data&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:cM,eventMap:uM,prevProps:e,nextProps:this.props,instance:this.state.data}))}},{key:"componentWillUnmount",value:function(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),_j(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);lM.contextType=kj;var fM={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},hM={options:function(e,t){e.setOptions(t)},url:function(e,t){e.setUrl(t)},zIndex:function(e,t){e.setZIndex(t)}},dM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={kmlLayer:null},e.setKmlLayerCallback=function(){null!==e.state.kmlLayer&&e.props.onLoad&&e.props.onLoad(e.state.kmlLayer)},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.KmlLayer(Object.assign(Object.assign({},this.props.options),{map:this.context}));this.registeredEvents=Sj({updaterMap:hM,eventMap:fM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{kmlLayer:e}}),this.setKmlLayerCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.kmlLayer&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:hM,eventMap:fM,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),_j(this.registeredEvents),this.state.kmlLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);function pM(e,t){return"function"===typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function vM(e,t){return new t(e.lat,e.lng)}function mM(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function gM(e,t,n,r){return void 0!==n?function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n.getNorthEast()),i=e&&e.fromLatLngToDivPixel(n.getSouthWest());return r&&i?{left:"".concat(i.x+t.x,"px"),top:"".concat(r.y+t.y,"px"),width:"".concat(r.x-i.x-t.x,"px"),height:"".concat(i.y-r.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,(i=n,a=google.maps.LatLngBounds,o=mM,i instanceof a?i:o(i,a))):function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n);if(r){var i=r.x,a=r.y;return{left:"".concat(i+t.x,"px"),top:"".concat(a+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,n){return e instanceof t?e:n(e,t)}(r,google.maps.LatLng,vM));var i,a,o}function yM(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function kM(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}dM.contextType=kj;(0,r.memo)((function(e){var t=e.position,n=e.bounds,i=e.mapPaneName,a=e.zIndex,o=e.onLoad,s=e.onUnmount,u=e.getPixelPositionOffset,c=e.children,f=(0,r.useContext)(kj),h=(0,r.useMemo)((function(){var e=document.createElement("div");return e.style.position="absolute",e}),[]),p=(0,r.useMemo)((function(){return function(e,t,n,r,i){var a=function(e){k(n,google.maps.OverlayView);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).container=e,o.pane=r,o.position=i,o.bounds=a,o}return g(n,[{key:"onAdd",value:function(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null===t||void 0===t||t.appendChild(this.container)}},{key:"draw",value:function(){for(var e=gM(this.getProjection(),Object.assign({},this.container?pM(this.container,i):{x:0,y:0}),this.bounds,this.position),t=0,n=Object.entries(e);t<n.length;t++){var r=l(n[t],2),a=r[0],o=r[1];this.container.style[a]=o}}},{key:"onRemove",value:function(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}]),n}();return new a(e,t,n,r)}(h,i,t,n,u)}),[h,i,t,n]);return(0,r.useEffect)((function(){return null===o||void 0===o||o(p),null===p||void 0===p||p.setMap(f),function(){null===s||void 0===s||s(p),null===p||void 0===p||p.setMap(null)}}),[f,p]),(0,r.useEffect)((function(){h.style.zIndex="".concat(a)}),[a,h]),qe.createPortal(c,h)}));var bM=function(e){k(n,e);var t=_(n);function n(e){var i;d(this,n),(i=t.call(this,e)).state={paneEl:null,containerStyle:{position:"absolute"}},i.updatePane=function(){var e=i.props.mapPaneName,t=i.overlayView.getPanes();yj(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?i.setState({paneEl:t[e]}):i.setState({paneEl:null})},i.onAdd=function(){var e,t;i.updatePane(),null===(t=(e=i.props).onLoad)||void 0===t||t.call(e,i.overlayView)},i.onPositionElement=function(){var e,t,n=gM(i.overlayView.getProjection(),Object.assign({x:0,y:0},i.containerRef.current?pM(i.containerRef.current,i.props.getPixelPositionOffset):{}),i.props.bounds,i.props.position),r=i.state.containerStyle,a=r.left,o=r.top,s=r.width,u=r.height;t={left:a,top:o,width:s,height:u},((e=n).left!==t.left||e.top!==t.top||e.width!==t.height||e.height!==t.height)&&i.setState({containerStyle:Object.assign(Object.assign({},n),{position:"absolute"})})},i.draw=function(){i.onPositionElement()},i.onRemove=function(){var e,t;i.setState((function(){return{paneEl:null}})),null===(t=(e=i.props).onUnmount)||void 0===t||t.call(e,i.overlayView)},i.containerRef=(0,r.createRef)();var a=new google.maps.OverlayView;return a.onAdd=i.onAdd,a.draw=i.draw,a.onRemove=i.onRemove,i.overlayView=a,i}return g(n,[{key:"componentDidMount",value:function(){this.overlayView.setMap(this.context)}},{key:"componentDidUpdate",value:function(e){var t=yM(e.position),n=yM(this.props.position),r=kM(e.bounds),i=kM(this.props.bounds);t===n&&r===i||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}},{key:"componentWillUnmount",value:function(){this.overlayView.setMap(null)}},{key:"render",value:function(){var e=this.state.paneEl;return e?qe.createPortal((0,st.jsx)("div",Object.assign({ref:this.containerRef,style:this.state.containerStyle},{children:r.Children.only(this.props.children)})),e):null}}]),n}(r.PureComponent);bM.FLOAT_PANE="floatPane",bM.MAP_PANE="mapPane",bM.MARKER_LAYER="markerLayer",bM.OVERLAY_LAYER="overlayLayer",bM.OVERLAY_MOUSE_TARGET="overlayMouseTarget",bM.contextType=kj;var wM={onDblClick:"dblclick",onClick:"click"},xM={opacity:function(e,t){e.setOpacity(t)}};(0,r.memo)((function(e){var t=e.url,n=e.bounds,i=e.options,a=e.visible,o=(0,r.useContext)(kj),s=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),u=(0,r.useMemo)((function(){return new google.maps.GroundOverlay(t,s,Object.assign({},i))}),[]);return(0,r.useEffect)((function(){null!==u&&u.setMap(o)}),[o]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==u&&(u.set("url",t),u.setMap(o))}),[u,t]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==u&&u.setOpacity(a?1:0)}),[u,a]),(0,r.useEffect)((function(){var e=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));"undefined"!==typeof n&&null!==u&&(u.set("bounds",e),u.setMap(o))}),[u,n]),null}));var _M=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={groundOverlay:null},e.setGroundOverlayCallback=function(){null!==e.state.groundOverlay&&e.props.onLoad&&e.props.onLoad(e.state.groundOverlay)},e}return g(n,[{key:"componentDidMount",value:function(){yj(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Object.assign(Object.assign({},this.props.options),{map:this.context}));this.registeredEvents=Sj({updaterMap:xM,eventMap:wM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{groundOverlay:e}}),this.setGroundOverlayCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.groundOverlay&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:xM,eventMap:wM,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}},{key:"componentWillUnmount",value:function(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);_M.defaultProps={onLoad:function(){}},_M.contextType=kj;var SM={},EM={data:function(e,t){e.setData(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)}};(0,r.memo)((function(e){var t=e.data,n=e.onLoad,i=e.onUnmount,a=e.options,o=(0,r.useContext)(kj),s=l((0,r.useState)(null),2),u=s[0],c=s[1];return(0,r.useEffect)((function(){google.maps.visualization||yj(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)}),[]),(0,r.useEffect)((function(){yj(!!t,"data property is required in HeatmapLayer %s",t)}),[t]),(0,r.useEffect)((function(){null!==u&&u.setMap(o)}),[o]),(0,r.useEffect)((function(){a&&null!==u&&u.setOptions(a)}),[u,a]),(0,r.useEffect)((function(){var e=new google.maps.visualization.HeatmapLayer(Object.assign(Object.assign({},a||{}),{data:t,map:o}));return c(e),n&&n(e),function(){null!==u&&(i&&i(u),u.setMap(null))}}),[]),null}));var CM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={heatmapLayer:null},e.setHeatmapLayerCallback=function(){null!==e.state.heatmapLayer&&e.props.onLoad&&e.props.onLoad(e.state.heatmapLayer)},e}return g(n,[{key:"componentDidMount",value:function(){yj(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),yj(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Object.assign(Object.assign({},this.props.options||{}),{data:this.props.data,map:this.context}));this.registeredEvents=Sj({updaterMap:EM,eventMap:SM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{heatmapLayer:e}}),this.setHeatmapLayerCallback)}},{key:"componentDidUpdate",value:function(e){_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:EM,eventMap:SM,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}},{key:"componentWillUnmount",value:function(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),_j(this.registeredEvents),this.state.heatmapLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);CM.contextType=kj;var IM={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},TM={register:function(e,t,n){e.registerPanoProvider(t,n)},links:function(e,t){e.setLinks(t)},motionTracking:function(e,t){e.setMotionTracking(t)},options:function(e,t){e.setOptions(t)},pano:function(e,t){e.setPano(t)},position:function(e,t){e.setPosition(t)},pov:function(e,t){e.setPov(t)},visible:function(e,t){e.setVisible(t)},zoom:function(e,t){e.setZoom(t)}},LM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={streetViewPanorama:null},e.setStreetViewPanoramaCallback=function(){null!==e.state.streetViewPanorama&&e.props.onLoad&&e.props.onLoad(e.state.streetViewPanorama)},e}return g(n,[{key:"componentDidMount",value:function(){var e=this.context.getStreetView();this.registeredEvents=Sj({updaterMap:TM,eventMap:IM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{streetViewPanorama:e}}),this.setStreetViewPanoramaCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.streetViewPanorama&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:TM,eventMap:IM,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}},{key:"componentWillUnmount",value:function(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),_j(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);LM.contextType=kj;var NM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).state={streetViewService:null},e.setStreetViewServiceCallback=function(){null!==e.state.streetViewService&&e.props.onLoad&&e.props.onLoad(e.state.streetViewService)},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.StreetViewService;this.setState((function(){return{streetViewService:e}}),this.setStreetViewServiceCallback)}},{key:"componentWillUnmount",value:function(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}},{key:"render",value:function(){return null}}]),n}(r.PureComponent);NM.contextType=kj;r.PureComponent;var PM={onDirectionsChanged:"directions_changed"},OM={directions:function(e,t){e.setDirections(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},panel:function(e,t){e.setPanel(t)},routeIndex:function(e,t){e.setRouteIndex(t)}},AM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={directionsRenderer:null},e.setDirectionsRendererCallback=function(){null!==e.state.directionsRenderer&&(e.state.directionsRenderer.setMap(e.context),e.props.onLoad&&e.props.onLoad(e.state.directionsRenderer))},e}return g(n,[{key:"componentDidMount",value:function(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Sj({updaterMap:OM,eventMap:PM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{directionsRenderer:e}}),this.setDirectionsRendererCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.directionsRenderer&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:OM,eventMap:PM,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),_j(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}},{key:"render",value:function(){return(0,st.jsx)(st.Fragment,{})}}]),n}(r.PureComponent);AM.contextType=kj;r.PureComponent;var jM={onPlacesChanged:"places_changed"},DM={bounds:function(e,t){e.setBounds(t)}},MM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.containerElement=(0,r.createRef)(),e.state={searchBox:null},e.setSearchBoxCallback=function(){null!==e.state.searchBox&&e.props.onLoad&&e.props.onLoad(e.state.searchBox)},e}return g(n,[{key:"componentDidMount",value:function(){if(yj(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Sj({updaterMap:DM,eventMap:jM,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{searchBox:t}}),this.setSearchBoxCallback)}}}},{key:"componentDidUpdate",value:function(e){null!==this.state.searchBox&&(_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:DM,eventMap:jM,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}},{key:"componentWillUnmount",value:function(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),_j(this.registeredEvents))}},{key:"render",value:function(){return(0,st.jsx)("div",Object.assign({ref:this.containerElement},{children:r.Children.only(this.props.children)}))}}]),n}(r.PureComponent);MM.contextType=kj;var RM={onPlaceChanged:"place_changed"},FM={bounds:function(e,t){e.setBounds(t)},restrictions:function(e,t){e.setComponentRestrictions(t)},fields:function(e,t){e.setFields(t)},options:function(e,t){e.setOptions(t)},types:function(e,t){e.setTypes(t)}},UM=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.containerElement=(0,r.createRef)(),e.state={autocomplete:null},e.setAutocompleteCallback=function(){null!==e.state.autocomplete&&e.props.onLoad&&e.props.onLoad(e.state.autocomplete)},e}return g(n,[{key:"componentDidMount",value:function(){yj(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var e=this.containerElement.current.querySelector("input");if(e){var t=new google.maps.places.Autocomplete(e,this.props.options);this.registeredEvents=Sj({updaterMap:FM,eventMap:RM,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{autocomplete:t}}),this.setAutocompleteCallback)}}},{key:"componentDidUpdate",value:function(e){_j(this.registeredEvents),this.registeredEvents=Sj({updaterMap:FM,eventMap:RM,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}},{key:"componentWillUnmount",value:function(){null!==this.state.autocomplete&&_j(this.registeredEvents)}},{key:"render",value:function(){return(0,st.jsx)("div",Object.assign({ref:this.containerElement,className:this.props.className},{children:r.Children.only(this.props.children)}))}}]),n}(r.PureComponent);UM.defaultProps={className:""},UM.contextType=kj;var VM=function(){var e={lat:46.4687036955026,lng:30.742498892070394};return(0,st.jsx)("div",{className:"contact",children:(0,st.jsx)(ut,{children:(0,st.jsxs)("div",{className:"contact__content",children:[(0,st.jsxs)("div",{className:"contact__column",children:[(0,st.jsx)("h1",{className:"title__h1",children:"\u0417\u0432\u2019\u044f\u0437\u0430\u0442\u0438\u0441\u044f \u0437 \u043d\u0430\u043c\u0438"}),(0,st.jsxs)("div",{className:"contact__section",children:[(0,st.jsx)("span",{className:"contact__text",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u0456\u0441\u0442\u043e:"}),(0,st.jsxs)("div",{className:"contact__btns",children:[(0,st.jsx)("button",{className:"contact__btn contact__btn-active",children:"\u041e\u0434\u0435\u0441\u0430"}),(0,st.jsx)("button",{className:"contact__btn ",disabled:!0,children:"\u0423\u0436\u0433\u043e\u0440\u043e\u0434"})]})]}),(0,st.jsxs)("ul",{className:"contact__list",children:[(0,st.jsxs)("li",{className:"contact__item",children:[(0,st.jsx)("span",{className:"contact__item-title",children:"\u0410\u0434\u0440\u0435\u0441\u0430"}),(0,st.jsx)("span",{className:"contact__item-link",children:"\u0432\u0443\u043b. \u041b\u0435\u0439\u0442\u0435\u043d\u0430\u043d\u0442\u0430 \u0428\u043c\u0456\u0434\u0442\u0430 25"})]}),(0,st.jsxs)("li",{className:"contact__item",children:[(0,st.jsx)("span",{className:"contact__item-title",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,st.jsx)("a",{href:"tel:+390987271991",className:"contact__item-link",children:"+39 (098) 727 19 91"})]}),(0,st.jsxs)("li",{className:"contact__item",children:[(0,st.jsx)("span",{className:"contact__item-title",children:"\u0413\u0440\u0430\u0444\u0456\u043a \u0440\u043e\u0431\u043e\u0442\u0438"}),(0,st.jsx)("span",{className:"contact__item-link",children:"\u041d\u0435\u0434\u0456\u043b\u044f - \u0427\u0435\u0442\u0432\u0435\u0440: 9:00 - 21:00"}),(0,st.jsx)("span",{className:"contact__item-link",children:"\u041f\u2019\u044f\u0442\u043d\u0438\u0446\u044f - \u0421\u0443\u0431\u043e\u0442\u0430: 10:00 - 22:00"})]}),(0,st.jsxs)("li",{className:"contact__item",children:[(0,st.jsx)("span",{className:"contact__item-title",children:"Email"}),(0,st.jsx)("a",{href:"mailto:support@polarpelmeni.com",className:"contact__item-link",children:"support@polarpelmeni.com"})]})]})]}),(0,st.jsx)("div",{className:"contact__column",children:(0,st.jsx)("div",{className:"contact__map",children:(0,st.jsx)(Uj,{googleMapsApiKey:"AIzaSyCFu2436NGhyXMBwq8mLiAhsl_SSYYRhvI",children:(0,st.jsx)(Ij,{mapContainerStyle:{height:"100%"},center:e,zoom:17,options:{streetViewControl:!1,mapTypeControl:!1,zoomControl:!1,styles:[{featureType:"all",elementType:"all",stylers:[{saturation:-100},{lightness:20},{gamma:1.2}]}]},children:(0,st.jsx)($j,{position:e})})})})})]})})})};Iu.initializeApp(BA);var BM=function(){var e=Ye((function(e){return e.modals})),t=Ye((function(e){return e.user})),n=l((0,r.useState)(!0),2),i=n[0],a=n[1],o=ot(),s=ke(),u=we();(0,r.useEffect)((function(){!function(){var e=localStorage.getItem("userData"),t=JSON.parse(e);e&&(o(xa()),!0===t.isAuthenticated&&(o(Ta({city:t.city})),o(Ca(t))))}(),o(Pa())}),[]),(0,r.useEffect)((function(){var e=localStorage.getItem("favoritProducts");JSON.parse(e)&&o(Pa())}),[t.isAuthenticated]),(0,r.useEffect)((function(){"/profile/signout"===s.pathname&&(o(Ia()),u("/"))}),[s]),(0,r.useEffect)((function(){var e=function(){var e=s.pathname.includes("/profile");window.innerWidth<=768&&e?a(!1):a(!0)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[s]),(0,r.useEffect)((function(){window.scrollTo(0,0)}),[s]);var c,f=Ye((function(e){return e.popupActions.currentAction}));return(0,r.useEffect)((function(){null!==t.city?o(po({isOpen:!1})):o(po({isOpen:!0}))}),[t]),(0,st.jsxs)(st.Fragment,{children:[(c=f,"addToCard"===c?(0,st.jsx)(ko,{action:"\u0411\u043b\u044e\u0434\u043e \u0434\u043e\u0434\u0430\u043d\u043e \u0443 \u043a\u043e\u0448\u0438\u043a"}):"addToFavorit"===c?(0,st.jsx)(ko,{action:"\u0411\u043b\u044e\u0434\u043e \u0434\u043e\u0434\u0430\u043d\u043e \u0432 \xab\u0423\u043b\u044e\u0431\u043b\u0435\u043d\u0435\xbb"}):null),e.cityModal&&(0,st.jsx)(wr,{small:!0,closeModal:function(){return o(po({isOpen:!1}))},children:(0,st.jsx)(vj,{})}),i&&(0,st.jsx)(VA,{}),(0,st.jsxs)(Fe,{children:[(0,st.jsx)(Me,{path:"/",element:(0,st.jsx)(mj,{})}),(0,st.jsx)(Me,{path:"/menu",element:(0,st.jsx)(gj,{}),children:(0,st.jsx)(Me,{path:":id",element:(0,st.jsx)(gj,{})})}),(0,st.jsx)(Me,{path:"/product/:id",element:(0,st.jsx)(co,{})}),(0,st.jsx)(Me,{path:"/about-us",element:(0,st.jsx)(KA,{})}),(0,st.jsx)(Me,{path:"/order",element:(0,st.jsx)(hj,{})}),(0,st.jsx)(Me,{path:"/contact",element:(0,st.jsx)(VM,{})}),(0,st.jsxs)(Me,{path:"/profile",children:[(0,st.jsx)(Me,{index:!0,element:(0,st.jsx)(Va,{})}),(0,st.jsx)(Me,{path:":item",element:(0,st.jsx)(Va,{})})]})]}),(0,st.jsx)(pj,{})]})},zM=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},qM=function(e){var t,n=ia(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,s=void 0===o?n():o,u=r.devTools,c=void 0===u||u,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!ea(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=ji(a)}var p=s;"function"===typeof p&&(p=p(n));var v=Mi.apply(void 0,p),m=Di;c&&(m=Xi(Zi({trace:!1},"object"===typeof c&&c)));var g=new na(v),y=g;return Array.isArray(d)?y=zi([v],d):"function"===typeof d&&(y=d(g)),Ai(t,f,m.apply(void 0,y))}({reducer:{user:Oa,modals:mo,popupActions:Da,shoppingCart:_a,order:uj}});a.createRoot(document.getElementById("root")).render((0,st.jsx)(r.StrictMode,{children:(0,st.jsx)(tt,{store:qM,children:(0,st.jsx)(mt,{children:(0,st.jsx)(BM,{})})})})),zM()}()}();
//# sourceMappingURL=main.36bf076c.js.map